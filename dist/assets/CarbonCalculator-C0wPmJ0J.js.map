{"version":3,"mappings":"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","names":["Activity","createLucideIcon","Bot","Briefcase","Droplets","FileJson","FileSpreadsheet","Gauge","Link","Package","RotateCcw","Save","Share2","Thermometer","TreePine","Users","Wifi","Wind","HelpButton","onClick","className","asIcon","jsx","e","HelpCircle","CalculatorHelpModal","open","onOpenChange","title","purpose","nccRelevance","sections","quickStart","commonErrors","Dialog","jsxs","DialogContent","DialogHeader","DialogTitle","Target","Card","CardHeader","CardTitle","Info","CardContent","CheckCircle","Badge","step","index","Separator","section","AlertCircle","error","LCAGuide","Leaf","Truck","Recycle","ScopeGuide","Factory","Zap","Globe","LEEDGuide","Award","BREEAMGuide","Shield","GreenStarGuide","Star","EnhancedCalculatorHelpModal","quickActions","completionRate","searchQuery","setSearchQuery","useState","selectedCategory","setSelectedCategory","filteredSections","useMemo","_a","priorityColor","priority","categories","cats","action","filteredQuickActions","Clock","Progress","Search","Input","category","Button","BookOpen","EnhancedNCCGuide","Building","Building2","Settings","Lightbulb","Calculator","Home","toast","EnhancedNABERSGuide","TrendingUp","FileText","RealTimeMetrics","calculatorData","totalEmissions","emissionsData","_b","_c","_d","item","complianceData","_e","_f","_g","_h","trendData","calculateReduction","ResponsiveContainer","PieChart","Pie","entry","Cell","Tooltip","value","BarChart","CartesianGrid","XAxis","YAxis","Bar","TrendingDown","LineChart","Line","CHECKBOX_NAME","createCheckboxContext","createCheckboxScope","createContextScope","CheckboxProviderImpl","useCheckboxContext","CheckboxProvider","props","__scopeCheckbox","checkedProp","children","defaultChecked","disabled","form","name","onCheckedChange","required","internal_do_not_use_render","checked","setChecked","useControllableState","control","setControl","React.useState","bubbleInput","setBubbleInput","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","context","isIndeterminate","isFunction","TRIGGER_NAME","CheckboxTrigger","React.forwardRef","onKeyDown","checkboxProps","forwardedRef","composedRefs","useComposedRefs","initialCheckedStateRef","React.useEffect","reset","Primitive","getState","composeEventHandlers","event","prevChecked","Checkbox","Fragment","CheckboxBubbleInput","INDICATOR_NAME","CheckboxIndicator","forceMount","indicatorProps","Presence","BUBBLE_INPUT_NAME","usePrevious","controlSize","useSize","input","inputProto","bubbles","defaultCheckedRef","ref","CheckboxPrimitive.Root","cn","CheckboxPrimitive.Indicator","Check","ExportManager","selectedSections","setSelectedSections","exportFormat","setExportFormat","isExporting","setIsExporting","useToast","handleSectionToggle","prev","generateExportData","exportData","key","calculateOverallCompliance","compliantCount","totalCount","exportToCSV","data","csvRows","sectionData","csvContent","row","blob","url","a","exportToJSON","jsonContent","exportToPDF","jsPDF","__vitePreload","__vite_default__","n","autoTable","doc","tableData","pageCount","i","handleExport","shareData","Download","Label","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","selected","AIAssistant","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","isConnected","setIsConnected","messagesEndRef","useRef","scrollToBottom","useEffect","generateAIResponse","userMessage","supabase","generateFallbackResponse","lowercaseMessage","handleSendMessage","aiResponse","assistantMessage","fallbackMessage","generateAnalysisReport","analysisReport","analysisMessage","generateRecommendations","recommendationMessage","quickPrompts","Brain","WifiOff","Tabs","TabsList","TabsTrigger","TabsContent","ScrollArea","message","User","Loader2","prompt","Send","useCalculatorPersonalization","user","profile","useAuth","personalization","usePersonalization","saveCalculationWithPersonalization","useCallback","calculatorType","inputData","results","carbonFootprint","complianceStatus","thresholds","relevantThreshold","improvementSuggestions","generateImprovementSuggestions","carbonGoals","getPersonalizedDefaults","defaults","focusAreas","getRecommendedMaterials","recommendations","checkComplianceThresholds","threshold","suggestions","useCalculatorState","setCalculatorData","savedCalculations","setSavedCalculations","isSaving","setIsSaving","calculateTotalEmissions","total","calculateComplianceScore","loadSavedCalculations","calculations","project","saveCalculation","complianceScore","loadCalculation","calculationId","loadedData","updateHandlers","usePersonalizedCalculatorState","calculatorState","personalizedDefaults","setPersonalizedDefaults","isApplyingDefaults","setIsApplyingDefaults","success","calculatorTypes","handler","template","history","currentEmissions","averageEmissions","sum","calc","improvement","templates","CalculatorTemplateSelector","onSelectTemplate","userFocusAreas","recentTemplates","sortedTemplates","b","aRelevance","tag","area","bRelevance","aRecent","getRecommendationBadge","badge","type","PersonalizedCalculatorDashboard","insights","complianceCheck","recommendedMaterials","onApplyDefaults","calculationHistory","onTemplateSelect","BarChart3","AlertTriangle","material","l","StreamlinedErrorBoundary","feature","fallbackComponent","onReset","isChecking","handleReset","handleError","useErrorBoundaryState","DefaultFallback","React","resetErrorBoundary","ErrorFallbackCard","isNetworkError","FallbackComponent","ErrorBoundary","LoadingSpinner","size","sizeClasses","ProgressiveLoadingState","progress","Skeleton","_","useLazyComponent","importFunc","options","preloadDelay","enableIntersectionObserver","isPreloaded","setIsPreloaded","isIntersecting","setIsIntersecting","timer","preloadComponent","observerRef","node","observer","preload","SaveCalculationDialog","onSave","setOpen","setName","handleSubmit","generateName","date","time","DialogTrigger","CalculatorHeader","actions","CalculatorTabs","activeTab","onTabChange","onHelpModalOpen","tabs","tab","Icon","useCalculatorActions","resetAll","resetCalculator","applyTemplate","format","downloadFile","content","mimeType","filename","NCCCalculator","m","NABERSCalculator","LCACalculator","ScopeCalculator","LEEDCalculator","BREEAMCalculator","GreenStarCalculator","ConstructionIntegrations","LazyAdminStatusChecker","NewCalculator","demoMode","setActiveTab","helpModals","setHelpModals","preloadNCC","preloadNABERS","preloadLCA","centralizedErrorReporting","applyPersonalizedDefaults","applyTemplateDefaults","checkPersonalizedCompliance","getCalculationInsights","handleTemplateSelect","modal","platform","Suspense","CarbonCalculator"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,28],"sources":["../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/bot.js","../../node_modules/lucide-react/dist/esm/icons/briefcase.js","../../node_modules/lucide-react/dist/esm/icons/droplets.js","../../node_modules/lucide-react/dist/esm/icons/file-json.js","../../node_modules/lucide-react/dist/esm/icons/file-spreadsheet.js","../../node_modules/lucide-react/dist/esm/icons/gauge.js","../../node_modules/lucide-react/dist/esm/icons/link.js","../../node_modules/lucide-react/dist/esm/icons/package.js","../../node_modules/lucide-react/dist/esm/icons/rotate-ccw.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/share-2.js","../../node_modules/lucide-react/dist/esm/icons/thermometer.js","../../node_modules/lucide-react/dist/esm/icons/tree-pine.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/wifi.js","../../node_modules/lucide-react/dist/esm/icons/wind.js","../../src/components/calculator/help/HelpButton.tsx","../../src/components/calculator/help/CalculatorHelpModal.tsx","../../src/components/calculator/help/guides/LCAGuide.tsx","../../src/components/calculator/help/guides/ScopeGuide.tsx","../../src/components/calculator/help/guides/LEEDGuide.tsx","../../src/components/calculator/help/guides/BREEAMGuide.tsx","../../src/components/calculator/help/guides/GreenStarGuide.tsx","../../src/components/calculator/help/EnhancedCalculatorHelpModal.tsx","../../src/components/calculator/help/guides/EnhancedNCCGuide.tsx","../../src/components/calculator/help/guides/EnhancedNABERSGuide.tsx","../../src/components/calculator/dashboard/RealTimeMetrics.tsx","../../node_modules/@radix-ui/react-checkbox/dist/index.mjs","../../src/components/ui/checkbox.tsx","../../src/components/calculator/export/ExportManager.tsx","../../src/components/calculator/ai/AIAssistant.tsx","../../src/hooks/useCalculatorPersonalization.ts","../../src/components/calculator/hooks/useCalculatorState.ts","../../src/components/calculator/hooks/usePersonalizedCalculatorState.ts","../../src/components/calculator/templates/CalculatorTemplateSelector.tsx","../../src/components/calculator/PersonalizedCalculatorDashboard.tsx","../../src/components/error/StreamlinedErrorBoundary.tsx","../../src/components/LoadingSpinner.tsx","../../src/components/loading/ProgressiveLoadingState.tsx","../../src/hooks/useLazyComponent.ts","../../src/components/calculator/SaveCalculationDialog.tsx","../../src/components/calculator/CalculatorHeader.tsx","../../src/components/calculator/CalculatorTabs.tsx","../../src/components/calculator/hooks/useCalculatorActions.ts","../../src/components/calculator/NewCalculator.tsx","../../src/components/CarbonCalculator.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"Activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bot = createLucideIcon(\"Bot\", [\n  [\"path\", { d: \"M12 8V4H8\", key: \"hb8ula\" }],\n  [\"rect\", { width: \"16\", height: \"12\", x: \"4\", y: \"8\", rx: \"2\", key: \"enze0r\" }],\n  [\"path\", { d: \"M2 14h2\", key: \"vft8re\" }],\n  [\"path\", { d: \"M20 14h2\", key: \"4cs60a\" }],\n  [\"path\", { d: \"M15 13v2\", key: \"1xurst\" }],\n  [\"path\", { d: \"M9 13v2\", key: \"rq6x2g\" }]\n]);\n\nexport { Bot as default };\n//# sourceMappingURL=bot.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Briefcase = createLucideIcon(\"Briefcase\", [\n  [\"path\", { d: \"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16\", key: \"jecpp\" }],\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"6\", rx: \"2\", key: \"i6l2r4\" }]\n]);\n\nexport { Briefcase as default };\n//# sourceMappingURL=briefcase.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Droplets = createLucideIcon(\"Droplets\", [\n  [\n    \"path\",\n    {\n      d: \"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z\",\n      key: \"1ptgy4\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97\",\n      key: \"1sl1rz\"\n    }\n  ]\n]);\n\nexport { Droplets as default };\n//# sourceMappingURL=droplets.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileJson = createLucideIcon(\"FileJson\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\n    \"path\",\n    { d: \"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1\", key: \"1oajmo\" }\n  ],\n  [\n    \"path\",\n    { d: \"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1\", key: \"mpwhp6\" }\n  ]\n]);\n\nexport { FileJson as default };\n//# sourceMappingURL=file-json.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileSpreadsheet = createLucideIcon(\"FileSpreadsheet\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M8 13h2\", key: \"yr2amv\" }],\n  [\"path\", { d: \"M14 13h2\", key: \"un5t4a\" }],\n  [\"path\", { d: \"M8 17h2\", key: \"2yhykz\" }],\n  [\"path\", { d: \"M14 17h2\", key: \"10kma7\" }]\n]);\n\nexport { FileSpreadsheet as default };\n//# sourceMappingURL=file-spreadsheet.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Gauge = createLucideIcon(\"Gauge\", [\n  [\"path\", { d: \"m12 14 4-4\", key: \"9kzdfg\" }],\n  [\"path\", { d: \"M3.34 19a10 10 0 1 1 17.32 0\", key: \"19p75a\" }]\n]);\n\nexport { Gauge as default };\n//# sourceMappingURL=gauge.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Link = createLucideIcon(\"Link\", [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n]);\n\nexport { Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Package = createLucideIcon(\"Package\", [\n  [\n    \"path\",\n    {\n      d: \"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z\",\n      key: \"1a0edw\"\n    }\n  ],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }],\n  [\"path\", { d: \"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7\", key: \"yx3hmr\" }],\n  [\"path\", { d: \"m7.5 4.27 9 5.15\", key: \"1c824w\" }]\n]);\n\nexport { Package as default };\n//# sourceMappingURL=package.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"RotateCcw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z\",\n      key: \"1c8476\"\n    }\n  ],\n  [\"path\", { d: \"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7\", key: \"1ydtos\" }],\n  [\"path\", { d: \"M7 3v4a1 1 0 0 0 1 1h7\", key: \"t51u73\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Share2 = createLucideIcon(\"Share2\", [\n  [\"circle\", { cx: \"18\", cy: \"5\", r: \"3\", key: \"gq8acd\" }],\n  [\"circle\", { cx: \"6\", cy: \"12\", r: \"3\", key: \"w7nqdw\" }],\n  [\"circle\", { cx: \"18\", cy: \"19\", r: \"3\", key: \"1xt0gg\" }],\n  [\"line\", { x1: \"8.59\", x2: \"15.42\", y1: \"13.51\", y2: \"17.49\", key: \"47mynk\" }],\n  [\"line\", { x1: \"15.41\", x2: \"8.59\", y1: \"6.51\", y2: \"10.49\", key: \"1n3mei\" }]\n]);\n\nexport { Share2 as default };\n//# sourceMappingURL=share-2.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Thermometer = createLucideIcon(\"Thermometer\", [\n  [\"path\", { d: \"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z\", key: \"17jzev\" }]\n]);\n\nexport { Thermometer as default };\n//# sourceMappingURL=thermometer.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TreePine = createLucideIcon(\"TreePine\", [\n  [\n    \"path\",\n    {\n      d: \"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z\",\n      key: \"cpyugq\"\n    }\n  ],\n  [\"path\", { d: \"M12 22v-3\", key: \"kmzjlo\" }]\n]);\n\nexport { TreePine as default };\n//# sourceMappingURL=tree-pine.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Wifi = createLucideIcon(\"Wifi\", [\n  [\"path\", { d: \"M12 20h.01\", key: \"zekei9\" }],\n  [\"path\", { d: \"M2 8.82a15 15 0 0 1 20 0\", key: \"dnpr2z\" }],\n  [\"path\", { d: \"M5 12.859a10 10 0 0 1 14 0\", key: \"1x1e6c\" }],\n  [\"path\", { d: \"M8.5 16.429a5 5 0 0 1 7 0\", key: \"1bycff\" }]\n]);\n\nexport { Wifi as default };\n//# sourceMappingURL=wifi.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Wind = createLucideIcon(\"Wind\", [\n  [\"path\", { d: \"M12.8 19.6A2 2 0 1 0 14 16H2\", key: \"148xed\" }],\n  [\"path\", { d: \"M17.5 8a2.5 2.5 0 1 1 2 4H2\", key: \"1u4tom\" }],\n  [\"path\", { d: \"M9.8 4.4A2 2 0 1 1 11 8H2\", key: \"75valh\" }]\n]);\n\nexport { Wind as default };\n//# sourceMappingURL=wind.js.map\n","import React from 'react';\r\nimport { HelpCircle } from 'lucide-react';\r\n\r\ninterface HelpButtonProps {\r\n  onClick: () => void;\r\n  className?: string;\r\n  asIcon?: boolean; // New prop to render as icon only for nested contexts\r\n}\r\n\r\nexport const HelpButton: React.FC<HelpButtonProps> = ({ onClick, className, asIcon = false }) => {\r\n  // If used inside interactive elements (like TabsTrigger), render as icon only\r\n  if (asIcon) {\r\n    return (\r\n      <div\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          onClick();\r\n        }}\r\n        className={`inline-flex items-center justify-center h-4 w-4 text-muted-foreground hover:text-foreground cursor-pointer transition-colors ${className}`}\r\n        title=\"Help & Tutorial\"\r\n        role=\"button\"\r\n        tabIndex={0}\r\n        onKeyDown={(e) => {\r\n          if (e.key === 'Enter' || e.key === ' ') {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            onClick();\r\n          }\r\n        }}\r\n      >\r\n        <HelpCircle className=\"h-3 w-3\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Default button implementation for standalone use\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className={`inline-flex items-center justify-center h-8 w-8 p-0 text-muted-foreground hover:text-foreground border-0 bg-transparent hover:bg-accent rounded-md transition-colors ${className}`}\r\n      title=\"Help & Tutorial\"\r\n    >\r\n      <HelpCircle className=\"h-4 w-4\" />\r\n    </button>\r\n  );\r\n};","import React from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { CheckCircle, AlertCircle, Info, Target } from 'lucide-react';\r\n\r\ninterface HelpSection {\r\n  title: string;\r\n  content: React.ReactNode;\r\n  icon?: React.ReactNode;\r\n}\r\n\r\ninterface CalculatorHelpModalProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  title: string;\r\n  purpose: string;\r\n  nccRelevance: string;\r\n  sections: HelpSection[];\r\n  quickStart?: string[];\r\n  commonErrors?: string[];\r\n}\r\n\r\nexport const CalculatorHelpModal: React.FC<CalculatorHelpModalProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  title,\r\n  purpose,\r\n  nccRelevance,\r\n  sections,\r\n  quickStart = [],\r\n  commonErrors = []\r\n}) => {\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2 text-xl\">\r\n            <Target className=\"h-6 w-6 text-primary\" />\r\n            {title} - How to Use\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Purpose & NCC Relevance Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Card className=\"border-primary/20\">\r\n              <CardHeader className=\"pb-3\">\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                  <Info className=\"h-4 w-4 text-blue-600\" />\r\n                  Purpose\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <p className=\"text-sm text-muted-foreground\">{purpose}</p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card className=\"border-green-200 dark:border-green-800\">\r\n              <CardHeader className=\"pb-3\">\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                  <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n                  NCC Compliance\r\n                  <Badge variant=\"outline\" className=\"text-xs\">Required</Badge>\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <p className=\"text-sm text-muted-foreground\">{nccRelevance}</p>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Quick Start */}\r\n          {quickStart.length > 0 && (\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"text-base\">Quick Start Guide</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ol className=\"space-y-2\">\r\n                  {quickStart.map((step, index) => (\r\n                    <li key={index} className=\"flex items-start gap-3\">\r\n                      <span className=\"flex-shrink-0 w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-xs font-medium\">\r\n                        {index + 1}\r\n                      </span>\r\n                      <span className=\"text-sm\">{step}</span>\r\n                    </li>\r\n                  ))}\r\n                </ol>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          <Separator />\r\n\r\n          {/* Detailed Sections */}\r\n          <div className=\"space-y-4\">\r\n            {sections.map((section, index) => (\r\n              <Card key={index}>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                    {section.icon}\r\n                    {section.title}\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  {section.content}\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Common Errors */}\r\n          {commonErrors.length > 0 && (\r\n            <Card className=\"border-amber-200 dark:border-amber-800\">\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                  <AlertCircle className=\"h-4 w-4 text-amber-600\" />\r\n                  Common Errors to Avoid\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ul className=\"space-y-2\">\r\n                  {commonErrors.map((error, index) => (\r\n                    <li key={index} className=\"flex items-start gap-2\">\r\n                      <span className=\"flex-shrink-0 w-1.5 h-1.5 bg-amber-600 rounded-full mt-2\" />\r\n                      <span className=\"text-sm text-muted-foreground\">{error}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};","import React from 'react';\r\nimport { CalculatorHelpModal } from '../CalculatorHelpModal';\r\nimport { Leaf, Package, Truck, Recycle } from 'lucide-react';\r\n\r\ninterface LCAGuideProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const LCAGuide: React.FC<LCAGuideProps> = ({ open, onOpenChange }) => {\r\n  const sections = [\r\n    {\r\n      title: 'Step 1: Embodied Carbon Assessment',\r\n      icon: <Package className=\"h-4 w-4 text-brown-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Calculate carbon emissions from building materials:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Structural Materials:</strong> Concrete, steel, timber quantities and carbon factors</li>\r\n            <li><strong>Envelope Materials:</strong> Insulation, cladding, glazing with EPD data</li>\r\n            <li><strong>Finishes:</strong> Interior materials, flooring, fixtures, and fittings</li>\r\n            <li><strong>MEP Systems:</strong> HVAC equipment, electrical systems, plumbing</li>\r\n            <li><strong>Material Origins:</strong> Local vs imported materials affect transport emissions</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-blue-800 dark:text-blue-300\">\r\n              Use Australian EPD data where available for accurate embodied carbon factors\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 2: Operational Carbon Modeling',\r\n      icon: <Leaf className=\"h-4 w-4 text-green-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Project lifetime operational emissions:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Design Life:</strong> Building analysis period (typically 50-60 years)</li>\r\n            <li><strong>Energy Consumption:</strong> Annual heating, cooling, lighting, and equipment loads</li>\r\n            <li><strong>Grid Factors:</strong> Electricity emission factors by state/territory</li>\r\n            <li><strong>Renewable Energy:</strong> On-site generation and green power purchases</li>\r\n            <li><strong>Grid Decarbonization:</strong> Future emission factor projections</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 3: Transport & Construction',\r\n      icon: <Truck className=\"h-4 w-4 text-orange-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Account for construction phase emissions:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Material Transport:</strong> Distance from source to site</li>\r\n            <li><strong>Construction Equipment:</strong> Diesel consumption for earthworks, cranes</li>\r\n            <li><strong>Waste Generation:</strong> Construction and demolition waste to landfill</li>\r\n            <li><strong>Worker Travel:</strong> Daily commuting during construction period</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 4: End-of-Life Considerations',\r\n      icon: <Recycle className=\"h-4 w-4 text-purple-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Include demolition and material recovery:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Demolition Energy:</strong> Equipment and transport for building removal</li>\r\n            <li><strong>Material Recovery:</strong> Recycling potential for steel, concrete, timber</li>\r\n            <li><strong>Waste Disposal:</strong> Landfill emissions from non-recyclable materials</li>\r\n            <li><strong>Credit for Recycling:</strong> Avoided emissions from material recovery</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-green-800 dark:text-green-300\">\r\n              NCC 2025: Consider circular economy principles in material selection\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const quickStart = [\r\n    \"Define project scope and system boundaries (cradle-to-grave)\",\r\n    \"Input material quantities from architectural and structural drawings\",\r\n    \"Select appropriate embodied carbon factors from EPD database\",\r\n    \"Configure operational energy model with HVAC and lighting systems\",\r\n    \"Add transport distances for major material categories\",\r\n    \"Set building design life (typically 50-60 years)\",\r\n    \"Calculate total lifecycle carbon footprint and benchmark results\"\r\n  ];\r\n\r\n  const commonErrors = [\r\n    \"Incomplete material inventory - missing finishes or MEP systems\",\r\n    \"Using global carbon factors instead of local/regional data\",\r\n    \"Not accounting for renewable energy in operational phase\",\r\n    \"Ignoring transport emissions for heavy materials like concrete\",\r\n    \"Double-counting emissions between different lifecycle stages\",\r\n    \"Using outdated electricity grid emission factors\"\r\n  ];\r\n\r\n  return (\r\n    <CalculatorHelpModal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      title=\"LCA Calculator\"\r\n      purpose=\"Perform comprehensive lifecycle carbon assessment covering embodied, operational, and end-of-life emissions over the building's entire lifespan.\"\r\n      nccRelevance=\"SUPPORTING TOOL for NCC 2025 objectives. While not mandatory, LCA helps optimize material selection and energy systems to achieve overall carbon reduction goals.\"\r\n      sections={sections}\r\n      quickStart={quickStart}\r\n      commonErrors={commonErrors}\r\n    />\r\n  );\r\n};","import React from 'react';\r\nimport { CalculatorHelpModal } from '../CalculatorHelpModal';\r\nimport { Zap, Factory, Truck, Globe } from 'lucide-react';\r\n\r\ninterface ScopeGuideProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const ScopeGuide: React.FC<ScopeGuideProps> = ({ open, onOpenChange }) => {\r\n  const sections = [\r\n    {\r\n      title: 'Scope 1: Direct Emissions',\r\n      icon: <Factory className=\"h-4 w-4 text-red-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Calculate emissions from sources directly owned or controlled:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Natural Gas:</strong> On-site combustion for heating, hot water, cooking (m³ × emission factor)</li>\r\n            <li><strong>Diesel Generators:</strong> Backup power systems and construction equipment (L × emission factor)</li>\r\n            <li><strong>Fleet Vehicles:</strong> Company-owned vehicles for maintenance and operations</li>\r\n            <li><strong>Refrigerants:</strong> HFC/HCFC leakage from HVAC systems (kg × GWP factor)</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-red-800 dark:text-red-300\">\r\n              Use Australian National Greenhouse Account factors for accurate calculations\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Scope 2: Indirect Energy Emissions',\r\n      icon: <Zap className=\"h-4 w-4 text-blue-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Account for purchased electricity and energy:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Grid Electricity:</strong> kWh consumption × state-specific emission factors</li>\r\n            <li><strong>Location-Based:</strong> Average grid emission factors for your region</li>\r\n            <li><strong>Market-Based:</strong> Supplier-specific factors including green power</li>\r\n            <li><strong>Renewable Energy:</strong> Deduct on-site solar generation and green power purchases</li>\r\n          </ul>\r\n          <div className=\"grid grid-cols-2 gap-3 mt-3\">\r\n            <div className=\"p-3 border rounded-lg\">\r\n              <h4 className=\"font-medium text-sm\">State Factors (kg CO₂-e/kWh)</h4>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">NSW: 0.81, VIC: 1.02, QLD: 0.79, SA: 0.40</p>\r\n            </div>\r\n            <div className=\"p-3 border rounded-lg\">\r\n              <h4 className=\"font-medium text-sm\">Renewable Energy</h4>\r\n              <p className=\"text-xs text-muted-foreground mt-1\">GreenPower and LGCs reduce Scope 2 emissions</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Scope 3: Value Chain Emissions',\r\n      icon: <Truck className=\"h-4 w-4 text-green-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Include relevant upstream and downstream emissions:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Purchased Goods:</strong> Embodied carbon in materials and products</li>\r\n            <li><strong>Transportation:</strong> Material delivery, waste removal, employee commuting</li>\r\n            <li><strong>Waste Generated:</strong> Treatment and disposal of operational waste</li>\r\n            <li><strong>Business Travel:</strong> Flights and accommodation for company activities</li>\r\n            <li><strong>Leased Assets:</strong> Downstream emissions from tenant energy use</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-amber-800 dark:text-amber-300\">\r\n              Focus on material categories - often 80% of construction Scope 3 emissions\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Carbon Accounting & Reporting',\r\n      icon: <Globe className=\"h-4 w-4 text-purple-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Ensure compliance with GHG Protocol standards:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Organizational Boundaries:</strong> Operational vs financial control approach</li>\r\n            <li><strong>Temporal Boundaries:</strong> Reporting period and data collection timeframes</li>\r\n            <li><strong>Data Quality:</strong> Primary data preferred, secondary data where necessary</li>\r\n            <li><strong>Verification:</strong> Third-party verification for credible reporting</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const quickStart = [\r\n    \"Define organizational and operational boundaries clearly\",\r\n    \"Collect 12 months of energy consumption data (electricity, gas)\",\r\n    \"Calculate Scope 1 emissions from direct fuel combustion\",\r\n    \"Determine Scope 2 using location-based grid emission factors\",\r\n    \"Identify material Scope 3 categories for your building type\",\r\n    \"Apply Australian emission factors consistently throughout\",\r\n    \"Verify total emissions align with industry benchmarks\"\r\n  ];\r\n\r\n  const commonErrors = [\r\n    \"Double-counting emissions between scopes (e.g., electricity in Scope 1 and 2)\",\r\n    \"Using incorrect emission factors - ensure Australian NGA factors\",\r\n    \"Missing refrigerant leakage from HVAC systems (significant in hot climates)\",\r\n    \"Not accounting for green power purchases in Scope 2 calculations\",\r\n    \"Incomplete Scope 3 boundary - excluding major material categories\",\r\n    \"Mixing reporting periods - ensure consistent 12-month timeframe\"\r\n  ];\r\n\r\n  return (\r\n    <CalculatorHelpModal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      title=\"Scope 1-3 Calculator\"\r\n      purpose=\"Calculate comprehensive greenhouse gas emissions across all three scopes following GHG Protocol standards for complete carbon footprint assessment.\"\r\n      nccRelevance=\"COMPLEMENTARY to NCC 2025 requirements. Provides comprehensive carbon accounting that supports broader sustainability goals and corporate reporting obligations.\"\r\n      sections={sections}\r\n      quickStart={quickStart}\r\n      commonErrors={commonErrors}\r\n    />\r\n  );\r\n};","import React from 'react';\r\nimport { CalculatorHelpModal } from '../CalculatorHelpModal';\r\nimport { Award, Droplets, Wind, TreePine } from 'lucide-react';\r\n\r\ninterface LEEDGuideProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const LEEDGuide: React.FC<LEEDGuideProps> = ({ open, onOpenChange }) => {\r\n  const sections = [\r\n    {\r\n      title: 'Energy & Atmosphere (EA)',\r\n      icon: <Award className=\"h-4 w-4 text-green-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Optimize energy performance for maximum EA points:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Energy Performance:</strong> 16-20 points for exceeding ASHRAE 90.1 baseline by 5-50%</li>\r\n            <li><strong>Renewable Energy:</strong> 1-3 points for on-site or off-site renewable systems</li>\r\n            <li><strong>Enhanced Commissioning:</strong> 6 points for comprehensive building systems verification</li>\r\n            <li><strong>Measurement & Verification:</strong> 3 points for ongoing energy monitoring systems</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-green-800 dark:text-green-300\">\r\n              NCC compliance helps achieve LEED energy performance thresholds\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Water Efficiency (WE)',\r\n      icon: <Droplets className=\"h-4 w-4 text-blue-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Implement water conservation strategies:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Indoor Water Use:</strong> 6 points for efficient fixtures and fittings</li>\r\n            <li><strong>Outdoor Water Use:</strong> 2-4 points for landscape water efficiency</li>\r\n            <li><strong>Water Metering:</strong> 1 point for building-level water monitoring</li>\r\n            <li><strong>Cooling Tower:</strong> 2 points for efficient cooling water management</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Indoor Environmental Quality (EQ)',\r\n      icon: <Wind className=\"h-4 w-4 text-purple-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Enhance occupant comfort and wellbeing:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Ventilation:</strong> 1-3 points for outdoor air delivery monitoring</li>\r\n            <li><strong>Thermal Comfort:</strong> 1 point for design and verification compliance</li>\r\n            <li><strong>Daylighting:</strong> 2-3 points for natural light optimization</li>\r\n            <li><strong>Views:</strong> 1 point for direct line of sight to outdoors</li>\r\n            <li><strong>Acoustic Performance:</strong> 1 point for noise control measures</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Materials & Resources (MR)',\r\n      icon: <TreePine className=\"h-4 w-4 text-brown-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Select sustainable building materials:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>EPDs:</strong> 1-2 points for Environmental Product Declarations</li>\r\n            <li><strong>Regional Materials:</strong> 1-2 points for locally sourced materials</li>\r\n            <li><strong>Recycled Content:</strong> 1-2 points for post-consumer recycled materials</li>\r\n            <li><strong>Rapidly Renewable:</strong> 1 point for bio-based materials</li>\r\n            <li><strong>Construction Waste:</strong> 1-2 points for waste diversion from landfill</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-blue-800 dark:text-blue-300\">\r\n              Australian materials databases support MR credit calculations\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const quickStart = [\r\n    \"Establish project baseline using ASHRAE 90.1 energy model\",\r\n    \"Configure building systems for 20%+ energy performance improvement\",\r\n    \"Design water-efficient systems and native landscaping\",\r\n    \"Select materials with EPDs and regional sourcing\",\r\n    \"Plan construction waste management and recycling program\",\r\n    \"Design for optimal daylighting and natural ventilation\",\r\n    \"Calculate total points and determine certification level\"\r\n  ];\r\n\r\n  const commonErrors = [\r\n    \"Using incorrect baseline - ASHRAE 90.1 not local energy codes\",\r\n    \"Not accounting for Australian climate data in energy modeling\",\r\n    \"Missing documentation for sustainable material claims\",\r\n    \"Inadequate commissioning scope affecting EA credits\",\r\n    \"Poor integration between water efficiency and landscape design\",\r\n    \"Insufficient measurement and verification planning\"\r\n  ];\r\n\r\n  return (\r\n    <CalculatorHelpModal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      title=\"LEED Calculator\"\r\n      purpose=\"Calculate LEED v4.1 BD+C points across all credit categories to achieve Certified, Silver, Gold, or Platinum certification levels.\"\r\n      nccRelevance=\"COMPLEMENTARY to NCC requirements. LEED energy performance credits align with and exceed NCC Section J requirements, supporting international sustainability recognition.\"\r\n      sections={sections}\r\n      quickStart={quickStart}\r\n      commonErrors={commonErrors}\r\n    />\r\n  );\r\n};","import React from 'react';\r\nimport { CalculatorHelpModal } from '../CalculatorHelpModal';\r\nimport { Award, Zap, Shield, Briefcase } from 'lucide-react';\r\n\r\ninterface BREEAMGuideProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const BREEAMGuide: React.FC<BREEAMGuideProps> = ({ open, onOpenChange }) => {\r\n  const sections = [\r\n    {\r\n      title: 'Energy Performance',\r\n      icon: <Zap className=\"h-4 w-4 text-green-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Achieve high energy efficiency ratings:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Energy Efficiency:</strong> Up to 15 points for exceeding notional building performance</li>\r\n            <li><strong>Sub-metering:</strong> 2 points for separate energy monitoring systems</li>\r\n            <li><strong>External Lighting:</strong> 1 point for efficient outdoor lighting design</li>\r\n            <li><strong>Low/Zero Carbon:</strong> 3 points for renewable energy systems</li>\r\n            <li><strong>Energy Monitoring:</strong> 1 point for building management systems</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-green-800 dark:text-green-300\">\r\n              BREEAM energy targets often exceed NCC requirements by 25-40%\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Health & Wellbeing',\r\n      icon: <Shield className=\"h-4 w-4 text-blue-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Optimize occupant health and comfort:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Visual Comfort:</strong> 4 points for glare control and daylighting</li>\r\n            <li><strong>Indoor Air Quality:</strong> 2 points for pollutant control and ventilation</li>\r\n            <li><strong>Thermal Comfort:</strong> 2 points for temperature and humidity control</li>\r\n            <li><strong>Acoustic Performance:</strong> 4 points for noise control measures</li>\r\n            <li><strong>Safe Containment:</strong> 1 point for hazardous substance management</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Management Processes',\r\n      icon: <Briefcase className=\"h-4 w-4 text-purple-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Implement comprehensive project management:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Commissioning:</strong> 2-4 points for building services commissioning</li>\r\n            <li><strong>Construction Site:</strong> 4 points for environmental site management</li>\r\n            <li><strong>Stakeholder Participation:</strong> 1 point for consultation processes</li>\r\n            <li><strong>Life Cycle Costing:</strong> 1 point for whole-life cost analysis</li>\r\n            <li><strong>Post Occupancy:</strong> 1 point for building performance evaluation</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Innovation & Exemplary Performance',\r\n      icon: <Award className=\"h-4 w-4 text-orange-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Achieve additional credits for exceptional performance:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Innovation Credits:</strong> Up to 10 points for innovative design solutions</li>\r\n            <li><strong>Exemplary Performance:</strong> Double points for exceeding credit thresholds</li>\r\n            <li><strong>BREEAM Accredited Professional:</strong> 1 point for AP involvement</li>\r\n            <li><strong>Research & Development:</strong> Points for contributing to BREEAM research</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-blue-800 dark:text-blue-300\">\r\n              Innovation credits can help achieve higher certification levels\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const quickStart = [\r\n    \"Select appropriate BREEAM scheme (New Construction, Refurbishment, etc.)\",\r\n    \"Configure building type and establish assessment methodology\",\r\n    \"Input energy performance data and compare to notional building\",\r\n    \"Assess management processes and commissioning procedures\",\r\n    \"Evaluate health & wellbeing features and indoor environment\",\r\n    \"Consider materials selection and transportation impacts\",\r\n    \"Calculate total score and determine certification level\"\r\n  ];\r\n\r\n  const commonErrors = [\r\n    \"Using incorrect BREEAM scheme for building type or project stage\",\r\n    \"Not accounting for Australian climate in energy calculations\",\r\n    \"Missing mandatory credits that prevent certification\",\r\n    \"Inadequate commissioning evidence affecting management credits\",\r\n    \"Poor integration between water and energy efficiency measures\",\r\n    \"Insufficient post-occupancy evaluation planning\"\r\n  ];\r\n\r\n  return (\r\n    <CalculatorHelpModal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      title=\"BREEAM Calculator\"\r\n      purpose=\"Calculate BREEAM International credits across all assessment categories to achieve Pass, Good, Very Good, Excellent, or Outstanding certification.\"\r\n      nccRelevance=\"COMPLEMENTARY to NCC compliance. BREEAM standards often exceed NCC requirements and provide international recognition for sustainable building practices.\"\r\n      sections={sections}\r\n      quickStart={quickStart}\r\n      commonErrors={commonErrors}\r\n    />\r\n  );\r\n};","import React from 'react';\r\nimport { CalculatorHelpModal } from '../CalculatorHelpModal';\r\nimport { Star, Leaf, Droplets, Users } from 'lucide-react';\r\n\r\ninterface GreenStarGuideProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const GreenStarGuide: React.FC<GreenStarGuideProps> = ({ open, onOpenChange }) => {\r\n  const sections = [\r\n    {\r\n      title: 'Energy Category',\r\n      icon: <Star className=\"h-4 w-4 text-green-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Optimize energy performance for Green Star points:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Greenhouse Gas Emissions:</strong> Up to 20 points for energy efficiency improvements</li>\r\n            <li><strong>Peak Energy Demand:</strong> 1 point for demand management systems</li>\r\n            <li><strong>Energy Sub-metering:</strong> 1 point for detailed energy monitoring</li>\r\n            <li><strong>Lighting Power Density:</strong> 2 points for efficient lighting design</li>\r\n            <li><strong>Renewable Energy:</strong> 2 points for on-site generation systems</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-green-800 dark:text-green-300\">\r\n              NCC Section J compliance provides foundation for Green Star energy credits\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Water Category',\r\n      icon: <Droplets className=\"h-4 w-4 text-blue-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Implement comprehensive water management:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Potable Water:</strong> Up to 10 points for water use reduction</li>\r\n            <li><strong>Water Meters:</strong> 1 point for building-level water monitoring</li>\r\n            <li><strong>Landscape Irrigation:</strong> 1 point for efficient irrigation systems</li>\r\n            <li><strong>Fire Systems:</strong> 1 point for water-efficient fire protection</li>\r\n            <li><strong>Cooling Systems:</strong> 1 point for water-efficient cooling towers</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Materials Category',\r\n      icon: <Leaf className=\"h-4 w-4 text-brown-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Select sustainable building materials:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Concrete:</strong> Up to 4 points for supplementary cementitious materials</li>\r\n            <li><strong>Steel:</strong> Up to 4 points for recycled content and responsible sourcing</li>\r\n            <li><strong>Timber:</strong> Up to 3 points for certified sustainable forestry</li>\r\n            <li><strong>PVC Minimization:</strong> 1 point for avoiding PVC where practical</li>\r\n            <li><strong>Design for Disassembly:</strong> 1 point for end-of-life planning</li>\r\n          </ul>\r\n          <div className=\"mt-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\r\n            <p className=\"text-xs font-medium text-blue-800 dark:text-blue-300\">\r\n              Australian materials databases support responsible sourcing verification\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Indoor Environment Quality',\r\n      icon: <Users className=\"h-4 w-4 text-purple-600\" />,\r\n      content: (\r\n        <div className=\"space-y-3\">\r\n          <p className=\"text-sm\">Enhance occupant health and productivity:</p>\r\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n            <li><strong>Daylight:</strong> Up to 4 points for natural lighting optimization</li>\r\n            <li><strong>Glare Reduction:</strong> 1 point for external shading and blinds</li>\r\n            <li><strong>High Frequency Ballasts:</strong> 1 point for flicker-free lighting</li>\r\n            <li><strong>Internal Noise:</strong> Up to 2 points for acoustic design</li>\r\n            <li><strong>Volatile Organics:</strong> Up to 5 points for low-emission materials</li>\r\n            <li><strong>Thermal Comfort:</strong> 1 point for individual comfort control</li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const quickStart = [\r\n    \"Select appropriate Green Star rating tool (Design & As Built, etc.)\",\r\n    \"Configure building type and establish baseline performance\",\r\n    \"Input energy performance data and calculate GHG reduction\",\r\n    \"Design water-efficient systems and native landscaping\",  \r\n    \"Specify sustainable materials with appropriate certifications\",\r\n    \"Plan indoor environment quality features for occupant wellbeing\",\r\n    \"Calculate total points and determine star rating (4-6 stars)\"\r\n  ];\r\n\r\n  const commonErrors = [\r\n    \"Using inappropriate rating tool for building type or project stage\",\r\n    \"Not accounting for Australian climate conditions in modeling\",\r\n    \"Missing material certification documentation\",\r\n    \"Inadequate daylight modeling affecting IEQ credits\",\r\n    \"Poor coordination between energy and water efficiency strategies\",\r\n    \"Insufficient commissioning planning for building systems\"\r\n  ];\r\n\r\n  return (\r\n    <CalculatorHelpModal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      title=\"Green Star Calculator\"\r\n      purpose=\"Calculate Green Building Council Australia points across all categories to achieve 4, 5, or 6 Green Star certification recognizing environmental excellence.\"\r\n      nccRelevance=\"BUILDS UPON NCC requirements. Green Star 4-star minimum aligns with NCC 2025 objectives, while 5-6 stars demonstrate leadership in sustainable building performance.\"\r\n      sections={sections}\r\n      quickStart={quickStart}\r\n      commonErrors={commonErrors}\r\n    />\r\n  );\r\n};","import React, { useState, useMemo } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { CheckCircle, AlertCircle, Info, Target, Search, Zap, BookOpen, Star, Clock } from 'lucide-react';\r\n\r\ninterface HelpSection {\r\n  title: string;\r\n  content: React.ReactNode;\r\n  icon?: React.ReactNode;\r\n  priority?: 'high' | 'medium' | 'low';\r\n  isCompliance?: boolean;\r\n  estimatedTime?: string;\r\n}\r\n\r\ninterface QuickAction {\r\n  title: string;\r\n  description: string;\r\n  icon: React.ReactNode;\r\n  action: () => void;\r\n  category: string;\r\n}\r\n\r\ninterface EnhancedCalculatorHelpModalProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  title: string;\r\n  purpose: string;\r\n  nccRelevance: string;\r\n  sections: HelpSection[];\r\n  quickStart?: string[];\r\n  commonErrors?: string[];\r\n  quickActions?: QuickAction[];\r\n  completionRate?: number;\r\n}\r\n\r\nexport const EnhancedCalculatorHelpModal: React.FC<EnhancedCalculatorHelpModalProps> = ({\r\n  open,\r\n  onOpenChange,\r\n  title,\r\n  purpose,\r\n  nccRelevance,\r\n  sections,\r\n  quickStart = [],\r\n  commonErrors = [],\r\n  quickActions = [],\r\n  completionRate = 0\r\n}) => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\r\n\r\n  const filteredSections = useMemo(() => {\r\n    if (!searchQuery) return sections;\r\n    return sections.filter(section => \r\n      section.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      section.content?.toString().toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n  }, [sections, searchQuery]);\r\n\r\n  const priorityColor = (priority?: string) => {\r\n    switch (priority) {\r\n      case 'high': return 'destructive';\r\n      case 'medium': return 'warning';\r\n      case 'low': return 'secondary';\r\n      default: return 'outline';\r\n    }\r\n  };\r\n\r\n  const categories = useMemo(() => {\r\n    const cats = new Set(quickActions.map(action => action.category));\r\n    return ['all', ...Array.from(cats)];\r\n  }, [quickActions]);\r\n\r\n  const filteredQuickActions = selectedCategory === 'all' \r\n    ? quickActions \r\n    : quickActions.filter(action => action.category === selectedCategory);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-5xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2 text-xl\">\r\n            <Target className=\"h-6 w-6 text-primary\" />\r\n            {title} - Enhanced Guide\r\n          </DialogTitle>\r\n          {completionRate > 0 && (\r\n            <div className=\"mt-2\">\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-1\">\r\n                <Clock className=\"h-4 w-4\" />\r\n                Progress: {completionRate}% Complete\r\n              </div>\r\n              <Progress value={completionRate} className=\"h-2\" />\r\n            </div>\r\n          )}\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Enhanced Search */}\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n              placeholder=\"Search help content...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"pl-10\"\r\n            />\r\n          </div>\r\n\r\n          {/* Purpose & NCC Relevance Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Card className=\"border-primary/20 bg-gradient-to-br from-blue-50/50 to-indigo-50/50 dark:from-blue-950/20 dark:to-indigo-950/20\">\r\n              <CardHeader className=\"pb-3\">\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                  <Info className=\"h-4 w-4 text-blue-600\" />\r\n                  Purpose & Overview\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <p className=\"text-sm text-muted-foreground\">{purpose}</p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card className=\"border-green-200 dark:border-green-800 bg-gradient-to-br from-green-50/50 to-emerald-50/50 dark:from-green-950/20 dark:to-emerald-950/20\">\r\n              <CardHeader className=\"pb-3\">\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                  <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n                  NCC Compliance Status\r\n                  <Badge variant=\"destructive\" className=\"text-xs animate-pulse\">\r\n                    <Star className=\"h-3 w-3 mr-1\" />\r\n                    MANDATORY\r\n                  </Badge>\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <p className=\"text-sm text-muted-foreground\">{nccRelevance}</p>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Quick Actions */}\r\n          {quickActions.length > 0 && (\r\n            <Card className=\"bg-gradient-to-r from-purple-50/50 to-pink-50/50 dark:from-purple-950/20 dark:to-pink-950/20\">\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                  <Zap className=\"h-4 w-4 text-purple-600\" />\r\n                  Quick Setup Actions\r\n                </CardTitle>\r\n                <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                  {categories.map(category => (\r\n                    <Button\r\n                      key={category}\r\n                      variant={selectedCategory === category ? \"default\" : \"outline\"}\r\n                      size=\"sm\"\r\n                      onClick={() => setSelectedCategory(category)}\r\n                      className=\"text-xs\"\r\n                    >\r\n                      {category.charAt(0).toUpperCase() + category.slice(1)}\r\n                    </Button>\r\n                  ))}\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n                  {filteredQuickActions.map((action, index) => (\r\n                    <Card key={index} className=\"p-3 hover:shadow-md transition-shadow cursor-pointer\" onClick={action.action}>\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <div className=\"flex-shrink-0 p-2 rounded-lg bg-primary/10\">\r\n                          {action.icon}\r\n                        </div>\r\n                        <div>\r\n                          <h4 className=\"font-medium text-sm\">{action.title}</h4>\r\n                          <p className=\"text-xs text-muted-foreground mt-1\">{action.description}</p>\r\n                        </div>\r\n                      </div>\r\n                    </Card>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          {/* Enhanced Quick Start */}\r\n          {quickStart.length > 0 && (\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                  <BookOpen className=\"h-4 w-4 text-indigo-600\" />\r\n                  Step-by-Step Quick Start\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ol className=\"space-y-3\">\r\n                  {quickStart.map((step, index) => (\r\n                    <li key={index} className=\"flex items-start gap-3 p-3 rounded-lg bg-gradient-to-r from-slate-50/50 to-gray-50/50 dark:from-slate-950/20 dark:to-gray-950/20\">\r\n                      <span className=\"flex-shrink-0 w-7 h-7 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium shadow-sm\">\r\n                        {index + 1}\r\n                      </span>\r\n                      <div className=\"flex-1\">\r\n                        <span className=\"text-sm font-medium\">{step}</span>\r\n                        <div className=\"mt-1 text-xs text-muted-foreground\">\r\n                          Step {index + 1} of {quickStart.length}\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ol>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          <Separator />\r\n\r\n          {/* Enhanced Detailed Sections */}\r\n          <div className=\"space-y-4\">\r\n            {filteredSections.map((section, index) => (\r\n              <Card key={index} className={section.isCompliance ? \"border-l-4 border-l-green-500\" : \"\"}>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                    {section.icon}\r\n                    {section.title}\r\n                    {section.priority && (\r\n                      <Badge variant={priorityColor(section.priority)} className=\"text-xs\">\r\n                        {section.priority.toUpperCase()}\r\n                      </Badge>\r\n                    )}\r\n                    {section.isCompliance && (\r\n                      <Badge variant=\"success\" className=\"text-xs\">\r\n                        <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                        NCC Required\r\n                      </Badge>\r\n                    )}\r\n                    {section.estimatedTime && (\r\n                      <Badge variant=\"outline\" className=\"text-xs\">\r\n                        <Clock className=\"h-3 w-3 mr-1\" />\r\n                        {section.estimatedTime}\r\n                      </Badge>\r\n                    )}\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  {section.content}\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Enhanced Common Errors */}\r\n          {commonErrors.length > 0 && (\r\n            <Card className=\"border-amber-200 dark:border-amber-800 bg-gradient-to-br from-amber-50/50 to-orange-50/50 dark:from-amber-950/20 dark:to-orange-950/20\">\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                  <AlertCircle className=\"h-4 w-4 text-amber-600\" />\r\n                  Critical Errors to Avoid\r\n                  <Badge variant=\"warning\" className=\"text-xs animate-pulse\">\r\n                    HIGH IMPACT\r\n                  </Badge>\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ul className=\"space-y-3\">\r\n                  {commonErrors.map((error, index) => (\r\n                    <li key={index} className=\"flex items-start gap-3 p-3 rounded-lg bg-white/50 dark:bg-slate-900/20\">\r\n                      <span className=\"flex-shrink-0 w-2 h-2 bg-amber-600 rounded-full mt-2\" />\r\n                      <div>\r\n                        <span className=\"text-sm font-medium text-foreground\">{error}</span>\r\n                        <div className=\"mt-1 text-xs text-amber-700 dark:text-amber-400\">\r\n                          ⚠️ This error can cause compliance failures\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};","import React from 'react';\r\nimport { EnhancedCalculatorHelpModal } from '../EnhancedCalculatorHelpModal';\r\nimport { Building, Thermometer, Zap, Calculator, Home, Building2, Factory, Lightbulb, Settings, Gauge } from 'lucide-react';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { toast } from '@/hooks/use-toast';\r\n\r\ninterface EnhancedNCCGuideProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const EnhancedNCCGuide: React.FC<EnhancedNCCGuideProps> = ({ open, onOpenChange }) => {\r\n  const sections = [\r\n    {\r\n      title: 'Step 1: Building Information',\r\n      icon: <Building className=\"h-4 w-4 text-blue-600\" />,\r\n      priority: 'high' as const,\r\n      isCompliance: true,\r\n      estimatedTime: '2-3 min',\r\n      content: (\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm\">Enter basic building details that affect energy performance:</p>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"p-3 border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Building2 className=\"h-4 w-4\" />\r\n                Building Type\r\n                <Badge variant=\"destructive\" className=\"text-xs\">Required</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">Residential, Commercial, or Mixed-use - directly affects NCC energy requirements and calculation methods</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-green-500 bg-green-50/50 dark:bg-green-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Gauge className=\"h-4 w-4\" />\r\n                Floor Area (m²)\r\n                <Badge variant=\"destructive\" className=\"text-xs\">Required</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">Total conditioned floor area - critical for energy intensity calculations per Section J</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-purple-500 bg-purple-50/50 dark:bg-purple-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2\">Number of Floors</div>\r\n              <p className=\"text-xs text-muted-foreground\">Above and below ground levels - impacts heat loss calculations and compliance thresholds</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-orange-500 bg-orange-50/50 dark:bg-orange-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                Climate Zone\r\n                <Badge variant=\"success\" className=\"text-xs\">Auto-detected</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">Australian climate zone 1-8 - determines specific energy targets and compliance benchmarks</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-4 p-4 bg-gradient-to-r from-blue-100/80 to-indigo-100/80 dark:from-blue-950/40 dark:to-indigo-950/40 rounded-lg\">\r\n            <p className=\"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2\">💡 Pro Tip: Climate Zone Impact</p>\r\n            <p className=\"text-xs text-blue-800 dark:text-blue-200\">\r\n              Different climate zones have varying energy performance requirements. Zone 8 (alpine) has 40% stricter thermal requirements than Zone 1 (tropical).\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 2: Thermal Performance',\r\n      icon: <Thermometer className=\"h-4 w-4 text-red-600\" />,\r\n      priority: 'high' as const,\r\n      isCompliance: true,\r\n      estimatedTime: '5-7 min',\r\n      content: (\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm\">Configure thermal envelope properties for Section J compliance:</p>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"p-4 border rounded-lg bg-gradient-to-br from-red-50/50 to-pink-50/50 dark:from-red-950/20 dark:to-pink-950/20\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Thermometer className=\"h-4 w-4 text-red-600\" />\r\n                Wall R-Value\r\n                <Badge variant=\"destructive\" className=\"text-xs\">Critical</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Thermal resistance of external walls</p>\r\n              <div className=\"text-xs bg-red-100 dark:bg-red-950/30 p-2 rounded\">\r\n                <strong>Climate Zone Minimums:</strong><br/>\r\n                Zone 1-3: R1.5 | Zone 4-5: R2.5 | Zone 6-8: R3.5\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 border rounded-lg bg-gradient-to-br from-blue-50/50 to-cyan-50/50 dark:from-blue-950/20 dark:to-cyan-950/20\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Building className=\"h-4 w-4 text-blue-600\" />\r\n                Roof R-Value\r\n                <Badge variant=\"destructive\" className=\"text-xs\">Critical</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Insulation performance of roof/ceiling</p>\r\n              <div className=\"text-xs bg-blue-100 dark:bg-blue-950/30 p-2 rounded\">\r\n                <strong>Minimum Requirements:</strong><br/>\r\n                Residential: R3.5-R6.0 | Commercial: R2.5-R5.0\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-4 p-4 bg-gradient-to-r from-amber-100/80 to-yellow-100/80 dark:from-amber-950/40 dark:to-yellow-950/40 rounded-lg border-l-4 border-l-amber-500\">\r\n            <p className=\"text-sm font-medium text-amber-900 dark:text-amber-100 mb-2\">⚠️ NCC 2025 Enhanced Requirements</p>\r\n            <p className=\"text-xs text-amber-800 dark:text-amber-200\">\r\n              New thermal performance standards are 20% stricter than NCC 2019. Ensure your R-values meet the updated minimums for your climate zone.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 3: Energy Systems',\r\n      icon: <Zap className=\"h-4 w-4 text-green-600\" />,\r\n      priority: 'medium' as const,\r\n      isCompliance: true,\r\n      estimatedTime: '4-6 min',\r\n      content: (\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm\">Define HVAC and energy systems for accurate modeling:</p>\r\n          <div className=\"space-y-3\">\r\n            <div className=\"p-3 border-l-4 border-l-green-500 bg-green-50/50 dark:bg-green-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-1 flex items-center gap-2\">\r\n                <Settings className=\"h-4 w-4\" />\r\n                HVAC System Selection\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">Heat pump systems can improve compliance by 25-40% compared to electric resistance heating</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-1\">System Efficiency Ratings</div>\r\n              <p className=\"text-xs text-muted-foreground\">COP (heating) and EER (cooling) values directly impact energy compliance scores</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-purple-500 bg-purple-50/50 dark:bg-purple-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-1 flex items-center gap-2\">\r\n                <Lightbulb className=\"h-4 w-4\" />\r\n                Renewable Energy Integration\r\n                <Badge variant=\"success\" className=\"text-xs\">Bonus Points</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">Solar PV systems can offset up to 100% of building energy consumption for compliance</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 4: Verification & Compliance',\r\n      icon: <Calculator className=\"h-4 w-4 text-purple-600\" />,\r\n      priority: 'high' as const,\r\n      isCompliance: true,\r\n      estimatedTime: '2-3 min',\r\n      content: (\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm\">Review calculated results and ensure NCC compliance:</p>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"p-4 border rounded-lg bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20\">\r\n              <h4 className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Gauge className=\"h-4 w-4 text-green-600\" />\r\n                Energy Intensity Check\r\n              </h4>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Must meet Section J targets for building type and climate zone</p>\r\n              <div className=\"text-xs bg-green-100 dark:bg-green-950/30 p-2 rounded\">\r\n                <strong>Pass Criteria:</strong> ≤ Deemed-to-Satisfy limits\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 border rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20\">\r\n              <h4 className=\"font-medium text-sm mb-2\">Compliance Verification</h4>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Automated compliance checking against NCC 2025 requirements</p>\r\n              <div className=\"text-xs bg-blue-100 dark:bg-blue-950/30 p-2 rounded\">\r\n                <strong>Status:</strong> Real-time compliance monitoring\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const quickActions = [\r\n    {\r\n      title: 'Residential House',\r\n      description: 'Pre-fill typical single-family home values',\r\n      icon: <Home className=\"h-4 w-4 text-green-600\" />,\r\n      category: 'templates',\r\n      action: () => {\r\n        toast({\r\n          title: \"Template Applied\",\r\n          description: \"Residential house template loaded with typical values for quick start.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Commercial Office',\r\n      description: 'Set up standard office building parameters',\r\n      icon: <Building2 className=\"h-4 w-4 text-blue-600\" />,\r\n      category: 'templates',\r\n      action: () => {\r\n        toast({\r\n          title: \"Template Applied\",\r\n          description: \"Commercial office template loaded with industry standard values.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Industrial Facility',\r\n      description: 'Configure for manufacturing or warehouse',\r\n      icon: <Factory className=\"h-4 w-4 text-purple-600\" />,\r\n      category: 'templates',\r\n      action: () => {\r\n        toast({\r\n          title: \"Template Applied\",\r\n          description: \"Industrial facility template configured for heavy energy use.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Check Climate Zone',\r\n      description: 'Auto-detect based on location',\r\n      icon: <Gauge className=\"h-4 w-4 text-orange-600\" />,\r\n      category: 'tools',\r\n      action: () => {\r\n        toast({\r\n          title: \"Climate Zone Detected\",\r\n          description: \"Climate zone 4 detected for your location.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Calculate R-Values',\r\n      description: 'Get minimum requirements for your zone',\r\n      icon: <Calculator className=\"h-4 w-4 text-red-600\" />,\r\n      category: 'tools',\r\n      action: () => {\r\n        toast({\r\n          title: \"R-Values Calculated\",\r\n          description: \"Minimum R-values calculated based on your climate zone and building type.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Energy System Guide',\r\n      description: 'Choose optimal HVAC for compliance',\r\n      icon: <Zap className=\"h-4 w-4 text-green-600\" />,\r\n      category: 'guidance',\r\n      action: () => {\r\n        toast({\r\n          title: \"System Guide Opened\",\r\n          description: \"HVAC selection guide opened with efficiency recommendations.\",\r\n        });\r\n      }\r\n    }\r\n  ];\r\n\r\n  const quickStart = [\r\n    \"Select building type from templates or enter custom details\",\r\n    \"Enter total conditioned floor area in square meters\",\r\n    \"Auto-detect or manually select Australian climate zone (1-8)\",\r\n    \"Input thermal performance values from building design specifications\",\r\n    \"Configure HVAC system type and efficiency ratings (COP/EER)\",\r\n    \"Add renewable energy capacity if solar PV or other systems installed\",\r\n    \"Review compliance status and click Calculate for detailed NCC report\",\r\n    \"Export results for building permit applications and documentation\"\r\n  ];\r\n\r\n  const commonErrors = [\r\n    \"Using incorrect climate zone - verify against official BCA climate zone maps\",\r\n    \"Confusing R-values with U-values (Remember: R-value = 1/U-value)\",\r\n    \"Not accounting for thermal bridging in wall and roof assemblies\",\r\n    \"Measuring gross floor area instead of conditioned space only\",\r\n    \"Missing renewable energy system contribution in energy balance calculations\",\r\n    \"Using outdated NCC 2019 thermal performance values instead of NCC 2025 requirements\"\r\n  ];\r\n\r\n  return (\r\n    <EnhancedCalculatorHelpModal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      title=\"NCC Calculator\"\r\n      purpose=\"Calculate building energy performance to demonstrate compliance with National Construction Code Section J energy efficiency requirements using the latest NCC 2025 standards.\"\r\n      nccRelevance=\"MANDATORY for all new buildings and major renovations. Section J requires buildings to meet minimum energy performance standards based on climate zone and building class. Non-compliance can result in permit delays and costly redesign.\"\r\n      sections={sections}\r\n      quickStart={quickStart}\r\n      commonErrors={commonErrors}\r\n      quickActions={quickActions}\r\n      completionRate={25}\r\n    />\r\n  );\r\n};","import React from 'react';\r\nimport { EnhancedCalculatorHelpModal } from '../EnhancedCalculatorHelpModal';\r\nimport { Star, TrendingUp, Activity, Award, FileText, Calendar, CheckCircle, Building, Zap } from 'lucide-react';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { toast } from '@/hooks/use-toast';\r\n\r\ninterface EnhancedNABERSGuideProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport const EnhancedNABERSGuide: React.FC<EnhancedNABERSGuideProps> = ({ open, onOpenChange }) => {\r\n  const sections = [\r\n    {\r\n      title: 'Step 1: Energy Data Collection',\r\n      icon: <Activity className=\"h-4 w-4 text-blue-600\" />,\r\n      priority: 'high' as const,\r\n      isCompliance: true,\r\n      estimatedTime: '10-15 min',\r\n      content: (\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm\">Gather 12 months of actual energy consumption data for accurate NABERS assessment:</p>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"p-4 border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Zap className=\"h-4 w-4\" />\r\n                Electricity Bills\r\n                <Badge variant=\"destructive\" className=\"text-xs\">Required</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Monthly kWh consumption for base building services only</p>\r\n              <div className=\"text-xs bg-blue-100 dark:bg-blue-950/30 p-2 rounded\">\r\n                <strong>Exclude:</strong> Tenant consumption, IT equipment, commercial kitchens\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 border-l-4 border-l-green-500 bg-green-50/50 dark:bg-green-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Activity className=\"h-4 w-4\" />\r\n                Gas Bills (if applicable)\r\n                <Badge variant=\"outline\" className=\"text-xs\">Optional</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Monthly MJ consumption for heating/hot water</p>\r\n              <div className=\"text-xs bg-green-100 dark:bg-green-950/30 p-2 rounded\">\r\n                <strong>Include:</strong> Base building HVAC and hot water systems only\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 border-l-4 border-l-purple-500 bg-purple-50/50 dark:bg-purple-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Star className=\"h-4 w-4\" />\r\n                Green Power Certificates\r\n                <Badge variant=\"success\" className=\"text-xs\">Bonus</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Percentage of renewable energy purchased</p>\r\n              <div className=\"text-xs bg-purple-100 dark:bg-purple-950/30 p-2 rounded\">\r\n                <strong>Impact:</strong> Can improve rating by 0.5-1.0 stars\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 border-l-4 border-l-orange-500 bg-orange-50/50 dark:bg-orange-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2\">On-site Generation</div>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Solar PV or other renewable systems</p>\r\n              <div className=\"text-xs bg-orange-100 dark:bg-orange-950/30 p-2 rounded\">\r\n                <strong>Note:</strong> Must have 12 months of generation data\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-4 p-4 bg-gradient-to-r from-amber-100/80 to-yellow-100/80 dark:from-amber-950/40 dark:to-yellow-950/40 rounded-lg border-l-4 border-l-amber-500\">\r\n            <p className=\"text-sm font-medium text-amber-900 dark:text-amber-100 mb-2\">⚠️ Critical: Actual Data Required</p>\r\n            <p className=\"text-xs text-amber-800 dark:text-amber-200\">\r\n              NABERS requires 12 months of actual consumption data - design estimates or projections are not acceptable for certification.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 2: Building Profile Setup',\r\n      icon: <Building className=\"h-4 w-4 text-green-600\" />,\r\n      priority: 'high' as const,\r\n      isCompliance: true,\r\n      estimatedTime: '5-8 min',\r\n      content: (\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm\">Configure building characteristics for accurate NABERS rating calculation:</p>\r\n          <div className=\"space-y-3\">\r\n            <div className=\"p-3 border-l-4 border-l-green-500 bg-green-50/50 dark:bg-green-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Building className=\"h-4 w-4\" />\r\n                Net Lettable Area (NLA)\r\n                <Badge variant=\"destructive\" className=\"text-xs\">Critical</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">Tenanted area in m² excluding common areas, plant rooms, and circulation spaces</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2\">Building Type Classification</div>\r\n              <p className=\"text-xs text-muted-foreground\">Office, Shopping Centre, Hotel, Data Centre - affects benchmark comparison</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-purple-500 bg-purple-50/50 dark:bg-purple-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-2\">Operating Hours Profile</div>\r\n              <p className=\"text-xs text-muted-foreground\">Standard weekly operating hours impact energy intensity normalization</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 3: Star Rating Calculation',\r\n      icon: <TrendingUp className=\"h-4 w-4 text-purple-600\" />,\r\n      priority: 'medium' as const,\r\n      isCompliance: true,\r\n      estimatedTime: '3-5 min',\r\n      content: (\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm\">Understanding your NABERS Energy rating methodology:</p>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div className=\"p-4 border rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20\">\r\n              <h4 className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Activity className=\"h-4 w-4 text-blue-600\" />\r\n                Energy Intensity\r\n              </h4>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">MJ/m²/year calculated from 12-month consumption</p>\r\n              <div className=\"text-xs bg-blue-100 dark:bg-blue-950/30 p-2 rounded\">\r\n                Lower = Better performance\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 border rounded-lg bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20\">\r\n              <h4 className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <TrendingUp className=\"h-4 w-4 text-purple-600\" />\r\n                Benchmark Comparison\r\n              </h4>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">Compared against similar buildings in database</p>\r\n              <div className=\"text-xs bg-purple-100 dark:bg-purple-950/30 p-2 rounded\">\r\n                Climate adjusted automatically\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 border rounded-lg bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20\">\r\n              <h4 className=\"font-medium text-sm mb-2 flex items-center gap-2\">\r\n                <Star className=\"h-4 w-4 text-yellow-600\" />\r\n                Star Rating\r\n              </h4>\r\n              <p className=\"text-xs text-muted-foreground mb-2\">1-6 stars based on percentile ranking</p>\r\n              <div className=\"text-xs bg-yellow-100 dark:bg-yellow-950/30 p-2 rounded\">\r\n                6 stars = Top 25% performers\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-4 p-4 bg-gradient-to-r from-green-100/80 to-emerald-100/80 dark:from-green-950/40 dark:to-emerald-950/40 rounded-lg border-l-4 border-l-green-500\">\r\n            <p className=\"text-sm font-medium text-green-900 dark:text-green-100 mb-2\">✅ NCC 2025 Compliance Requirement</p>\r\n            <p className=\"text-xs text-green-800 dark:text-green-200\">\r\n              Commercial buildings over 1000m² must achieve minimum 3.5 star NABERS Energy rating for building permit approval.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: 'Step 4: Certification Process',\r\n      icon: <Award className=\"h-4 w-4 text-red-600\" />,\r\n      priority: 'medium' as const,\r\n      isCompliance: false,\r\n      estimatedTime: 'External process',\r\n      content: (\r\n        <div className=\"space-y-4\">\r\n          <p className=\"text-sm\">Complete NABERS certification requirements for official rating:</p>\r\n          <div className=\"space-y-3\">\r\n            <div className=\"p-3 border-l-4 border-l-red-500 bg-red-50/50 dark:bg-red-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-1 flex items-center gap-2\">\r\n                <Award className=\"h-4 w-4\" />\r\n                Accredited Assessor\r\n                <Badge variant=\"destructive\" className=\"text-xs\">Mandatory</Badge>\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">Independent third-party verification required for official NABERS rating</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-orange-500 bg-orange-50/50 dark:bg-orange-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-1\">Data Verification Process</div>\r\n              <p className=\"text-xs text-muted-foreground\">Energy bills and building details verified independently by assessor</p>\r\n            </div>\r\n            <div className=\"p-3 border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20 rounded-r-lg\">\r\n              <div className=\"font-medium text-sm mb-1\">Physical Site Inspection</div>\r\n              <p className=\"text-xs text-muted-foreground\">On-site verification of building systems and boundary conditions</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const quickActions = [\r\n    {\r\n      title: 'Office Building',\r\n      description: 'Standard commercial office setup',\r\n      icon: <Building className=\"h-4 w-4 text-blue-600\" />,\r\n      category: 'templates',\r\n      action: () => {\r\n        toast({\r\n          title: \"Office Template Applied\",\r\n          description: \"Standard office building parameters loaded for NABERS assessment.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Shopping Centre',\r\n      description: 'Retail/shopping centre configuration',\r\n      icon: <Building className=\"h-4 w-4 text-green-600\" />,\r\n      category: 'templates',\r\n      action: () => {\r\n        toast({\r\n          title: \"Retail Template Applied\",\r\n          description: \"Shopping centre template with typical energy patterns loaded.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Hotel/Accommodation',\r\n      description: 'Hotel and accommodation setup',\r\n      icon: <Building className=\"h-4 w-4 text-purple-600\" />,\r\n      category: 'templates',\r\n      action: () => {\r\n        toast({\r\n          title: \"Hotel Template Applied\",\r\n          description: \"Accommodation facility template with 24/7 operations loaded.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Upload Energy Bills',\r\n      description: 'Import 12 months of utility data',\r\n      icon: <FileText className=\"h-4 w-4 text-orange-600\" />,\r\n      category: 'tools',\r\n      action: () => {\r\n        toast({\r\n          title: \"File Upload Ready\",\r\n          description: \"Ready to import electricity and gas bills for analysis.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Check NLA Calculator',\r\n      description: 'Calculate Net Lettable Area correctly',\r\n      icon: <Activity className=\"h-4 w-4 text-green-600\" />,\r\n      category: 'tools',\r\n      action: () => {\r\n        toast({\r\n          title: \"NLA Calculator Opened\",\r\n          description: \"Net Lettable Area calculation tool opened with NABERS guidelines.\",\r\n        });\r\n      }\r\n    },\r\n    {\r\n      title: 'Find Assessor',\r\n      description: 'Locate accredited NABERS assessor',\r\n      icon: <CheckCircle className=\"h-4 w-4 text-red-600\" />,\r\n      category: 'certification',\r\n      action: () => {\r\n        toast({\r\n          title: \"Assessor Directory\",\r\n          description: \"Opening NABERS accredited assessor directory for your location.\",\r\n        });\r\n      }\r\n    }\r\n  ];\r\n\r\n  const quickStart = [\r\n    \"Collect 12 months of electricity bills (and gas if applicable)\",\r\n    \"Measure or obtain accurate Net Lettable Area (NLA) in square meters\",\r\n    \"Select correct building type from NABERS categories\",\r\n    \"Enter monthly energy consumption data systematically\",\r\n    \"Configure building operating hours and special equipment loads\",\r\n    \"Add green power purchases and on-site renewable generation\",\r\n    \"Review calculated energy intensity and preliminary star rating\",\r\n    \"Export results for accredited assessor verification and certification\"\r\n  ];\r\n\r\n  const commonErrors = [\r\n    \"Using Gross Floor Area (GFA) instead of Net Lettable Area (NLA) - can cause 20-30% error\",\r\n    \"Including tenant energy consumption in base building assessment\",\r\n    \"Using incomplete or mixed billing periods instead of full 12-month cycle\",\r\n    \"Incorrect climate zone selection affecting benchmark comparisons\",\r\n    \"Not accounting for green power purchases in renewable energy calculations\",\r\n    \"Missing on-site renewable energy generation data or incorrect metering\",\r\n    \"Incorrect building type classification leading to wrong benchmark comparison\"\r\n  ];\r\n\r\n  return (\r\n    <EnhancedCalculatorHelpModal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      title=\"NABERS Calculator\"\r\n      purpose=\"Calculate NABERS Energy rating based on actual building energy consumption data and compare against national benchmarks for building performance certification.\"\r\n      nccRelevance=\"REQUIRED for NCC 2025 compliance. Commercial buildings over 1000m² must achieve minimum 3.5 star NABERS Energy rating or demonstrate equivalent performance through alternative assessment methods.\"\r\n      sections={sections}\r\n      quickStart={quickStart}\r\n      commonErrors={commonErrors}\r\n      quickActions={quickActions}\r\n      completionRate={35}\r\n    />\r\n  );\r\n};","import React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell, LineChart, Line } from 'recharts';\r\nimport { TrendingUp, TrendingDown, Activity, Target } from 'lucide-react';\r\n\r\ninterface RealTimeMetricsProps {\r\n  calculatorData: any;\r\n  totalEmissions: number;\r\n}\r\n\r\nexport const RealTimeMetrics: React.FC<RealTimeMetricsProps> = ({ calculatorData, totalEmissions }) => {\r\n  const emissionsData = [\r\n    { name: 'NCC', value: calculatorData.ncc?.totalEmissions || 0, color: '#ef4444' },\r\n    { name: 'NABERS', value: calculatorData.nabers?.totalEmissions || 0, color: '#f97316' },\r\n    { name: 'LCA', value: calculatorData.lca?.totalLCA || 0, color: '#eab308' },\r\n    { name: 'Scope', value: calculatorData.scope?.totalEmissions || 0, color: '#22c55e' }\r\n  ].filter(item => item.value > 0);\r\n\r\n  const complianceData = [\r\n    { \r\n      name: 'NCC', \r\n      score: calculatorData.ncc?.isCompliant ? 100 : 0,\r\n      target: 80 \r\n    },\r\n    { \r\n      name: 'NABERS', \r\n      score: calculatorData.nabers?.overallRating ? calculatorData.nabers.overallRating * 16.67 : 0,\r\n      target: 66.67 \r\n    },\r\n    { \r\n      name: 'LEED', \r\n      score: calculatorData.leed?.totalPoints ? (calculatorData.leed.totalPoints / 110) * 100 : 0,\r\n      target: 36.36 \r\n    },\r\n    { \r\n      name: 'BREEAM', \r\n      score: calculatorData.breeam?.totalScore || 0,\r\n      target: 55 \r\n    }\r\n  ];\r\n\r\n  const trendData = [\r\n    { month: 'Jan', emissions: 450 },\r\n    { month: 'Feb', emissions: 380 },\r\n    { month: 'Mar', emissions: 420 },\r\n    { month: 'Apr', emissions: totalEmissions / 1000 || 0 },\r\n  ];\r\n\r\n  const calculateReduction = () => {\r\n    const baseline = 500; // Example baseline\r\n    const current = totalEmissions / 1000;\r\n    return baseline > 0 ? ((baseline - current) / baseline * 100).toFixed(1) : 0;\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n      {/* Emissions Breakdown Chart */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Activity className=\"h-5 w-5\" />\r\n            Emissions Breakdown\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"h-64\">\r\n            {emissionsData.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <PieChart>\r\n                  <Pie\r\n                    data={emissionsData}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    innerRadius={60}\r\n                    outerRadius={100}\r\n                    paddingAngle={5}\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {emissionsData.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={entry.color} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip formatter={(value: number) => [`${(value / 1000).toFixed(1)} t CO₂-e`, 'Emissions']} />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <div className=\"flex items-center justify-center h-full text-muted-foreground\">\r\n                No emissions data available\r\n              </div>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Compliance Scores */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Target className=\"h-5 w-5\" />\r\n            Compliance Performance\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"h-64\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={complianceData}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis domain={[0, 100]} />\r\n                <Tooltip formatter={(value: number) => [`${value.toFixed(1)}%`, 'Score']} />\r\n                <Bar dataKey=\"score\" fill=\"hsl(var(--primary))\" radius={[4, 4, 0, 0]} />\r\n                <Bar dataKey=\"target\" fill=\"hsl(var(--muted))\" radius={[4, 4, 0, 0]} />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Emissions Trend */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <TrendingDown className=\"h-5 w-5 text-green-600\" />\r\n            Emissions Trend\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"h-64\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <LineChart data={trendData}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"month\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(value: number) => [`${value} t CO₂-e`, 'Emissions']} />\r\n                <Line \r\n                  type=\"monotone\" \r\n                  dataKey=\"emissions\" \r\n                  stroke=\"hsl(var(--primary))\" \r\n                  strokeWidth={3}\r\n                  dot={{ fill: 'hsl(var(--primary))', strokeWidth: 2, r: 4 }}\r\n                />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Performance Summary */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <TrendingUp className=\"h-5 w-5\" />\r\n            Performance Summary\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          <div className=\"flex justify-between items-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg\">\r\n            <div>\r\n              <div className=\"text-sm font-medium text-green-800 dark:text-green-300\">Carbon Reduction</div>\r\n              <div className=\"text-xs text-green-600 dark:text-green-400\">vs. baseline</div>\r\n            </div>\r\n            <div className=\"text-2xl font-bold text-green-700 dark:text-green-300\">\r\n              {calculateReduction()}%\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-between items-center p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\r\n            <div>\r\n              <div className=\"text-sm font-medium text-blue-800 dark:text-blue-300\">Standards Met</div>\r\n              <div className=\"text-xs text-blue-600 dark:text-blue-400\">out of active</div>\r\n            </div>\r\n            <div className=\"text-2xl font-bold text-blue-700 dark:text-blue-300\">\r\n              {complianceData.filter(item => item.score >= item.target).length}/{complianceData.length}\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg\">\r\n            <div>\r\n              <div className=\"text-sm font-medium text-purple-800 dark:text-purple-300\">Total Emissions</div>\r\n              <div className=\"text-xs text-purple-600 dark:text-purple-400\">current period</div>\r\n            </div>\r\n            <div className=\"text-2xl font-bold text-purple-700 dark:text-purple-300\">\r\n              {(totalEmissions / 1000).toFixed(1)}t\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};","\"use client\";\n\n// src/checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProviderImpl, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nfunction CheckboxProvider(props) {\n  const {\n    __scopeCheckbox,\n    checked: checkedProp,\n    children,\n    defaultChecked,\n    disabled,\n    form,\n    name,\n    onCheckedChange,\n    required,\n    value = \"on\",\n    // @ts-expect-error\n    internal_do_not_use_render\n  } = props;\n  const [checked, setChecked] = useControllableState({\n    prop: checkedProp,\n    defaultProp: defaultChecked ?? false,\n    onChange: onCheckedChange,\n    caller: CHECKBOX_NAME\n  });\n  const [control, setControl] = React.useState(null);\n  const [bubbleInput, setBubbleInput] = React.useState(null);\n  const hasConsumerStoppedPropagationRef = React.useRef(false);\n  const isFormControl = control ? !!form || !!control.closest(\"form\") : (\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    true\n  );\n  const context = {\n    checked,\n    disabled,\n    setChecked,\n    control,\n    setControl,\n    name,\n    form,\n    value,\n    hasConsumerStoppedPropagationRef,\n    required,\n    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,\n    isFormControl,\n    bubbleInput,\n    setBubbleInput\n  };\n  return /* @__PURE__ */ jsx(\n    CheckboxProviderImpl,\n    {\n      scope: __scopeCheckbox,\n      ...context,\n      children: isFunction(internal_do_not_use_render) ? internal_do_not_use_render(context) : children\n    }\n  );\n}\nvar TRIGGER_NAME = \"CheckboxTrigger\";\nvar CheckboxTrigger = React.forwardRef(\n  ({ __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }, forwardedRef) => {\n    const {\n      control,\n      value,\n      disabled,\n      checked,\n      required,\n      setControl,\n      setChecked,\n      hasConsumerStoppedPropagationRef,\n      isFormControl,\n      bubbleInput\n    } = useCheckboxContext(TRIGGER_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setControl);\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = control?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener(\"reset\", reset);\n        return () => form.removeEventListener(\"reset\", reset);\n      }\n    }, [control, setChecked]);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"checkbox\",\n        \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n        \"aria-required\": required,\n        \"data-state\": getState(checked),\n        \"data-disabled\": disabled ? \"\" : void 0,\n        disabled,\n        value,\n        ...checkboxProps,\n        ref: composedRefs,\n        onKeyDown: composeEventHandlers(onKeyDown, (event) => {\n          if (event.key === \"Enter\") event.preventDefault();\n        }),\n        onClick: composeEventHandlers(onClick, (event) => {\n          setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n          if (bubbleInput && isFormControl) {\n            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n          }\n        })\n      }\n    );\n  }\n);\nCheckboxTrigger.displayName = TRIGGER_NAME;\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      value,\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    return /* @__PURE__ */ jsx(\n      CheckboxProvider,\n      {\n        __scopeCheckbox,\n        checked,\n        defaultChecked,\n        disabled,\n        required,\n        onCheckedChange,\n        name,\n        form,\n        value,\n        internal_do_not_use_render: ({ isFormControl }) => /* @__PURE__ */ jsxs(Fragment, { children: [\n          /* @__PURE__ */ jsx(\n            CheckboxTrigger,\n            {\n              ...checkboxProps,\n              ref: forwardedRef,\n              __scopeCheckbox\n            }\n          ),\n          isFormControl && /* @__PURE__ */ jsx(\n            CheckboxBubbleInput,\n            {\n              __scopeCheckbox\n            }\n          )\n        ] })\n      }\n    );\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(\n      Presence,\n      {\n        present: forceMount || isIndeterminate(context.checked) || context.checked === true,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            \"data-state\": getState(context.checked),\n            \"data-disabled\": context.disabled ? \"\" : void 0,\n            ...indicatorProps,\n            ref: forwardedRef,\n            style: { pointerEvents: \"none\", ...props.style }\n          }\n        )\n      }\n    );\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"CheckboxBubbleInput\";\nvar CheckboxBubbleInput = React.forwardRef(\n  ({ __scopeCheckbox, ...props }, forwardedRef) => {\n    const {\n      control,\n      hasConsumerStoppedPropagationRef,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      name,\n      value,\n      form,\n      bubbleInput,\n      setBubbleInput\n    } = useCheckboxContext(BUBBLE_INPUT_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = bubbleInput;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      const bubbles = !hasConsumerStoppedPropagationRef.current;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        input.indeterminate = isIndeterminate(checked);\n        setChecked.call(input, isIndeterminate(checked) ? false : checked);\n        input.dispatchEvent(event);\n      }\n    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);\n    const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n        required,\n        disabled,\n        name,\n        value,\n        form,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0,\n          // We transform because the input is absolutely positioned but we have\n          // rendered it **after** the button. This pulls it back to sit on top\n          // of the button.\n          transform: \"translateX(-100%)\"\n        }\n      }\n    );\n  }\n);\nCheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIndicator as Indicator,\n  Checkbox as Root,\n  createCheckboxScope,\n  CheckboxBubbleInput as unstable_BubbleInput,\n  CheckboxBubbleInput as unstable_CheckboxBubbleInput,\n  CheckboxProvider as unstable_CheckboxProvider,\n  CheckboxTrigger as unstable_CheckboxTrigger,\n  CheckboxProvider as unstable_Provider,\n  CheckboxTrigger as unstable_Trigger\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n","import React, { useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Download, FileText, FileSpreadsheet, FileJson, Share2 } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface ExportManagerProps {\r\n  calculatorData: any;\r\n  totalEmissions: number;\r\n}\r\n\r\nexport const ExportManager: React.FC<ExportManagerProps> = ({ calculatorData, totalEmissions }) => {\r\n  const [selectedSections, setSelectedSections] = useState({\r\n    dashboard: true,\r\n    ncc: true,\r\n    nabers: true,\r\n    lca: true,\r\n    scope: true,\r\n    leed: true,\r\n    breeam: true,\r\n    greenstar: true\r\n  });\r\n  const [exportFormat, setExportFormat] = useState('pdf');\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  const handleSectionToggle = (section: string) => {\r\n    setSelectedSections(prev => ({\r\n      ...prev,\r\n      [section]: !prev[section]\r\n    }));\r\n  };\r\n\r\n  const generateExportData = () => {\r\n    const exportData: any = {\r\n      metadata: {\r\n        exportDate: new Date().toISOString(),\r\n        totalEmissions,\r\n        calculatorsUsed: Object.keys(selectedSections).filter(key => selectedSections[key])\r\n      }\r\n    };\r\n\r\n    if (selectedSections.dashboard) {\r\n      exportData.dashboard = {\r\n        totalEmissions,\r\n        complianceScore: calculateOverallCompliance(),\r\n        summary: \"Dashboard overview with key metrics\"\r\n      };\r\n    }\r\n\r\n    if (selectedSections.ncc && calculatorData.ncc) {\r\n      exportData.ncc = calculatorData.ncc;\r\n    }\r\n\r\n    if (selectedSections.nabers && calculatorData.nabers) {\r\n      exportData.nabers = calculatorData.nabers;\r\n    }\r\n\r\n    if (selectedSections.lca && calculatorData.lca) {\r\n      exportData.lca = calculatorData.lca;\r\n    }\r\n\r\n    if (selectedSections.scope && calculatorData.scope) {\r\n      exportData.scope = calculatorData.scope;\r\n    }\r\n\r\n    if (selectedSections.leed && calculatorData.leed) {\r\n      exportData.leed = calculatorData.leed;\r\n    }\r\n\r\n    if (selectedSections.breeam && calculatorData.breeam) {\r\n      exportData.breeam = calculatorData.breeam;\r\n    }\r\n\r\n    if (selectedSections.greenstar && calculatorData.greenStar) {\r\n      exportData.greenstar = calculatorData.greenStar;\r\n    }\r\n\r\n    return exportData;\r\n  };\r\n\r\n  const calculateOverallCompliance = () => {\r\n    let compliantCount = 0;\r\n    let totalCount = 0;\r\n    \r\n    if (calculatorData.ncc?.isCompliant !== undefined) {\r\n      totalCount++;\r\n      if (calculatorData.ncc.isCompliant) compliantCount++;\r\n    }\r\n    if (calculatorData.nabers?.overallRating) {\r\n      totalCount++;\r\n      if (calculatorData.nabers.overallRating >= 4) compliantCount++;\r\n    }\r\n    if (calculatorData.leed?.certificationLevel) {\r\n      totalCount++;\r\n      if (calculatorData.leed.certificationLevel !== 'Not Certified') compliantCount++;\r\n    }\r\n    if (calculatorData.breeam?.rating) {\r\n      totalCount++;\r\n      if (calculatorData.breeam.rating !== 'Unclassified') compliantCount++;\r\n    }\r\n    \r\n    return totalCount > 0 ? Math.round((compliantCount / totalCount) * 100) : 0;\r\n  };\r\n\r\n  const exportToCSV = (data: any) => {\r\n    const csvRows = [];\r\n    csvRows.push(['Section', 'Metric', 'Value', 'Unit']);\r\n    \r\n    // Dashboard data\r\n    if (data.dashboard) {\r\n      csvRows.push(['Dashboard', 'Total Emissions', data.dashboard.totalEmissions / 1000, 't CO₂-e']);\r\n      csvRows.push(['Dashboard', 'Compliance Score', data.dashboard.complianceScore, '%']);\r\n    }\r\n    \r\n    // Individual calculator data\r\n    Object.keys(data).forEach(section => {\r\n      if (section !== 'metadata' && section !== 'dashboard' && data[section]) {\r\n        const sectionData = data[section];\r\n        Object.keys(sectionData).forEach(key => {\r\n          if (typeof sectionData[key] === 'number') {\r\n            csvRows.push([section.toUpperCase(), key, sectionData[key], '']);\r\n          }\r\n        });\r\n      }\r\n    });\r\n    \r\n    const csvContent = csvRows.map(row => row.join(',')).join('\\n');\r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `carbon-calculator-export-${new Date().toISOString().split('T')[0]}.csv`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const exportToJSON = (data: any) => {\r\n    const jsonContent = JSON.stringify(data, null, 2);\r\n    const blob = new Blob([jsonContent], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `carbon-calculator-export-${new Date().toISOString().split('T')[0]}.json`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const exportToPDF = async (data: any) => {\r\n    try {\r\n      // Import jsPDF dynamically to avoid bundle size issues\r\n      const jsPDF = (await import('jspdf')).default;\r\n      const autoTable = (await import('jspdf-autotable')).default;\r\n      \r\n      const doc = new jsPDF();\r\n      \r\n      // Header with branding\r\n      doc.setFontSize(24);\r\n      doc.setTextColor(40, 116, 166);\r\n      doc.text('CarbonConstruct', 20, 20);\r\n      \r\n      doc.setFontSize(18);\r\n      doc.setTextColor(0, 0, 0);\r\n      doc.text('Carbon Footprint Assessment Report', 20, 35);\r\n      \r\n      // Summary section\r\n      doc.setFontSize(14);\r\n      doc.text(`Total Emissions: ${(data.metadata.totalEmissions / 1000).toFixed(2)} t CO₂-e`, 20, 55);\r\n      doc.text(`Compliance Score: ${calculateOverallCompliance()}%`, 20, 65);\r\n      doc.text(`Export Date: ${new Date(data.metadata.exportDate).toLocaleDateString()}`, 20, 75);\r\n      doc.text(`Calculators Used: ${data.metadata.calculatorsUsed.join(', ')}`, 20, 85);\r\n      \r\n      // Create detailed table data\r\n      const tableData: any[] = [];\r\n      Object.keys(data).forEach(section => {\r\n        if (section !== 'metadata' && data[section]) {\r\n          const sectionData = data[section];\r\n          Object.keys(sectionData).forEach(key => {\r\n            if (typeof sectionData[key] === 'number') {\r\n              tableData.push([\r\n                section.toUpperCase(), \r\n                key.replace(/([A-Z])/g, ' $1').trim(), \r\n                sectionData[key].toFixed(2), \r\n                key.includes('Emissions') ? 'kg CO₂-e' : ''\r\n              ]);\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n      // Add table with styling\r\n      (doc as any).autoTable({\r\n        startY: 100,\r\n        head: [['Calculator', 'Metric', 'Value', 'Unit']],\r\n        body: tableData,\r\n        theme: 'striped',\r\n        headStyles: { fillColor: [40, 116, 166] },\r\n        styles: { fontSize: 10 },\r\n        columnStyles: {\r\n          0: { cellWidth: 40 },\r\n          1: { cellWidth: 80 },\r\n          2: { cellWidth: 30 },\r\n          3: { cellWidth: 30 }\r\n        }\r\n      });\r\n      \r\n      // Footer\r\n      const pageCount = (doc as any).internal.getNumberOfPages();\r\n      for (let i = 1; i <= pageCount; i++) {\r\n        doc.setPage(i);\r\n        doc.setFontSize(10);\r\n        doc.setTextColor(128, 128, 128);\r\n        doc.text(`Generated by CarbonConstruct | Page ${i} of ${pageCount}`, 20, 280);\r\n        doc.text(new Date().toLocaleString(), 150, 280);\r\n      }\r\n      \r\n      doc.save(`carbon-footprint-report-${new Date().toISOString().split('T')[0]}.pdf`);\r\n    } catch (error) {\r\n      console.error('PDF generation error:', error);\r\n      toast({\r\n        title: \"PDF Export Error\",\r\n        description: \"Failed to generate PDF. Please try again or use CSV/JSON export.\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleExport = async () => {\r\n    setIsExporting(true);\r\n    \r\n    try {\r\n      const exportData = generateExportData();\r\n      \r\n      switch (exportFormat) {\r\n        case 'csv':\r\n          exportToCSV(exportData);\r\n          break;\r\n        case 'json':\r\n          exportToJSON(exportData);\r\n          break;\r\n        case 'pdf':\r\n          await exportToPDF(exportData);\r\n          break;\r\n        default:\r\n          throw new Error('Unsupported export format');\r\n      }\r\n      \r\n      toast({\r\n        title: \"Export Successful\",\r\n        description: `Data exported as ${exportFormat.toUpperCase()} format.`,\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Export Failed\",\r\n        description: \"There was an error exporting your data. Please try again.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  const shareData = async () => {\r\n    const exportData = generateExportData();\r\n    \r\n    if (navigator.share) {\r\n      try {\r\n        await navigator.share({\r\n          title: 'Carbon Calculator Results',\r\n          text: `Total Emissions: ${(totalEmissions / 1000).toFixed(1)} t CO₂-e`,\r\n          url: window.location.href\r\n        });\r\n      } catch (error) {\r\n        console.log('Error sharing:', error);\r\n      }\r\n    } else {\r\n      // Fallback to clipboard\r\n      await navigator.clipboard.writeText(JSON.stringify(exportData, null, 2));\r\n      toast({\r\n        title: \"Data Copied\",\r\n        description: \"Calculation results copied to clipboard.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Download className=\"h-5 w-5\" />\r\n          Export & Share Results\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Export Format Selection */}\r\n        <div className=\"space-y-2\">\r\n          <Label>Export Format</Label>\r\n          <Select value={exportFormat} onValueChange={setExportFormat}>\r\n            <SelectTrigger>\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"pdf\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FileText className=\"h-4 w-4\" />\r\n                  PDF Report\r\n                </div>\r\n              </SelectItem>\r\n              <SelectItem value=\"csv\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FileSpreadsheet className=\"h-4 w-4\" />\r\n                  CSV Data\r\n                </div>\r\n              </SelectItem>\r\n              <SelectItem value=\"json\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FileJson className=\"h-4 w-4\" />\r\n                  JSON Data\r\n                </div>\r\n              </SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        {/* Section Selection */}\r\n        <div className=\"space-y-3\">\r\n          <Label>Include Sections</Label>\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {Object.entries(selectedSections).map(([section, selected]) => (\r\n              <div key={section} className=\"flex items-center space-x-2\">\r\n                <Checkbox\r\n                  id={section}\r\n                  checked={selected}\r\n                  onCheckedChange={() => handleSectionToggle(section)}\r\n                />\r\n                <Label htmlFor={section} className=\"text-sm capitalize\">\r\n                  {section === 'greenstar' ? 'Green Star' : section}\r\n                </Label>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Export Actions */}\r\n        <div className=\"flex gap-3\">\r\n          <Button \r\n            onClick={handleExport} \r\n            disabled={isExporting}\r\n            className=\"flex-1\"\r\n          >\r\n            <Download className=\"h-4 w-4 mr-2\" />\r\n            {isExporting ? 'Exporting...' : `Export as ${exportFormat.toUpperCase()}`}\r\n          </Button>\r\n          \r\n          <Button \r\n            variant=\"outline\" \r\n            onClick={shareData}\r\n            className=\"flex items-center gap-2\"\r\n          >\r\n            <Share2 className=\"h-4 w-4\" />\r\n            Share\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Export Preview */}\r\n        <div className=\"bg-muted p-4 rounded-lg\">\r\n          <h4 className=\"font-medium mb-2\">Export Preview</h4>\r\n          <div className=\"text-sm text-muted-foreground space-y-1\">\r\n            <div>• Total Emissions: {(totalEmissions / 1000).toFixed(1)} t CO₂-e</div>\r\n            <div>• Compliance Score: {calculateOverallCompliance()}%</div>\r\n            <div>• Sections: {Object.values(selectedSections).filter(Boolean).length} selected</div>\r\n            <div>• Format: {exportFormat.toUpperCase()}</div>\r\n          </div>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","import React, { useState, useRef, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Brain, Send, Lightbulb, TrendingDown, Target, Zap, User, Bot, Loader2, AlertCircle, Wifi, WifiOff } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { supabase } from '@/integrations/supabase/client';\r\n\r\ninterface Message {\r\n  id: string;\r\n  role: 'user' | 'assistant';\r\n  content: string;\r\n  timestamp: Date;\r\n  type?: 'analysis' | 'recommendation' | 'chat';\r\n}\r\n\r\ninterface AIAssistantProps {\r\n  calculatorData: any;\r\n  totalEmissions: number;\r\n}\r\n\r\nexport const AIAssistant: React.FC<AIAssistantProps> = ({ calculatorData, totalEmissions }) => {\r\n  const [messages, setMessages] = useState<Message[]>([\r\n    {\r\n      id: '1',\r\n      role: 'assistant',\r\n      content: \"Hello! I'm Claude Sonnet 4, your AI carbon consultant. I can analyze your calculations, provide reduction strategies, and answer questions about sustainable construction practices. How can I help optimize your project's carbon footprint?\",\r\n      timestamp: new Date(),\r\n      type: 'chat'\r\n    }\r\n  ]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isConnected, setIsConnected] = useState(true);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const { toast } = useToast();\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const generateAIResponse = async (userMessage: string): Promise<string> => {\r\n    try {\r\n      setIsConnected(true);\r\n      \r\n      // Call the Claude AI edge function\r\n      const { data, error } = await supabase.functions.invoke('claude-ai-chat', {\r\n        body: {\r\n          message: userMessage,\r\n          conversationHistory: messages.slice(-6), // Send last 6 messages for context\r\n          calculatorData,\r\n          totalEmissions,\r\n          context: `User is working with CarbonConstruct calculator. Current project has ${(totalEmissions / 1000).toFixed(1)} t CO₂-e total emissions.`\r\n        }\r\n      });\r\n\r\n      if (error) {\r\n        console.error('Supabase function error:', error);\r\n        throw error;\r\n      }\r\n\r\n      if (data?.error) {\r\n        console.error('Claude API error:', data.message);\r\n        throw new Error(data.message);\r\n      }\r\n\r\n      return data?.response || generateFallbackResponse(userMessage);\r\n      \r\n    } catch (error) {\r\n      console.error('AI Response Error:', error);\r\n      setIsConnected(false);\r\n      \r\n      // Return fallback response\r\n      return generateFallbackResponse(userMessage);\r\n    }\r\n  };\r\n\r\n  const generateFallbackResponse = (userMessage: string): string => {\r\n    // Intelligent fallback responses based on message content\r\n    const lowercaseMessage = userMessage.toLowerCase();\r\n    \r\n    if (lowercaseMessage.includes('reduce') || lowercaseMessage.includes('lower') || lowercaseMessage.includes('decrease')) {\r\n      return `Based on your current emissions of ${(totalEmissions / 1000).toFixed(1)} t CO₂-e, here are the top reduction strategies:\r\n\r\n**Material Optimization (High Impact)**\r\n• Switch to lower-carbon concrete alternatives (potential 15-30% reduction)\r\n• Use recycled content materials where possible\r\n• Source materials locally to reduce transport emissions\r\n\r\n**Energy Efficiency (Medium Impact)**\r\n• Improve building envelope performance for better NABERS rating\r\n• Upgrade to high-performance glazing and insulation\r\n• Optimize HVAC systems and controls\r\n\r\n**Renewable Integration (Long-term)**\r\n• Increase renewable energy percentage to exceed NCC minimums\r\n• Consider on-site solar or wind generation\r\n• Implement energy storage solutions\r\n\r\n*Note: I'm currently offline but these are proven strategies. For detailed analysis, please try again when I'm reconnected.*`;\r\n    }\r\n\r\n    if (lowercaseMessage.includes('compliance') || lowercaseMessage.includes('standard') || lowercaseMessage.includes('ncc') || lowercaseMessage.includes('nabers')) {\r\n      return `**Compliance Analysis** (Offline Mode)\r\n\r\nBased on your current data:\r\n• **Total Emissions:** ${(totalEmissions / 1000).toFixed(1)} t CO₂-e\r\n• **NCC 2025:** ${totalEmissions > 150000 ? '⚠️ Review energy intensity' : '✅ Likely compliant'}\r\n• **NABERS:** Target 4+ stars through operational efficiency\r\n• **Green Star:** Focus on Materials and Energy categories\r\n\r\n**Priority Actions:**\r\n1. Energy intensity optimization for NCC compliance\r\n2. Operational efficiency improvements for NABERS\r\n3. Sustainable material selection for Green Star\r\n\r\n*I'm currently offline. For detailed compliance analysis, please retry when I'm reconnected.*`;\r\n    }\r\n\r\n    if (lowercaseMessage.includes('cost') || lowercaseMessage.includes('budget') || lowercaseMessage.includes('roi')) {\r\n      return `**Cost-Effective Carbon Reduction** (Offline Mode)\r\n\r\n**High Impact, Low Cost (ROI < 2 years):**\r\n• Material specification optimization (~2-5% project cost, 15-25% carbon reduction)\r\n• Operational efficiency improvements (~1-3% cost, 10-20% reduction)\r\n\r\n**Medium Impact, Medium Cost (ROI 2-5 years):**\r\n• Energy system upgrades (~5-10% cost, 20-35% reduction)\r\n• Enhanced building envelope (~8-15% cost, 15-30% reduction)\r\n\r\n**High Impact, Higher Cost (ROI 5-8 years):**\r\n• Renewable energy systems (~10-20% cost, 40-60% operational reduction)\r\n• Advanced materials and systems (~15-25% cost, 30-50% total reduction)\r\n\r\n*I'm currently offline. For detailed cost-benefit analysis, please retry when I'm reconnected.*`;\r\n    }\r\n\r\n    // Default fallback\r\n    return `I'm currently experiencing connectivity issues and running in offline mode. \r\n\r\n**General Recommendations for ${(totalEmissions / 1000).toFixed(1)} t CO₂-e project:**\r\n\r\n• **Materials:** Review high-impact materials and consider lower-carbon alternatives\r\n• **Energy:** Optimize building systems for better efficiency ratings\r\n• **Compliance:** Ensure NCC 2025 energy requirements are met (≤150 kWh/m²)\r\n• **Certification:** Consider Green Star or NABERS certification for added value\r\n\r\n**Common Carbon Reduction Strategies:**\r\n1. Material optimization (15-30% reduction potential)\r\n2. Energy efficiency improvements (20-35% reduction)\r\n3. Renewable energy integration (40-60% operational reduction)\r\n4. Transport and logistics optimization (5-10% reduction)\r\n\r\nPlease try your question again when I'm reconnected for detailed, personalized analysis.`;\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!inputMessage.trim()) return;\r\n\r\n    const userMessage: Message = {\r\n      id: Date.now().toString(),\r\n      role: 'user',\r\n      content: inputMessage,\r\n      timestamp: new Date(),\r\n      type: 'chat'\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputMessage('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const aiResponse = await generateAIResponse(inputMessage);\r\n      \r\n      const assistantMessage: Message = {\r\n        id: (Date.now() + 1).toString(),\r\n        role: 'assistant',\r\n        content: aiResponse,\r\n        timestamp: new Date(),\r\n        type: 'chat'\r\n      };\r\n\r\n      setMessages(prev => [...prev, assistantMessage]);\r\n    } catch (error) {\r\n      console.error('Message handling error:', error);\r\n      setIsConnected(false);\r\n      toast({\r\n        title: \"Connection Issue\",\r\n        description: \"I'm having trouble connecting. Providing offline assistance.\",\r\n        variant: \"destructive\",\r\n      });\r\n      \r\n      // Add fallback message\r\n      const fallbackMessage: Message = {\r\n        id: (Date.now() + 1).toString(),\r\n        role: 'assistant',\r\n        content: generateFallbackResponse(inputMessage),\r\n        timestamp: new Date(),\r\n        type: 'chat'\r\n      };\r\n      setMessages(prev => [...prev, fallbackMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateAnalysisReport = async () => {\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const analysisReport = `# Comprehensive Carbon Analysis Report\r\n\r\n## Executive Summary\r\nYour project shows a total carbon footprint of **${(totalEmissions / 1000).toFixed(1)} t CO₂-e**. Here's my detailed analysis:\r\n\r\n## Key Findings\r\n1. **Embodied Carbon**: ${calculatorData.lca?.embodiedCarbon ? `${(calculatorData.lca.embodiedCarbon / 1000).toFixed(1)} t CO₂-e` : 'Not calculated'}\r\n2. **Operational Carbon**: ${calculatorData.lca?.operationalCarbon ? `${(calculatorData.lca.operationalCarbon / 1000).toFixed(1)} t CO₂-e` : 'Not calculated'}\r\n3. **Compliance Status**: Mixed performance across standards\r\n\r\n## Priority Recommendations\r\n1. **Immediate (0-3 months)**: Material specification optimization\r\n2. **Short-term (3-12 months)**: Energy system upgrades\r\n3. **Long-term (1-3 years)**: Renewable energy integration\r\n\r\n## Impact Projections\r\n- Potential reduction: 25-40% of current emissions\r\n- Cost implications: 5-15% of project budget\r\n- Payback period: 3-7 years\r\n\r\nWould you like me to dive deeper into any specific area?`;\r\n\r\n      const analysisMessage: Message = {\r\n        id: Date.now().toString(),\r\n        role: 'assistant',\r\n        content: analysisReport,\r\n        timestamp: new Date(),\r\n        type: 'analysis'\r\n      };\r\n\r\n      setMessages(prev => [...prev, analysisMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateRecommendations = async () => {\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const recommendations = `# Smart Recommendations\r\n\r\n## Top 3 Carbon Reduction Opportunities\r\n\r\n### 1. Material Optimization (High Impact)\r\n- **Action**: Replace standard concrete with low-carbon alternatives\r\n- **Impact**: 15-25% reduction in embodied carbon\r\n- **Cost**: +2-5% material costs\r\n- **Timeline**: Immediate (design phase)\r\n\r\n### 2. Energy System Upgrade (Medium Impact)\r\n- **Action**: Enhance HVAC efficiency and controls\r\n- **Impact**: 20-30% operational energy reduction\r\n- **Cost**: +8-12% systems cost\r\n- **Timeline**: 6-12 months\r\n\r\n### 3. Renewable Energy Integration (Long-term)\r\n- **Action**: Solar PV system installation\r\n- **Impact**: 40-60% operational carbon reduction\r\n- **Cost**: +10-15% total project cost\r\n- **Timeline**: 12-24 months\r\n- **ROI**: 5-8 years\r\n\r\n## Implementation Roadmap\r\n1. **Month 1-2**: Material specification changes\r\n2. **Month 3-6**: Energy system design optimization\r\n3. **Month 6-12**: Renewable energy system integration\r\n\r\nEach recommendation is tailored to your specific project profile and compliance requirements.`;\r\n\r\n      const recommendationMessage: Message = {\r\n        id: Date.now().toString(),\r\n        role: 'assistant',\r\n        content: recommendations,\r\n        timestamp: new Date(),\r\n        type: 'recommendation'\r\n      };\r\n\r\n      setMessages(prev => [...prev, recommendationMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const quickPrompts = [\r\n    \"How can I reduce my carbon footprint by 30%?\",\r\n    \"What are the most cost-effective improvements?\",\r\n    \"Help me achieve NABERS 5-star rating\",\r\n    \"Analyze my material choices\",\r\n    \"Compare renewable energy options\"\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6 max-h-[calc(100vh-12rem)] overflow-hidden\">\r\n      {/* AI Status */}\r\n      <Card className=\"flex-shrink-0\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <div className=\"relative\">\r\n              <Brain className=\"h-5 w-5 text-primary\" />\r\n              <div className={`absolute -top-1 -right-1 w-3 h-3 rounded-full animate-pulse ${\r\n                isConnected ? 'bg-green-500' : 'bg-red-500'\r\n              }`}></div>\r\n            </div>\r\n            <span>Claude Sonnet 4 AI Assistant</span>\r\n            {!isConnected && (\r\n              <div className=\"flex items-center gap-1 text-red-500\">\r\n                <WifiOff className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Offline Mode</span>\r\n              </div>\r\n            )}\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div className={`flex items-center gap-3 p-3 rounded-lg ${\r\n              isConnected ? 'bg-green-50 dark:bg-green-950/20' : 'bg-red-50 dark:bg-red-950/20'\r\n            }`}>\r\n              {isConnected ? (\r\n                <Wifi className=\"h-5 w-5 text-green-600\" />\r\n              ) : (\r\n                <WifiOff className=\"h-5 w-5 text-red-600\" />\r\n              )}\r\n              <div>\r\n                <div className={`font-medium ${\r\n                  isConnected ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300'\r\n                }`}>\r\n                  {isConnected ? 'AI Connected' : 'Offline Mode'}\r\n                </div>\r\n                <div className={`text-xs ${\r\n                  isConnected ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'\r\n                }`}>\r\n                  {isConnected ? 'Real-time Claude AI' : 'Fallback responses'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\r\n              <Target className=\"h-5 w-5 text-blue-600\" />\r\n              <div>\r\n                <div className=\"font-medium text-blue-800 dark:text-blue-300\">Analysis Ready</div>\r\n                <div className=\"text-xs text-blue-600 dark:text-blue-400\">Real-time insights</div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center gap-3 p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg\">\r\n              <Lightbulb className=\"h-5 w-5 text-purple-600\" />\r\n              <div>\r\n                <div className=\"font-medium text-purple-800 dark:text-purple-300\">Recommendations</div>\r\n                <div className=\"text-xs text-purple-600 dark:text-purple-400\">Optimized for ROI</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* AI Chat Interface */}\r\n      <div className=\"flex-1 min-h-0\">\r\n        <Tabs defaultValue=\"chat\" className=\"h-full flex flex-col\">\r\n          <div className=\"flex-shrink-0 mb-4\">\r\n            <TabsList>\r\n              <TabsTrigger value=\"chat\">Chat</TabsTrigger>\r\n              <TabsTrigger value=\"analysis\" onClick={generateAnalysisReport}>Analysis</TabsTrigger>\r\n              <TabsTrigger value=\"recommendations\" onClick={generateRecommendations}>Recommendations</TabsTrigger>\r\n            </TabsList>\r\n          </div>\r\n          \r\n          <TabsContent value=\"chat\" className=\"flex-1 min-h-0 mt-0\">\r\n            <Card className=\"h-full flex flex-col\">\r\n              <CardContent className=\"flex-1 flex flex-col p-4 min-h-0\">\r\n                {/* Chat Messages */}\r\n                <ScrollArea className=\"flex-1 min-h-[500px] max-h-[70vh] pr-4\">\r\n                  <div className=\"space-y-4\">\r\n                    {messages.map((message) => (\r\n                      <div key={message.id} className={`flex gap-3 ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                        <div className={`flex gap-3 max-w-[80%] ${message.role === 'user' ? 'flex-row-reverse' : ''}`}>\r\n                          <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                            {message.role === 'user' ? (\r\n                              <User className=\"h-4 w-4 text-primary\" />\r\n                            ) : (\r\n                              <Bot className=\"h-4 w-4 text-primary\" />\r\n                            )}\r\n                          </div>\r\n                          <div className={`rounded-lg p-3 ${\r\n                            message.role === 'user' \r\n                              ? 'bg-primary text-primary-foreground' \r\n                              : 'bg-muted'\r\n                          }`}>\r\n                            <div className=\"whitespace-pre-wrap text-sm\">{message.content}</div>\r\n                            <div className=\"text-xs opacity-70 mt-1\">\r\n                              {message.timestamp.toLocaleTimeString()}\r\n                              {message.type && (\r\n                                <Badge variant=\"outline\" className=\"ml-2 text-xs\">\r\n                                  {message.type}\r\n                                </Badge>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    \r\n                    {isLoading && (\r\n                      <div className=\"flex gap-3 justify-start\">\r\n                        <div className=\"flex gap-3 max-w-[80%]\">\r\n                          <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                            <Bot className=\"h-4 w-4 text-primary\" />\r\n                          </div>\r\n                          <div className=\"rounded-lg p-3 bg-muted\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                              <span className=\"text-sm\">Claude is thinking...</span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    <div ref={messagesEndRef} />\r\n                  </div>\r\n                </ScrollArea>\r\n\r\n                {/* Quick Prompts */}\r\n                <div className=\"flex-shrink-0 py-3 space-y-2 border-t\">\r\n                  <div className=\"text-xs text-muted-foreground\">Quick prompts:</div>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {quickPrompts.map((prompt) => (\r\n                      <Button\r\n                        key={prompt}\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"text-xs\"\r\n                        onClick={() => setInputMessage(prompt)}\r\n                      >\r\n                        {prompt}\r\n                      </Button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Message Input */}\r\n                <div className=\"flex-shrink-0 flex gap-2 pt-2\">\r\n                  <Input\r\n                    value={inputMessage}\r\n                    onChange={(e) => setInputMessage(e.target.value)}\r\n                    placeholder={isConnected ? \"Ask Claude about carbon optimization strategies...\" : \"Ask me about carbon optimization (offline mode)...\"}\r\n                    className=\"flex-1\"\r\n                    onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                  />\r\n                  <Button onClick={handleSendMessage} disabled={isLoading || !inputMessage.trim()}>\r\n                    {isLoading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Send className=\"h-4 w-4\" />}\r\n                  </Button>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"analysis\" className=\"flex-1 min-h-0 mt-0\">\r\n            <Card className=\"h-full\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"text-center\">Analysis content will appear here when generated.</div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"recommendations\" className=\"flex-1 min-h-0 mt-0\">\r\n            <Card className=\"h-full\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"text-center\">Recommendations will appear here when generated.</div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { useCallback } from 'react';\r\nimport { useAuth } from '@/contexts/auth';\r\nimport { usePersonalization } from './usePersonalization';\r\nimport { toast } from 'sonner';\r\n\r\nexport const useCalculatorPersonalization = () => {\r\n  const { user, profile } = useAuth();\r\n  const personalization = usePersonalization(user?.id);\r\n\r\n  const saveCalculationWithPersonalization = useCallback(async (\r\n    calculatorType: string,\r\n    inputData: any,\r\n    results: any\r\n  ) => {\r\n    if (!user?.id || !profile?.calculator_preferences?.auto_save_calculations) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Extract carbon footprint from results\r\n      const carbonFootprint = \r\n        results.totalEmissions || \r\n        results.totalLCA || \r\n        results.totalCO2e || \r\n        results.carbonImpact || \r\n        0;\r\n\r\n      // Determine compliance status based on profile thresholds\r\n      let complianceStatus = 'unknown';\r\n      const thresholds = profile.compliance_thresholds || {};\r\n      \r\n      if (carbonFootprint > 0) {\r\n        const relevantThreshold = \r\n          thresholds[calculatorType] || \r\n          thresholds.default || \r\n          thresholds.ncc || \r\n          10000; // Default threshold\r\n        \r\n        complianceStatus = carbonFootprint <= relevantThreshold ? 'compliant' : 'non_compliant';\r\n      }\r\n\r\n      // Generate improvement suggestions based on focus areas\r\n      const improvementSuggestions = generateImprovementSuggestions(\r\n        profile.focus_areas || [],\r\n        results,\r\n        calculatorType\r\n      );\r\n\r\n      // Save to history\r\n      await personalization.saveCalculationHistory(\r\n        calculatorType,\r\n        inputData,\r\n        results,\r\n        carbonFootprint,\r\n        complianceStatus,\r\n        improvementSuggestions\r\n      );\r\n\r\n      // Check if carbon footprint exceeds user's goals\r\n      const carbonGoals = profile.carbon_footprint_goals || {};\r\n      if (carbonGoals.monthly_target && carbonFootprint > carbonGoals.monthly_target * 0.8) {\r\n        await personalization.createComplianceAlert(\r\n          'carbon_threshold',\r\n          'High Carbon Footprint Detected',\r\n          `Your recent ${calculatorType} calculation (${carbonFootprint.toFixed(1)} kg CO₂-e) is approaching your monthly target of ${carbonGoals.monthly_target} kg CO₂-e.`,\r\n          'warning',\r\n          calculatorType,\r\n          true\r\n        );\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error saving calculation with personalization:', error);\r\n      // Don't show error to user as this is background operation\r\n    }\r\n  }, [user, profile]);\r\n\r\n  const getPersonalizedDefaults = useCallback((calculatorType: string) => {\r\n    if (!profile) return {};\r\n\r\n    const prefs = profile.calculator_preferences || {};\r\n    const defaults: any = {};\r\n\r\n    // Set default region\r\n    if (profile.default_region) {\r\n      defaults.region = profile.default_region;\r\n    }\r\n\r\n    // Set default units\r\n    if (profile.preferred_units) {\r\n      defaults.units = profile.preferred_units;\r\n    }\r\n\r\n    // Calculator-specific defaults based on focus areas\r\n    const focusAreas = profile.focus_areas || [];\r\n    \r\n    if (calculatorType === 'lca') {\r\n      if (focusAreas.includes('Material Sustainability')) {\r\n        defaults.includeRecycledContent = true;\r\n      }\r\n      if (focusAreas.includes('Energy Efficiency')) {\r\n        defaults.includeOperationalEnergy = true;\r\n      }\r\n    }\r\n\r\n    if (calculatorType === 'green_star') {\r\n      if (focusAreas.includes('Green Star Certification')) {\r\n        defaults.targetRating = 'Good Practice';\r\n      }\r\n    }\r\n\r\n    return defaults;\r\n  }, [profile]);\r\n\r\n  const getRecommendedMaterials = useCallback(() => {\r\n    if (!profile?.focus_areas) return [];\r\n\r\n    const focusAreas = profile.focus_areas;\r\n    const recommendations: string[] = [];\r\n\r\n    if (focusAreas.includes('Material Sustainability')) {\r\n      recommendations.push('recycled_content', 'low_carbon', 'local_materials');\r\n    }\r\n    if (focusAreas.includes('Energy Efficiency')) {\r\n      recommendations.push('insulation', 'high_performance_glazing');\r\n    }\r\n    if (focusAreas.includes('Water Management')) {\r\n      recommendations.push('permeable_paving', 'water_efficient');\r\n    }\r\n\r\n    return recommendations;\r\n  }, [profile]);\r\n\r\n  const checkComplianceThresholds = useCallback((\r\n    calculatorType: string,\r\n    carbonFootprint: number\r\n  ) => {\r\n    if (!profile?.compliance_thresholds) return null;\r\n\r\n    const thresholds = profile.compliance_thresholds;\r\n    const threshold = thresholds[calculatorType] || thresholds.default;\r\n\r\n    if (threshold && carbonFootprint > threshold) {\r\n      return {\r\n        exceeded: true,\r\n        threshold,\r\n        exceedance: carbonFootprint - threshold,\r\n        percentage: ((carbonFootprint - threshold) / threshold) * 100\r\n      };\r\n    }\r\n\r\n    return { exceeded: false, threshold };\r\n  }, [profile]);\r\n\r\n  return {\r\n    saveCalculationWithPersonalization,\r\n    getPersonalizedDefaults,\r\n    getRecommendedMaterials,\r\n    checkComplianceThresholds,\r\n    ...personalization\r\n  };\r\n};\r\n\r\nfunction generateImprovementSuggestions(\r\n  focusAreas: string[],\r\n  results: any,\r\n  calculatorType: string\r\n): string[] {\r\n  const suggestions: string[] = [];\r\n\r\n  if (focusAreas.includes('Material Sustainability')) {\r\n    if (results.materialEmissions > 0) {\r\n      suggestions.push('Consider using materials with lower embodied carbon');\r\n      suggestions.push('Explore recycled content alternatives');\r\n    }\r\n  }\r\n\r\n  if (focusAreas.includes('Energy Efficiency')) {\r\n    if (results.energyEmissions > 0) {\r\n      suggestions.push('Improve building envelope performance');\r\n      suggestions.push('Consider renewable energy integration');\r\n    }\r\n  }\r\n\r\n  if (focusAreas.includes('Carbon Footprint Reduction')) {\r\n    suggestions.push('Review high-impact materials in your selection');\r\n    suggestions.push('Consider local sourcing to reduce transport emissions');\r\n  }\r\n\r\n  if (calculatorType === 'green_star' && results.totalPoints < 60) {\r\n    suggestions.push('Focus on energy and materials categories for maximum impact');\r\n  }\r\n\r\n  if (calculatorType === 'lca' && results.embodiedCarbon > results.operationalCarbon) {\r\n    suggestions.push('Material selection has high impact on overall footprint');\r\n  }\r\n\r\n  return suggestions;\r\n}","import { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/auth';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface CalculatorState {\r\n  ncc: any;\r\n  nabers: any;\r\n  lca: any;\r\n  scope: any;\r\n  leed: any;\r\n  breeam: any;\r\n  greenStar: any;\r\n}\r\n\r\ninterface SavedCalculation {\r\n  id: string;\r\n  name: string;\r\n  data: CalculatorState;\r\n  total_emissions: number;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport const useCalculatorState = () => {\r\n  const [calculatorData, setCalculatorData] = useState<CalculatorState>({\r\n    ncc: null,\r\n    nabers: null,\r\n    lca: null,\r\n    scope: null,\r\n    leed: null,\r\n    breeam: null,\r\n    greenStar: null\r\n  });\r\n  \r\n  const [savedCalculations, setSavedCalculations] = useState<SavedCalculation[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n\r\n  // Calculate total emissions\r\n  const calculateTotalEmissions = () => {\r\n    let total = 0;\r\n    if (calculatorData.ncc?.totalEmissions) total += calculatorData.ncc.totalEmissions;\r\n    if (calculatorData.nabers?.totalEmissions) total += calculatorData.nabers.totalEmissions;\r\n    if (calculatorData.lca?.totalLCA) total += calculatorData.lca.totalLCA;\r\n    if (calculatorData.scope?.totalEmissions) total += calculatorData.scope.totalEmissions;\r\n    return total;\r\n  };\r\n\r\n  // Calculate compliance score\r\n  const calculateComplianceScore = () => {\r\n    let compliantCount = 0;\r\n    let totalCount = 0;\r\n    \r\n    if (calculatorData.ncc?.isCompliant !== undefined) {\r\n      totalCount++;\r\n      if (calculatorData.ncc.isCompliant) compliantCount++;\r\n    }\r\n    if (calculatorData.nabers?.overallRating) {\r\n      totalCount++;\r\n      if (calculatorData.nabers.overallRating >= 4) compliantCount++;\r\n    }\r\n    if (calculatorData.leed?.certificationLevel) {\r\n      totalCount++;\r\n      if (calculatorData.leed.certificationLevel !== 'Not Certified') compliantCount++;\r\n    }\r\n    if (calculatorData.breeam?.rating) {\r\n      totalCount++;\r\n      if (calculatorData.breeam.rating !== 'Unclassified') compliantCount++;\r\n    }\r\n    \r\n    return totalCount > 0 ? Math.round((compliantCount / totalCount) * 100) : 0;\r\n  };\r\n\r\n  // Load saved calculations for authenticated users\r\n  const loadSavedCalculations = async () => {\r\n    if (!user) return;\r\n    \r\n    setIsLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('projects')\r\n        .select('id, name, result, total, created_at, updated_at')\r\n        .eq('user_id', user.id)\r\n        .not('result', 'is', null)\r\n        .order('updated_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      const calculations = data?.map(project => ({\r\n        id: project.id,\r\n        name: project.name,\r\n        data: (project.result as unknown as CalculatorState) || {\r\n          ncc: null,\r\n          nabers: null,\r\n          lca: null,\r\n          scope: null,\r\n          leed: null,\r\n          breeam: null,\r\n          greenStar: null\r\n        },\r\n        total_emissions: project.total || 0,\r\n        created_at: project.created_at,\r\n        updated_at: project.updated_at\r\n      })) || [];\r\n\r\n      setSavedCalculations(calculations);\r\n    } catch (error) {\r\n      console.error('Error loading saved calculations:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load saved calculations.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Save calculation as project\r\n  const saveCalculation = async (name: string) => {\r\n    if (!user) {\r\n      toast({\r\n        title: \"Authentication Required\",\r\n        description: \"Please sign in to save your calculations.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    }\r\n\r\n    setIsSaving(true);\r\n    try {\r\n      const totalEmissions = calculateTotalEmissions();\r\n      const complianceScore = calculateComplianceScore();\r\n\r\n      const { data, error } = await supabase\r\n        .from('projects')\r\n        .insert({\r\n          name,\r\n          description: `Carbon calculation - ${complianceScore}% compliance score`,\r\n          result: calculatorData as any,\r\n          total: totalEmissions,\r\n          region: 'Australia', // Default region\r\n          tags: ['carbon-calculation', 'calculator-pro'],\r\n          user_id: user.id\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Calculation Saved\",\r\n        description: `Your calculation \"${name}\" has been saved successfully.`,\r\n      });\r\n\r\n      // Reload saved calculations\r\n      await loadSavedCalculations();\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error saving calculation:', error);\r\n      toast({\r\n        title: \"Save Failed\",\r\n        description: \"Failed to save your calculation. Please try again.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return false;\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  // Load a saved calculation\r\n  const loadCalculation = async (calculationId: string) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('projects')\r\n        .select('result')\r\n        .eq('id', calculationId)\r\n        .eq('user_id', user?.id)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      if (data?.result) {\r\n        const loadedData = data.result as unknown as CalculatorState;\r\n        setCalculatorData(loadedData);\r\n        toast({\r\n          title: \"Calculation Loaded\",\r\n          description: \"Your saved calculation has been loaded successfully.\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading calculation:', error);\r\n      toast({\r\n        title: \"Load Failed\",\r\n        description: \"Failed to load the calculation.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Update handlers for each calculator\r\n  const updateHandlers = {\r\n    ncc: (data: any) => setCalculatorData(prev => ({ ...prev, ncc: data })),\r\n    nabers: (data: any) => setCalculatorData(prev => ({ ...prev, nabers: data })),\r\n    lca: (data: any) => setCalculatorData(prev => ({ ...prev, lca: data })),\r\n    scope: (data: any) => setCalculatorData(prev => ({ ...prev, scope: data })),\r\n    leed: (data: any) => setCalculatorData(prev => ({ ...prev, leed: data })),\r\n    breeam: (data: any) => setCalculatorData(prev => ({ ...prev, breeam: data })),\r\n    greenStar: (data: any) => setCalculatorData(prev => ({ ...prev, greenStar: data }))\r\n  };\r\n\r\n  // Load saved calculations on mount\r\n  useEffect(() => {\r\n    if (user) {\r\n      loadSavedCalculations();\r\n    }\r\n  }, [user]);\r\n\r\n  return {\r\n    calculatorData,\r\n    savedCalculations,\r\n    isLoading,\r\n    isSaving,\r\n    totalEmissions: calculateTotalEmissions(),\r\n    complianceScore: calculateComplianceScore(),\r\n    updateHandlers,\r\n    saveCalculation,\r\n    loadCalculation,\r\n    loadSavedCalculations,\r\n    user\r\n  };\r\n};","import { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/auth';\r\nimport { useCalculatorPersonalization } from '@/hooks/useCalculatorPersonalization';\r\nimport { useCalculatorState } from './useCalculatorState';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nexport const usePersonalizedCalculatorState = () => {\r\n  const { user, profile } = useAuth();\r\n  const { toast } = useToast();\r\n  const calculatorState = useCalculatorState();\r\n  const personalization = useCalculatorPersonalization();\r\n  \r\n  const [personalizedDefaults, setPersonalizedDefaults] = useState<Record<string, any>>({});\r\n  const [isApplyingDefaults, setIsApplyingDefaults] = useState(false);\r\n\r\n  // Load personalized defaults when user or profile changes\r\n  useEffect(() => {\r\n    if (user && profile) {\r\n      const defaults = {\r\n        lca: personalization.getPersonalizedDefaults('lca'),\r\n        scope: personalization.getPersonalizedDefaults('scope'),\r\n        green_star: personalization.getPersonalizedDefaults('green_star'),\r\n        nabers: personalization.getPersonalizedDefaults('nabers'),\r\n        ncc: personalization.getPersonalizedDefaults('ncc'),\r\n        leed: personalization.getPersonalizedDefaults('leed'),\r\n        breeam: personalization.getPersonalizedDefaults('breeam')\r\n      };\r\n      \r\n      setPersonalizedDefaults(defaults);\r\n    }\r\n  }, [user, profile]);\r\n\r\n  // Enhanced save function with personalization\r\n  const saveCalculationWithPersonalization = async (name: string) => {\r\n    const success = await calculatorState.saveCalculation(name);\r\n    \r\n    if (success && user) {\r\n      // Save calculation to personalization history\r\n      const calculatorTypes = Object.keys(calculatorState.calculatorData).filter(\r\n        key => calculatorState.calculatorData[key] !== null\r\n      );\r\n      \r\n      for (const calculatorType of calculatorTypes) {\r\n        const inputData = calculatorState.calculatorData[calculatorType];\r\n        const results = inputData; // The calculation data contains the results\r\n        \r\n        await personalization.saveCalculationWithPersonalization(\r\n          calculatorType,\r\n          inputData,\r\n          results\r\n        );\r\n      }\r\n      \r\n      toast({\r\n        title: \"Calculation Saved & Analyzed\",\r\n        description: \"Your calculation has been saved and added to your personalization history.\",\r\n      });\r\n    }\r\n    \r\n    return success;\r\n  };\r\n\r\n  // Apply template defaults to calculators\r\n  const applyTemplateDefaults = (template: any) => {\r\n    template.calculatorTypes.forEach((calculatorType: string) => {\r\n      const defaults = template.defaultValues[calculatorType];\r\n      if (defaults && calculatorState.updateHandlers[calculatorType as keyof typeof calculatorState.updateHandlers]) {\r\n        calculatorState.updateHandlers[calculatorType as keyof typeof calculatorState.updateHandlers](defaults);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Apply personalized defaults to a calculator\r\n  const applyPersonalizedDefaults = async (calculatorType: string) => {\r\n    if (!personalizedDefaults[calculatorType]) return;\r\n    \r\n    setIsApplyingDefaults(true);\r\n    try {\r\n      const defaults = personalizedDefaults[calculatorType];\r\n      \r\n      // Apply defaults based on calculator type\r\n      const handler = calculatorState.updateHandlers[calculatorType as keyof typeof calculatorState.updateHandlers];\r\n      if (handler) {\r\n        handler(defaults);\r\n        \r\n        toast({\r\n          title: \"Defaults Applied\",\r\n          description: `Your personalized settings have been applied to the ${calculatorType.toUpperCase()} calculator.`,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error applying personalized defaults:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to apply personalized defaults.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsApplyingDefaults(false);\r\n    }\r\n  };\r\n\r\n  // Get recommended materials based on user preferences\r\n  const getRecommendedMaterials = () => {\r\n    return personalization.getRecommendedMaterials();\r\n  };\r\n\r\n  // Check compliance against user thresholds\r\n  const checkPersonalizedCompliance = (calculatorType: string) => {\r\n    const totalEmissions = calculatorState.totalEmissions;\r\n    return personalization.checkComplianceThresholds(calculatorType, totalEmissions);\r\n  };\r\n\r\n  // Get calculation insights based on history\r\n  const getCalculationInsights = () => {\r\n    const history = personalization.calculationHistory;\r\n    const currentEmissions = calculatorState.totalEmissions;\r\n    \r\n    if (history.length === 0) return null;\r\n    \r\n    const averageEmissions = history.reduce((sum, calc) => \r\n      sum + (calc.carbon_footprint || 0), 0) / history.length;\r\n    \r\n    const improvement = averageEmissions > 0 ? \r\n      ((averageEmissions - currentEmissions) / averageEmissions) * 100 : 0;\r\n    \r\n    return {\r\n      averageEmissions,\r\n      currentEmissions,\r\n      improvement,\r\n      isImprovement: improvement > 0,\r\n      calculationCount: history.length\r\n    };\r\n  };\r\n\r\n  return {\r\n    ...calculatorState,\r\n    // Enhanced methods\r\n    saveCalculation: saveCalculationWithPersonalization,\r\n    applyPersonalizedDefaults,\r\n    applyTemplateDefaults,\r\n    getRecommendedMaterials,\r\n    checkPersonalizedCompliance,\r\n    getCalculationInsights,\r\n    \r\n    // Personalization data\r\n    personalizedDefaults,\r\n    isApplyingDefaults,\r\n    \r\n    // Personalization hooks\r\n    ...personalization\r\n  };\r\n};","import React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { FileText, Star, Clock, Building, Factory, Home } from 'lucide-react';\r\n\r\ninterface CalculatorTemplate {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  category: string;\r\n  icon: React.ReactNode;\r\n  calculatorTypes: string[];\r\n  defaultValues: Record<string, any>;\r\n  tags: string[];\r\n}\r\n\r\ninterface CalculatorTemplateSelectorProps {\r\n  onSelectTemplate: (template: CalculatorTemplate) => void;\r\n  userFocusAreas?: string[];\r\n  recentTemplates?: string[];\r\n}\r\n\r\nconst templates: CalculatorTemplate[] = [\r\n  {\r\n    id: 'residential_standard',\r\n    name: 'Standard Residential Project',\r\n    description: 'Typical single-family home with standard construction materials',\r\n    category: 'Residential',\r\n    icon: <Home className=\"h-5 w-5\" />,\r\n    calculatorTypes: ['lca', 'ncc', 'nabers'],\r\n    defaultValues: {\r\n      lca: {\r\n        buildingType: 'residential',\r\n        area: 200,\r\n        materials: ['concrete', 'steel', 'timber']\r\n      },\r\n      ncc: {\r\n        climateZone: 'Zone 6',\r\n        buildingClass: 'Class 1'\r\n      }\r\n    },\r\n    tags: ['residential', 'standard', 'family-home']\r\n  },\r\n  {\r\n    id: 'commercial_office',\r\n    name: 'Commercial Office Building',\r\n    description: 'Multi-story office building with typical commercial specifications',\r\n    category: 'Commercial',\r\n    icon: <Building className=\"h-5 w-5\" />,\r\n    calculatorTypes: ['lca', 'scope', 'nabers', 'green_star'],\r\n    defaultValues: {\r\n      lca: {\r\n        buildingType: 'commercial',\r\n        area: 5000,\r\n        floors: 8\r\n      },\r\n      scope: {\r\n        operationalEnergy: true,\r\n        transportEmissions: true\r\n      }\r\n    },\r\n    tags: ['commercial', 'office', 'multi-story']\r\n  },\r\n  {\r\n    id: 'industrial_warehouse',\r\n    name: 'Industrial Warehouse',\r\n    description: 'Large-scale warehouse or manufacturing facility',\r\n    category: 'Industrial',\r\n    icon: <Factory className=\"h-5 w-5\" />,\r\n    calculatorTypes: ['lca', 'scope', 'breeam'],\r\n    defaultValues: {\r\n      lca: {\r\n        buildingType: 'industrial',\r\n        area: 10000,\r\n        materials: ['steel', 'concrete', 'cladding']\r\n      }\r\n    },\r\n    tags: ['industrial', 'warehouse', 'manufacturing']\r\n  },\r\n  {\r\n    id: 'green_building',\r\n    name: 'Green Star Certified Building',\r\n    description: 'High-performance building targeting Green Star certification',\r\n    category: 'Sustainable',\r\n    icon: <Star className=\"h-5 w-5\" />,\r\n    calculatorTypes: ['green_star', 'lca', 'nabers', 'leed'],\r\n    defaultValues: {\r\n      green_star: {\r\n        targetRating: 'World Leadership',\r\n        sustainableMaterials: true\r\n      },\r\n      lca: {\r\n        includeRecycledContent: true,\r\n        renewableEnergy: true\r\n      }\r\n    },\r\n    tags: ['green-star', 'sustainable', 'high-performance']\r\n  }\r\n];\r\n\r\nexport const CalculatorTemplateSelector: React.FC<CalculatorTemplateSelectorProps> = ({\r\n  onSelectTemplate,\r\n  userFocusAreas = [],\r\n  recentTemplates = []\r\n}) => {\r\n  // Sort templates based on user preferences\r\n  const sortedTemplates = templates.sort((a, b) => {\r\n    const aRelevance = a.tags.filter(tag => \r\n      userFocusAreas.some(area => area.toLowerCase().includes(tag))\r\n    ).length;\r\n    const bRelevance = b.tags.filter(tag => \r\n      userFocusAreas.some(area => area.toLowerCase().includes(tag))\r\n    ).length;\r\n    \r\n    if (aRelevance !== bRelevance) return bRelevance - aRelevance;\r\n    \r\n    // Prioritize recently used templates\r\n    const aRecent = recentTemplates.includes(a.id) ? 1 : 0;\r\n    const bRecent = recentTemplates.includes(b.id) ? 1 : 0;\r\n    \r\n    return bRecent - aRecent;\r\n  });\r\n\r\n  const getRecommendationBadge = (template: CalculatorTemplate) => {\r\n    const relevantTags = template.tags.filter(tag => \r\n      userFocusAreas.some(area => area.toLowerCase().includes(tag))\r\n    );\r\n    \r\n    if (relevantTags.length > 0) return 'Recommended';\r\n    if (recentTemplates.includes(template.id)) return 'Recent';\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <FileText className=\"h-5 w-5\" />\r\n          Calculator Templates\r\n        </CardTitle>\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Quick start with pre-configured calculator settings for common project types\r\n        </p>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {sortedTemplates.map((template) => {\r\n            const badge = getRecommendationBadge(template);\r\n            \r\n            return (\r\n              <Card key={template.id} className=\"cursor-pointer hover:bg-accent transition-colors\">\r\n                <CardContent className=\"p-4\">\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        {template.icon}\r\n                        <div>\r\n                          <h3 className=\"font-medium\">{template.name}</h3>\r\n                          <p className=\"text-sm text-muted-foreground\">{template.category}</p>\r\n                        </div>\r\n                      </div>\r\n                      {badge && (\r\n                        <Badge variant={badge === 'Recommended' ? 'default' : 'secondary'} className=\"text-xs\">\r\n                          {badge}\r\n                        </Badge>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      {template.description}\r\n                    </p>\r\n                    \r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {template.calculatorTypes.map((type) => (\r\n                        <Badge key={type} variant=\"outline\" className=\"text-xs\">\r\n                          {type.toUpperCase()}\r\n                        </Badge>\r\n                      ))}\r\n                    </div>\r\n                    \r\n                    <Button \r\n                      variant=\"outline\" \r\n                      size=\"sm\" \r\n                      className=\"w-full\"\r\n                      onClick={() => onSelectTemplate(template)}\r\n                    >\r\n                      Use Template\r\n                    </Button>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n        \r\n        {userFocusAreas.length === 0 && (\r\n          <div className=\"mt-4 p-4 bg-muted rounded-lg\">\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              💡 Sign in and set your focus areas in your profile to get personalized template recommendations\r\n            </p>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};","import React from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { CalculatorTemplateSelector } from './templates/CalculatorTemplateSelector';\r\nimport { \r\n  TrendingUp, \r\n  TrendingDown, \r\n  Target, \r\n  BarChart3, \r\n  AlertTriangle,\r\n  CheckCircle,\r\n  Calculator,\r\n  Star,\r\n  Activity\r\n} from 'lucide-react';\r\n\r\ninterface PersonalizedCalculatorDashboardProps {\r\n  totalEmissions: number;\r\n  complianceScore: number;\r\n  insights: any;\r\n  complianceCheck: any;\r\n  recommendedMaterials: string[];\r\n  onApplyDefaults: (calculatorType: string) => void;\r\n  calculationHistory: any[];\r\n  isApplyingDefaults: boolean;\r\n  onTemplateSelect: (template: any) => void;\r\n  userFocusAreas?: string[];\r\n}\r\n\r\nexport const PersonalizedCalculatorDashboard: React.FC<PersonalizedCalculatorDashboardProps> = ({\r\n  totalEmissions,\r\n  complianceScore,\r\n  insights,\r\n  complianceCheck,\r\n  recommendedMaterials,\r\n  onApplyDefaults,\r\n  calculationHistory,\r\n  isApplyingDefaults,\r\n  onTemplateSelect,\r\n  userFocusAreas = []\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Quick Stats */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Current Emissions</p>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {(totalEmissions / 1000).toFixed(1)} t CO₂-e\r\n                </p>\r\n              </div>\r\n              <Activity className=\"h-8 w-8 text-primary\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Compliance Score</p>\r\n                <p className=\"text-2xl font-bold\">{complianceScore}%</p>\r\n              </div>\r\n              <Target className=\"h-8 w-8 text-green-600\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Calculations</p>\r\n                <p className=\"text-2xl font-bold\">{calculationHistory.length}</p>\r\n              </div>\r\n              <BarChart3 className=\"h-8 w-8 text-blue-600\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Improvement</p>\r\n                <div className=\"flex items-center gap-1\">\r\n                  <p className=\"text-2xl font-bold\">\r\n                    {insights?.improvement?.toFixed(1) || '0'}%\r\n                  </p>\r\n                  {insights?.isImprovement ? (\r\n                    <TrendingDown className=\"h-4 w-4 text-green-600\" />\r\n                  ) : (\r\n                    <TrendingUp className=\"h-4 w-4 text-red-600\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <Star className=\"h-8 w-8 text-warning\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Performance Insights */}\r\n      {insights && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <BarChart3 className=\"h-5 w-5\" />\r\n              Performance Insights\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-sm\">Your Average Emissions</span>\r\n                <span className=\"font-medium\">\r\n                  {(insights.averageEmissions / 1000).toFixed(1)} t CO₂-e\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-sm\">Current Calculation</span>\r\n                <span className=\"font-medium\">\r\n                  {(insights.currentEmissions / 1000).toFixed(1)} t CO₂-e\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-sm\">Improvement from Average</span>\r\n                  <Badge variant={insights.isImprovement ? \"default\" : \"destructive\"}>\r\n                    {insights.isImprovement ? '-' : '+'}{Math.abs(insights.improvement).toFixed(1)}%\r\n                  </Badge>\r\n                </div>\r\n                <Progress \r\n                  value={Math.min(Math.abs(insights.improvement), 100)} \r\n                  className=\"h-2\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Compliance Alerts */}\r\n      {complianceCheck && complianceCheck.exceeded && (\r\n        <Card className=\"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/30\">\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2 text-orange-700 dark:text-orange-300\">\r\n              <AlertTriangle className=\"h-5 w-5\" />\r\n              Compliance Alert\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-2\">\r\n              <p className=\"text-sm text-orange-600 dark:text-orange-400\">\r\n                Your calculation exceeds the threshold by{' '}\r\n                <span className=\"font-medium\">\r\n                  {(complianceCheck.exceedance / 1000).toFixed(1)} t CO₂-e\r\n                </span>\r\n                ({complianceCheck.percentage.toFixed(1)}% over limit)\r\n              </p>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Target: {(complianceCheck.threshold / 1000).toFixed(1)} t CO₂-e\r\n              </p>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Quick Access Tools */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Calculator className=\"h-5 w-5\" />\r\n            Quick Access Tools\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n            {['lca', 'scope', 'green_star', 'nabers'].map((calculatorType) => (\r\n              <Button\r\n                key={calculatorType}\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onApplyDefaults(calculatorType)}\r\n                disabled={isApplyingDefaults}\r\n                className=\"justify-start\"\r\n              >\r\n                Apply {calculatorType.toUpperCase()} Defaults\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Recommended Materials */}\r\n      {recommendedMaterials.length > 0 && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Recommended Materials</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {recommendedMaterials.map((material, index) => (\r\n                <Badge key={index} variant=\"secondary\">\r\n                  {material.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\r\n                </Badge>\r\n              ))}\r\n            </div>\r\n            <p className=\"text-sm text-muted-foreground mt-2\">\r\n              Based on your focus areas and sustainability preferences\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Calculator Templates */}\r\n      <CalculatorTemplateSelector\r\n        onSelectTemplate={onTemplateSelect}\r\n        userFocusAreas={userFocusAreas}\r\n        recentTemplates={[]}\r\n      />\r\n\r\n      {/* Recent Calculation Trends */}\r\n      {calculationHistory.length > 1 && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Recent Calculation Trends</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-3\">\r\n              {calculationHistory.slice(0, 3).map((calc) => (\r\n                <div key={calc.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                  <div>\r\n                    <div className=\"font-medium text-sm\">\r\n                      {calc.calculator_type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\r\n                    </div>\r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      {new Date(calc.created_at).toLocaleDateString()}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <div className=\"font-medium text-sm\">\r\n                      {calc.carbon_footprint ? (calc.carbon_footprint / 1000).toFixed(1) : 'N/A'} t CO₂-e\r\n                    </div>\r\n                    <Badge \r\n                      variant={calc.compliance_status === 'compliant' ? 'default' : 'destructive'}\r\n                      className=\"text-xs\"\r\n                    >\r\n                      {calc.compliance_status || 'unknown'}\r\n                    </Badge>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { ErrorBoundary } from 'react-error-boundary';\r\nimport ErrorFallbackCard from './ErrorFallbackCard';\r\nimport { useErrorBoundaryState } from '@/hooks/useErrorBoundaryState';\r\nimport { isNetworkError } from '@/utils/errorHandling/networkChecker';\r\n\r\ninterface StreamlinedErrorBoundaryProps {\r\n  children: React.ReactNode;\r\n  feature: string;\r\n  fallbackComponent?: React.ComponentType<{ \r\n    error: Error; \r\n    resetErrorBoundary: () => void;\r\n    feature?: string;\r\n  }>;\r\n  className?: string;\r\n  onReset?: () => void;\r\n}\r\n\r\n/**\r\n * Streamlined Error Boundary - Phase 2 Optimization\r\n * Simplified error handling without complex ignoreErrors logic\r\n * Focuses on core error handling and performance\r\n */\r\nexport const StreamlinedErrorBoundary: React.FC<StreamlinedErrorBoundaryProps> = ({ \r\n  children, \r\n  feature,\r\n  fallbackComponent,\r\n  className,\r\n  onReset\r\n}) => {\r\n  const {\r\n    key,\r\n    isChecking,\r\n    handleReset,\r\n    handleError\r\n  } = useErrorBoundaryState(feature, onReset);\r\n\r\n  const DefaultFallback = React.useCallback(({ error, resetErrorBoundary }) => (\r\n    <ErrorFallbackCard\r\n      error={error}\r\n      isNetworkError={isNetworkError(error)}\r\n      isChecking={isChecking}\r\n      onReset={resetErrorBoundary}\r\n    />\r\n  ), [isChecking]);\r\n\r\n  const FallbackComponent = fallbackComponent || DefaultFallback;\r\n\r\n  return (\r\n    <div className={className}>\r\n      <ErrorBoundary\r\n        key={`streamlined-${feature}-${key}`}\r\n        FallbackComponent={FallbackComponent}\r\n        onError={handleError}\r\n        onReset={handleReset}\r\n      >\r\n        {children}\r\n      </ErrorBoundary>\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: 'small' | 'medium' | 'large';\r\n  className?: string;\r\n}\r\n\r\nexport function LoadingSpinner({ size = 'medium', className = '' }: LoadingSpinnerProps) {\r\n  const sizeClasses = {\r\n    small: 'w-4 h-4',\r\n    medium: 'w-8 h-8',\r\n    large: 'w-12 h-12',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-center justify-center ${className}`}>\r\n      <div\r\n        className={`${sizeClasses[size]} animate-spin rounded-full border-4 border-gray-200 border-t-blue-600`}\r\n        role=\"status\"\r\n        aria-label=\"Loading\"\r\n      />\r\n    </div>\r\n  );\r\n} ","import React from 'react';\r\nimport { LoadingSpinner } from '@/components/LoadingSpinner';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\n\r\ninterface ProgressiveLoadingStateProps {\r\n  type?: 'spinner' | 'skeleton' | 'card';\r\n  message?: string;\r\n  progress?: number;\r\n  className?: string;\r\n  size?: 'sm' | 'md' | 'lg';\r\n}\r\n\r\n/**\r\n * Progressive Loading State - Phase 2 Enhancement\r\n * Provides different loading states based on component type and context\r\n */\r\nexport const ProgressiveLoadingState: React.FC<ProgressiveLoadingStateProps> = ({\r\n  type = 'spinner',\r\n  message = 'Loading...',\r\n  progress,\r\n  className = '',\r\n  size = 'md'\r\n}) => {\r\n  const sizeClasses = {\r\n    sm: 'h-32',\r\n    md: 'h-48',\r\n    lg: 'h-64'\r\n  };\r\n\r\n  if (type === 'skeleton') {\r\n    return (\r\n      <div className={`space-y-4 ${className}`}>\r\n        <Skeleton className=\"h-8 w-3/4\" />\r\n        <Skeleton className=\"h-4 w-full\" />\r\n        <Skeleton className=\"h-4 w-2/3\" />\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {Array.from({ length: 6 }).map((_, i) => (\r\n            <Card key={i}>\r\n              <CardContent className=\"p-4\">\r\n                <Skeleton className=\"h-4 w-full mb-2\" />\r\n                <Skeleton className=\"h-3 w-2/3 mb-2\" />\r\n                <Skeleton className=\"h-3 w-1/2\" />\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (type === 'card') {\r\n    return (\r\n      <Card className={`${sizeClasses[size]} ${className}`}>\r\n        <CardContent className=\"flex flex-col items-center justify-center h-full\">\r\n        <LoadingSpinner size={size === 'sm' ? 'small' : size === 'md' ? 'medium' : 'large'} />\r\n          <p className=\"mt-4 text-muted-foreground\">{message}</p>\r\n          {typeof progress === 'number' && (\r\n            <div className=\"w-full max-w-xs mt-4\">\r\n              <div className=\"bg-secondary rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-primary h-2 rounded-full transition-all duration-300\"\r\n                  style={{ width: `${Math.min(100, Math.max(0, progress))}%` }}\r\n                />\r\n              </div>\r\n              <p className=\"text-xs text-center mt-2\">{Math.round(progress)}%</p>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`flex flex-col items-center justify-center ${sizeClasses[size]} ${className}`}>\r\n      <LoadingSpinner size={size === 'sm' ? 'small' : size === 'md' ? 'medium' : 'large'} />\r\n      <p className=\"mt-4 text-muted-foreground\">{message}</p>\r\n    </div>\r\n  );\r\n};","import { useState, useEffect, useCallback } from 'react';\r\nimport { preloadComponent } from '@/utils/lazyLoad';\r\n\r\ninterface UseLazyComponentOptions {\r\n  preloadDelay?: number;\r\n  enableIntersectionObserver?: boolean;\r\n  threshold?: number;\r\n}\r\n\r\n/**\r\n * Custom hook for intelligent lazy component loading - Phase 2 Enhancement\r\n * Provides preloading based on user behavior and viewport intersection\r\n */\r\nexport const useLazyComponent = (\r\n  importFunc: () => Promise<{ default: any }>,\r\n  options: UseLazyComponentOptions = {}\r\n) => {\r\n  const {\r\n    preloadDelay = 2000,\r\n    enableIntersectionObserver = true,\r\n    threshold = 0.1\r\n  } = options;\r\n\r\n  const [isPreloaded, setIsPreloaded] = useState(false);\r\n  const [isIntersecting, setIsIntersecting] = useState(false);\r\n\r\n  // Preload component after delay\r\n  useEffect(() => {\r\n    if (!isPreloaded) {\r\n      const timer = setTimeout(() => {\r\n        preloadComponent(importFunc);\r\n        setIsPreloaded(true);\r\n      }, preloadDelay);\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [importFunc, preloadDelay, isPreloaded]);\r\n\r\n  // Intersection observer for viewport-based loading\r\n  const observerRef = useCallback((node: HTMLElement | null) => {\r\n    if (!enableIntersectionObserver || !node) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting && !isPreloaded) {\r\n          preloadComponent(importFunc);\r\n          setIsPreloaded(true);\r\n          setIsIntersecting(true);\r\n        }\r\n      },\r\n      { threshold }\r\n    );\r\n\r\n    observer.observe(node);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, [importFunc, enableIntersectionObserver, threshold, isPreloaded]);\r\n\r\n  // Manual preload function\r\n  const preload = useCallback(() => {\r\n    if (!isPreloaded) {\r\n      preloadComponent(importFunc);\r\n      setIsPreloaded(true);\r\n    }\r\n  }, [importFunc, isPreloaded]);\r\n\r\n  return {\r\n    isPreloaded,\r\n    isIntersecting,\r\n    observerRef,\r\n    preload\r\n  };\r\n};","import React, { useState } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Save, Loader2, Clock, TrendingUp } from 'lucide-react';\r\n\r\ninterface SaveCalculationDialogProps {\r\n  onSave: (name: string) => Promise<boolean>;\r\n  isSaving: boolean;\r\n  totalEmissions: number;\r\n  complianceScore: number;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const SaveCalculationDialog: React.FC<SaveCalculationDialogProps> = ({\r\n  onSave,\r\n  isSaving,\r\n  totalEmissions,\r\n  complianceScore,\r\n  children\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [name, setName] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!name.trim()) return;\r\n\r\n    const success = await onSave(name.trim());\r\n    if (success) {\r\n      setName('');\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  const generateName = () => {\r\n    const date = new Date().toLocaleDateString();\r\n    const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n    setName(`Carbon Calculation - ${date} ${time}`);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        {children}\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Save className=\"h-5 w-5\" />\r\n            Save Calculation\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <div className=\"space-y-6\">\r\n          {/* Calculation Summary */}\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <Card>\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <TrendingUp className=\"h-4 w-4 text-red-600\" />\r\n                  <div>\r\n                    <div className=\"text-sm text-muted-foreground\">Total Emissions</div>\r\n                    <div className=\"font-bold text-red-600\">\r\n                      {(totalEmissions / 1000).toFixed(1)} t CO₂-e\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n            \r\n            <Card>\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Clock className=\"h-4 w-4 text-green-600\" />\r\n                  <div>\r\n                    <div className=\"text-sm text-muted-foreground\">Compliance</div>\r\n                    <div className=\"font-bold text-green-600\">\r\n                      {complianceScore}%\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Save Form */}\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"calculation-name\">Calculation Name</Label>\r\n              <div className=\"flex gap-2\">\r\n                <Input\r\n                  id=\"calculation-name\"\r\n                  value={name}\r\n                  onChange={(e) => setName(e.target.value)}\r\n                  placeholder=\"Enter a name for your calculation...\"\r\n                  className=\"flex-1\"\r\n                />\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={generateName}\r\n                  className=\"shrink-0\"\r\n                >\r\n                  <Clock className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-2 pt-4\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={() => setOpen(false)}\r\n                className=\"flex-1\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={!name.trim() || isSaving}\r\n                className=\"flex-1\"\r\n              >\r\n                {isSaving ? (\r\n                  <>\r\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                    Saving...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Save className=\"h-4 w-4 mr-2\" />\r\n                    Save\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};","import React from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Calculator, Save, FileText, RotateCcw, Download } from 'lucide-react';\r\nimport { SaveCalculationDialog } from './SaveCalculationDialog';\r\nimport { CalculatorActions } from './hooks/useCalculatorActions';\r\n\r\ninterface CalculatorHeaderProps {\r\n  totalEmissions: number;\r\n  complianceScore: number;\r\n  isSaving: boolean;\r\n  user: any;\r\n  actions: CalculatorActions;\r\n  onSave: (name: string) => Promise<boolean>;\r\n}\r\n\r\nexport const CalculatorHeader: React.FC<CalculatorHeaderProps> = ({\r\n  totalEmissions,\r\n  complianceScore,\r\n  isSaving,\r\n  user,\r\n  actions,\r\n  onSave\r\n}) => {\r\n  return (\r\n    <div className=\"bg-card shadow-sm border-b\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between items-center py-6\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"bg-primary p-2 rounded-lg\">\r\n              <Calculator className=\"h-8 w-8 text-primary-foreground\" />\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-card-foreground\">Carbon Calculator Pro</h1>\r\n              <p className=\"text-muted-foreground\">Comprehensive Environmental Impact Assessment with AI</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-6\">\r\n            <div className=\"text-right\">\r\n              <div className=\"text-sm text-muted-foreground\">Total Emissions</div>\r\n              <div className=\"text-lg font-bold text-destructive\">\r\n                {(totalEmissions / 1000).toFixed(1)} t CO₂-e\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex space-x-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={actions.resetAll}\r\n                className=\"text-destructive hover:text-destructive\"\r\n              >\r\n                <RotateCcw className=\"w-4 h-4 mr-2\" />\r\n                Reset All\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => actions.exportData('pdf')}\r\n              >\r\n                <Download className=\"w-4 h-4 mr-2\" />\r\n                Export PDF\r\n              </Button>\r\n              \r\n              <SaveCalculationDialog\r\n                onSave={onSave}\r\n                isSaving={isSaving}\r\n                totalEmissions={totalEmissions}\r\n                complianceScore={complianceScore}\r\n              >\r\n                <Button variant=\"outline\">\r\n                  <Save className=\"w-4 h-4 mr-2\" />\r\n                  {user ? 'Save' : 'Sign in to Save'}\r\n                </Button>\r\n              </SaveCalculationDialog>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Building, Star, Leaf, Zap, Award, Link, Brain, BarChart3, Shield, RotateCcw } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { HelpButton } from './help';\r\nimport { CalculatorActions } from './hooks/useCalculatorActions';\r\n\r\ninterface CalculatorTabsProps {\r\n  activeTab: string;\r\n  onTabChange: (tab: string) => void;\r\n  onHelpModalOpen: (modal: string) => void;\r\n  actions: CalculatorActions;\r\n}\r\n\r\nexport const CalculatorTabs: React.FC<CalculatorTabsProps> = ({\r\n  activeTab,\r\n  onTabChange,\r\n  onHelpModalOpen,\r\n  actions\r\n}) => {\r\n  const tabs = [\r\n    { id: 'dashboard', label: 'Dashboard', icon: BarChart3 },\r\n    { id: 'ncc', label: 'NCC', icon: Building, help: true },\r\n    { id: 'nabers', label: 'NABERS', icon: Star, help: true },\r\n    { id: 'lca', label: 'LCA', icon: Leaf, help: true },\r\n    { id: 'scope', label: 'Scope 1-3', icon: Zap, help: true },\r\n    { id: 'leed', label: 'LEED', icon: Award, help: true },\r\n    { id: 'breeam', label: 'BREEAM', icon: Award, help: true },\r\n    { id: 'greenstar', label: 'Green Star', icon: Star, help: true },\r\n    { id: 'construction', label: 'Integrations', icon: Link },\r\n    { id: 'ai', label: 'AI Assistant', icon: Brain },\r\n    { id: 'admin', label: 'Admin Status', icon: Shield }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between gap-4 mb-6\">\r\n      <Tabs value={activeTab} onValueChange={onTabChange} className=\"flex-1\">\r\n        <TabsList className=\"grid grid-cols-5 lg:grid-cols-11 w-full\">\r\n          {tabs.map((tab) => {\r\n            const Icon = tab.icon;\r\n            return (\r\n              <TabsTrigger key={tab.id} value={tab.id} className=\"flex items-center gap-2 relative\">\r\n                <Icon className=\"h-4 w-4\" />\r\n                <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                {tab.help && (\r\n                  <HelpButton \r\n                    onClick={() => onHelpModalOpen(tab.id)} \r\n                    className=\"ml-1\" \r\n                    asIcon \r\n                  />\r\n                )}\r\n              </TabsTrigger>\r\n            );\r\n          })}\r\n        </TabsList>\r\n      </Tabs>\r\n\r\n      {/* Calculator-specific reset button */}\r\n      {activeTab !== 'dashboard' && activeTab !== 'construction' && activeTab !== 'ai' && activeTab !== 'admin' && (\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => actions.resetCalculator(activeTab)}\r\n          className=\"text-destructive hover:text-destructive\"\r\n        >\r\n          <RotateCcw className=\"w-4 h-4 mr-2\" />\r\n          Reset {activeTab.toUpperCase()}\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};","import { useCallback } from 'react';\r\nimport { toast } from 'sonner';\r\n\r\nexport interface CalculatorActions {\r\n  resetAll: () => void;\r\n  resetCalculator: (calculatorType: string) => void;\r\n  applyTemplate: (template: any) => void;\r\n  exportData: (format: 'pdf' | 'csv' | 'json') => void;\r\n}\r\n\r\nexport const useCalculatorActions = (\r\n  calculatorData: any,\r\n  updateHandlers: Record<string, (data: any) => void>,\r\n  totalEmissions: number\r\n) => {\r\n  const resetAll = useCallback(() => {\r\n    // Reset all calculator states\r\n    Object.keys(updateHandlers).forEach(calculatorType => {\r\n      updateHandlers[calculatorType]({});\r\n    });\r\n\r\n    toast(\"All calculators reset\", {\r\n      description: \"All calculation data has been cleared\",\r\n    });\r\n  }, [updateHandlers]);\r\n\r\n  const resetCalculator = useCallback((calculatorType: string) => {\r\n    if (updateHandlers[calculatorType]) {\r\n      updateHandlers[calculatorType]({});\r\n      toast(`${calculatorType.toUpperCase()} calculator reset`, {\r\n        description: \"Calculator data has been cleared\",\r\n      });\r\n    }\r\n  }, [updateHandlers]);\r\n\r\n  const applyTemplate = useCallback((template: any) => {\r\n    // Apply template defaults to relevant calculators\r\n    template.calculatorTypes.forEach((calculatorType: string) => {\r\n      const defaults = template.defaultValues[calculatorType];\r\n      if (defaults && updateHandlers[calculatorType]) {\r\n        updateHandlers[calculatorType](defaults);\r\n      }\r\n    });\r\n\r\n    toast(\"Template applied\", {\r\n      description: `${template.name} defaults have been applied to calculators`,\r\n    });\r\n  }, [updateHandlers]);\r\n\r\n  const exportData = useCallback(async (format: 'pdf' | 'csv' | 'json') => {\r\n    try {\r\n      const exportData = {\r\n        metadata: {\r\n          exportDate: new Date().toISOString(),\r\n          totalEmissions,\r\n          calculatorsUsed: Object.keys(calculatorData).filter(key => \r\n            calculatorData[key] && Object.keys(calculatorData[key]).length > 0\r\n          )\r\n        },\r\n        ...calculatorData\r\n      };\r\n\r\n      switch (format) {\r\n        case 'csv':\r\n          await exportToCSV(exportData);\r\n          break;\r\n        case 'json':\r\n          await exportToJSON(exportData);\r\n          break;\r\n        case 'pdf':\r\n          await exportToPDF(exportData);\r\n          break;\r\n      }\r\n\r\n      toast(\"Export successful\", {\r\n        description: `Data exported as ${format.toUpperCase()}`,\r\n      });\r\n    } catch (error) {\r\n      toast(\"Export failed\", {\r\n        description: \"There was an error exporting your data\",\r\n      });\r\n    }\r\n  }, [calculatorData, totalEmissions]);\r\n\r\n  return {\r\n    resetAll,\r\n    resetCalculator,\r\n    applyTemplate,\r\n    exportData\r\n  };\r\n};\r\n\r\n// Export utility functions\r\nconst exportToCSV = async (data: any) => {\r\n  const csvRows = [['Section', 'Metric', 'Value', 'Unit']];\r\n  \r\n  Object.keys(data).forEach(section => {\r\n    if (section !== 'metadata' && data[section]) {\r\n      const sectionData = data[section];\r\n      Object.keys(sectionData).forEach(key => {\r\n        if (typeof sectionData[key] === 'number') {\r\n          csvRows.push([section.toUpperCase(), key, sectionData[key].toString(), '']);\r\n        }\r\n      });\r\n    }\r\n  });\r\n  \r\n  const csvContent = csvRows.map(row => row.join(',')).join('\\n');\r\n  downloadFile(csvContent, 'text/csv', 'carbon-calculator-export.csv');\r\n};\r\n\r\nconst exportToJSON = async (data: any) => {\r\n  const jsonContent = JSON.stringify(data, null, 2);\r\n  downloadFile(jsonContent, 'application/json', 'carbon-calculator-export.json');\r\n};\r\n\r\nconst exportToPDF = async (data: any) => {\r\n  // Import jsPDF dynamically to avoid bundle size issues\r\n  const jsPDF = (await import('jspdf')).default;\r\n  await import('jspdf-autotable');\r\n  \r\n  const doc = new jsPDF();\r\n  \r\n  // Title\r\n  doc.setFontSize(20);\r\n  doc.text('Carbon Footprint Report', 20, 20);\r\n  \r\n  // Summary\r\n  doc.setFontSize(14);\r\n  doc.text(`Total Emissions: ${(data.metadata.totalEmissions / 1000).toFixed(2)} t CO₂-e`, 20, 40);\r\n  doc.text(`Export Date: ${new Date(data.metadata.exportDate).toLocaleDateString()}`, 20, 50);\r\n  \r\n  // Data table\r\n  const tableData: any[] = [];\r\n  Object.keys(data).forEach(section => {\r\n    if (section !== 'metadata' && data[section]) {\r\n      const sectionData = data[section];\r\n      Object.keys(sectionData).forEach(key => {\r\n        if (typeof sectionData[key] === 'number') {\r\n          tableData.push([section.toUpperCase(), key, sectionData[key].toFixed(2), 'kg CO₂-e']);\r\n        }\r\n      });\r\n    }\r\n  });\r\n  \r\n  (doc as any).autoTable({\r\n    startY: 70,\r\n    head: [['Calculator', 'Metric', 'Value', 'Unit']],\r\n    body: tableData,\r\n  });\r\n  \r\n  doc.save('carbon-footprint-report.pdf');\r\n};\r\n\r\nconst downloadFile = (content: string, mimeType: string, filename: string) => {\r\n  const blob = new Blob([content], { type: mimeType });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = filename;\r\n  a.click();\r\n  URL.revokeObjectURL(url);\r\n};","\r\nimport React, { useState, Suspense } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Tabs, TabsContent } from '@/components/ui/tabs';\r\nimport { Button } from '@/components/ui/button';\r\nimport { BarChart3, Link, Brain } from 'lucide-react';\r\nimport { LCAGuide, ScopeGuide, LEEDGuide, BREEAMGuide, GreenStarGuide } from './help';\r\nimport { EnhancedNCCGuide } from './help/guides/EnhancedNCCGuide';\r\nimport { EnhancedNABERSGuide } from './help/guides/EnhancedNABERSGuide';\r\nimport { RealTimeMetrics } from './dashboard/RealTimeMetrics';\r\nimport { ExportManager } from './export/ExportManager';\r\nimport { AIAssistant } from './ai/AIAssistant';\r\nimport { usePersonalizedCalculatorState } from './hooks/usePersonalizedCalculatorState';\r\nimport { PersonalizedCalculatorDashboard } from './PersonalizedCalculatorDashboard';\r\nimport { CalculatorTemplateSelector } from './templates/CalculatorTemplateSelector';\r\nimport { useAuth } from '@/contexts/auth';\r\nimport { StreamlinedErrorBoundary } from '@/components/error/StreamlinedErrorBoundary';\r\nimport { ProgressiveLoadingState } from '@/components/loading/ProgressiveLoadingState';\r\nimport { useLazyComponent } from '@/hooks/useLazyComponent';\r\nimport centralizedErrorReporting from '@/services/error/CentralizedErrorReporting';\r\nimport { CalculatorHeader } from './CalculatorHeader';\r\nimport { CalculatorTabs } from './CalculatorTabs';\r\nimport { useCalculatorActions } from './hooks/useCalculatorActions';\r\nimport { LoadingSpinner } from '@/components/LoadingSpinner';\r\n\r\n// Phase 2: Enhanced lazy loading with intelligent preloading\r\nconst NCCCalculator = React.lazy(() => import('./calculators/NCCCalculator').then(m => ({ default: m.NCCCalculator })));\r\nconst NABERSCalculator = React.lazy(() => import('./calculators/NABERSCalculator').then(m => ({ default: m.NABERSCalculator })));\r\nconst LCACalculator = React.lazy(() => import('./calculators/LCACalculator').then(m => ({ default: m.LCACalculator })));\r\nconst ScopeCalculator = React.lazy(() => import('./calculators/ScopeCalculator').then(m => ({ default: m.ScopeCalculator })));\r\nconst LEEDCalculator = React.lazy(() => import('./calculators/LEEDCalculator').then(m => ({ default: m.LEEDCalculator })));\r\nconst BREEAMCalculator = React.lazy(() => import('./calculators/BREEAMCalculator').then(m => ({ default: m.BREEAMCalculator })));\r\nconst GreenStarCalculator = React.lazy(() => import('./calculators/GreenStarCalculator').then(m => ({ default: m.GreenStarCalculator })));\r\nconst ConstructionIntegrations = React.lazy(() => import('./integrations/ConstructionIntegrations').then(m => ({ default: m.ConstructionIntegrations })));\r\n\r\n// Phase 2: Lazy admin components - separate bundle\r\nconst LazyAdminStatusChecker = React.lazy(() => import('@/components/lazy/LazyAdminComponents').then(m => ({ default: m.LazyAdminStatusChecker })));\r\n\r\ninterface NewCalculatorProps {\r\n  demoMode?: boolean;\r\n}\r\n\r\ninterface CalculatorData {\r\n  ncc: any;\r\n  nabers: any;\r\n  lca: any;\r\n  scope: any;\r\n  leed: any;\r\n  breeam: any;\r\n  greenStar: any;\r\n}\r\n\r\nconst NewCalculator: React.FC<NewCalculatorProps> = ({ demoMode = false }) => {\r\n  const [activeTab, setActiveTab] = useState('dashboard');\r\n  const [helpModals, setHelpModals] = useState({\r\n    ncc: false, nabers: false, lca: false, scope: false,\r\n    leed: false, breeam: false, greenstar: false\r\n  });\r\n  const { user, profile } = useAuth();\r\n\r\n  // Phase 2: Intelligent preloading based on user behavior\r\n  const { preload: preloadNCC } = useLazyComponent(() => import('./calculators/NCCCalculator').then(m => ({ default: m.NCCCalculator })));\r\n  const { preload: preloadNABERS } = useLazyComponent(() => import('./calculators/NABERSCalculator').then(m => ({ default: m.NABERSCalculator })));\r\n  const { preload: preloadLCA } = useLazyComponent(() => import('./calculators/LCACalculator').then(m => ({ default: m.LCACalculator })));\r\n\r\n  // Track user journey for error context\r\n  React.useEffect(() => {\r\n    centralizedErrorReporting.trackUserJourney('calculator_loaded', 'NewCalculator', {\r\n      activeTab,\r\n      userAuthenticated: !!user,\r\n      demoMode\r\n    });\r\n  }, [activeTab, user, demoMode]);\r\n  \r\n  const {\r\n    calculatorData,\r\n    savedCalculations,\r\n    isLoading,\r\n    isSaving,\r\n    totalEmissions,\r\n    complianceScore,\r\n    updateHandlers,\r\n    saveCalculation,\r\n    loadCalculation,\r\n    applyPersonalizedDefaults,\r\n    applyTemplateDefaults,\r\n    getRecommendedMaterials,\r\n    checkPersonalizedCompliance,\r\n    getCalculationInsights,\r\n    isApplyingDefaults,\r\n    calculationHistory\r\n  } = usePersonalizedCalculatorState();\r\n\r\n  // Calculator actions (reset, template, export)\r\n  const actions = useCalculatorActions(calculatorData, updateHandlers, totalEmissions);\r\n\r\n  // Template handling with proper integration\r\n  const handleTemplateSelect = (template: any) => {\r\n    applyTemplateDefaults(template);\r\n    \r\n    // Switch to the primary calculator tab\r\n    if (template.calculatorTypes.length > 0) {\r\n      setActiveTab(template.calculatorTypes[0]);\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20\">\r\n      {/* Header */}\r\n      <CalculatorHeader\r\n        totalEmissions={totalEmissions}\r\n        complianceScore={complianceScore}\r\n        isSaving={isSaving}\r\n        user={user}\r\n        actions={actions}\r\n        onSave={saveCalculation}\r\n      />\r\n\r\n      {/* Main Content */}\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\r\n          <CalculatorTabs\r\n            activeTab={activeTab}\r\n            onTabChange={(tab) => {\r\n              setActiveTab(tab);\r\n              // Phase 2: Intelligent preloading based on tab hover/selection\r\n              if (tab === 'ncc') preloadNCC();\r\n              else if (tab === 'nabers') preloadNABERS();\r\n              else if (tab === 'lca') preloadLCA();\r\n              \r\n              centralizedErrorReporting.trackUserJourney('tab_changed', 'Calculator', { tab });\r\n            }}\r\n            onHelpModalOpen={(modal) => setHelpModals(prev => ({ ...prev, [modal]: true }))}\r\n            actions={actions}\r\n          />\r\n\r\n          <TabsContent value=\"dashboard\" className=\"space-y-6\">\r\n            {/* Personalized Calculator Dashboard */}\r\n            {user ? (\r\n              <PersonalizedCalculatorDashboard\r\n                totalEmissions={totalEmissions}\r\n                complianceScore={complianceScore}\r\n                insights={getCalculationInsights()}\r\n                complianceCheck={checkPersonalizedCompliance('overall')}\r\n                recommendedMaterials={getRecommendedMaterials()}\r\n                onApplyDefaults={applyPersonalizedDefaults}\r\n                calculationHistory={calculationHistory}\r\n                isApplyingDefaults={isApplyingDefaults}\r\n                onTemplateSelect={handleTemplateSelect}\r\n                userFocusAreas={profile?.focus_areas || []}\r\n              />\r\n            ) : (\r\n              <>\r\n                {/* Calculator Templates for non-authenticated users */}\r\n                <CalculatorTemplateSelector\r\n                  onSelectTemplate={handleTemplateSelect}\r\n                  userFocusAreas={[]}\r\n                  recentTemplates={[]}\r\n                />\r\n\r\n                {/* Real-time Metrics for non-authenticated users */}\r\n                <RealTimeMetrics calculatorData={calculatorData} totalEmissions={totalEmissions} />\r\n                \r\n                {/* Export Manager */}\r\n                <ExportManager calculatorData={calculatorData} totalEmissions={totalEmissions} />\r\n\r\n                {/* Default Dashboard for non-authenticated users */}\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <BarChart3 className=\"h-5 w-5\" />\r\n                      Carbon Footprint Dashboard\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                      <Card className=\"bg-red-50 dark:bg-red-950/20\">\r\n                        <CardContent className=\"p-4\">\r\n                          <div className=\"text-sm text-red-600 dark:text-red-400\">Total Emissions</div>\r\n                          <div className=\"text-2xl font-bold text-red-700 dark:text-red-300\">{(totalEmissions / 1000).toFixed(1)} t</div>\r\n                          <div className=\"text-xs text-red-500\">CO₂ equivalent</div>\r\n                        </CardContent>\r\n                      </Card>\r\n                      \r\n                      <Card className=\"bg-green-50 dark:bg-green-950/20\">\r\n                        <CardContent className=\"p-4\">\r\n                          <div className=\"text-sm text-green-600 dark:text-green-400\">Standards Compliance</div>\r\n                          <div className=\"text-2xl font-bold text-green-700 dark:text-green-300\">{complianceScore}%</div>\r\n                          <div className=\"text-xs text-green-500\">Compliance score</div>\r\n                        </CardContent>\r\n                      </Card>\r\n                      \r\n                      <Card className=\"bg-blue-50 dark:bg-blue-950/20\">\r\n                        <CardContent className=\"p-4\">\r\n                          <div className=\"text-sm text-blue-600 dark:text-blue-400\">Sign In</div>\r\n                          <div className=\"text-lg font-bold text-blue-700 dark:text-blue-300\">Required</div>\r\n                          <div className=\"text-xs text-blue-500\">For personalization</div>\r\n                        </CardContent>\r\n                      </Card>\r\n                      \r\n                      <Card className=\"bg-purple-50 dark:bg-purple-950/20\">\r\n                        <CardContent className=\"p-4\">\r\n                          <div className=\"text-sm text-purple-600 dark:text-purple-400\">AI Analysis</div>\r\n                          <div className=\"text-2xl font-bold text-purple-700 dark:text-purple-300\">Ready</div>\r\n                          <div className=\"text-xs text-purple-500\">Claude Sonnet 4</div>\r\n                        </CardContent>\r\n                      </Card>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </>\r\n            )}\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Link className=\"h-5 w-5\" />\r\n                  Construction Management Integration\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                  {[\r\n                    'Procore', 'Autodesk ACC', 'Buildertrend', 'PlanGrid',\r\n                    'Fieldwire', 'Smartsheet', 'Custom API', 'Real-time Sync'\r\n                  ].map((platform) => (\r\n                    <Card key={platform} className=\"p-3 text-center\">\r\n                      <div className=\"text-sm font-medium\">{platform}</div>\r\n                      <div className=\"text-xs text-green-600\">Available</div>\r\n                    </Card>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Brain className=\"h-5 w-5\" />\r\n                  Claude Sonnet 4 AI Features\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <Card className=\"p-4\">\r\n                    <h4 className=\"font-medium text-card-foreground\">AI Analysis</h4>\r\n                    <p className=\"text-sm text-muted-foreground mt-1\">Comprehensive carbon footprint analysis with 92%+ confidence</p>\r\n                  </Card>\r\n                  <Card className=\"p-4\">\r\n                    <h4 className=\"font-medium text-card-foreground\">Smart Recommendations</h4>\r\n                    <p className=\"text-sm text-muted-foreground mt-1\">Prioritized action plans with ROI calculations</p>\r\n                  </Card>\r\n                  <Card className=\"p-4\">\r\n                    <h4 className=\"font-medium text-card-foreground\">Interactive Assistant</h4>\r\n                    <p className=\"text-sm text-muted-foreground mt-1\">Real-time consultation for carbon optimization</p>\r\n                  </Card>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"ncc\">\r\n            <StreamlinedErrorBoundary feature=\"NCC Calculator\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading NCC Calculator...\" />}>\r\n                <NCCCalculator \r\n                  onCalculationUpdate={updateHandlers.ncc} \r\n                  defaultValues={calculatorData.ncc} \r\n                />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"nabers\">\r\n            <StreamlinedErrorBoundary feature=\"NABERS Calculator\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading NABERS Calculator...\" />}>\r\n                <NABERSCalculator onCalculationUpdate={updateHandlers.nabers} />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"lca\">\r\n            <StreamlinedErrorBoundary feature=\"LCA Calculator\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading LCA Calculator...\" />}>\r\n                <LCACalculator onCalculationUpdate={updateHandlers.lca} />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"scope\">\r\n            <StreamlinedErrorBoundary feature=\"Scope Calculator\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading Scope Calculator...\" />}>\r\n                <ScopeCalculator onCalculationUpdate={updateHandlers.scope} />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"leed\">\r\n            <StreamlinedErrorBoundary feature=\"LEED Calculator\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading LEED Calculator...\" />}>\r\n                <LEEDCalculator onCalculationUpdate={updateHandlers.leed} />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"breeam\">\r\n            <StreamlinedErrorBoundary feature=\"BREEAM Calculator\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading BREEAM Calculator...\" />}>\r\n                <BREEAMCalculator onCalculationUpdate={updateHandlers.breeam} />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"greenstar\">\r\n            <StreamlinedErrorBoundary feature=\"Green Star Calculator\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading Green Star Calculator...\" />}>\r\n                <GreenStarCalculator onCalculationUpdate={updateHandlers.greenStar} />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"construction\">\r\n            <StreamlinedErrorBoundary feature=\"Construction Integrations\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading construction integrations...\" />}>\r\n                <ConstructionIntegrations />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"ai\">\r\n            <StreamlinedErrorBoundary feature=\"AI Assistant\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading AI Assistant...\" />}>\r\n                <AIAssistant calculatorData={calculatorData} totalEmissions={totalEmissions} />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"admin\">\r\n            <StreamlinedErrorBoundary feature=\"Admin Status\">\r\n              <Suspense fallback={<ProgressiveLoadingState type=\"card\" size=\"lg\" message=\"Loading admin panel...\" />}>\r\n                <LazyAdminStatusChecker />\r\n              </Suspense>\r\n            </StreamlinedErrorBoundary>\r\n          </TabsContent>\r\n        </Tabs>\r\n\r\n        {/* Enhanced Help Modals */}\r\n        <EnhancedNCCGuide \r\n          open={helpModals.ncc} \r\n          onOpenChange={(open) => setHelpModals(prev => ({ ...prev, ncc: open }))} \r\n        />\r\n        <EnhancedNABERSGuide \r\n          open={helpModals.nabers} \r\n          onOpenChange={(open) => setHelpModals(prev => ({ ...prev, nabers: open }))} \r\n        />\r\n        <LCAGuide \r\n          open={helpModals.lca} \r\n          onOpenChange={(open) => setHelpModals(prev => ({ ...prev, lca: open }))} \r\n        />\r\n        <ScopeGuide \r\n          open={helpModals.scope} \r\n          onOpenChange={(open) => setHelpModals(prev => ({ ...prev, scope: open }))} \r\n        />\r\n        <LEEDGuide \r\n          open={helpModals.leed} \r\n          onOpenChange={(open) => setHelpModals(prev => ({ ...prev, leed: open }))} \r\n        />\r\n        <BREEAMGuide \r\n          open={helpModals.breeam} \r\n          onOpenChange={(open) => setHelpModals(prev => ({ ...prev, breeam: open }))} \r\n        />\r\n        <GreenStarGuide \r\n          open={helpModals.greenstar} \r\n          onOpenChange={(open) => setHelpModals(prev => ({ ...prev, greenstar: open }))} \r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewCalculator;\r\n","\r\nimport React from 'react';\r\nimport NewCalculator from './calculator/NewCalculator';\r\n\r\nexport interface CarbonCalculatorProps {\r\n  demoMode?: boolean;\r\n}\r\n\r\nconst CarbonCalculator = ({ demoMode = false }: CarbonCalculatorProps) => {\r\n  return (\r\n    <div className=\"container mx-auto px-4 md:px-6 pb-16\">\r\n      <NewCalculator demoMode={demoMode} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarbonCalculator;\r\n"],"file":"assets/CarbonCalculator-C0wPmJ0J.js"}