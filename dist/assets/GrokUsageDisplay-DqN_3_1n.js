import{w as L,g as T,r as d,j as e,b as l,c as o,d as i,D as j,e as x,ab as v,a5 as G,aQ as U,ad as w,aD as C,aR as q}from"./index-CHtXOOwB.js";import{C as u}from"./chart-no-axes-column-increasing-xe5XYUDs.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=L("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),D=({compact:S=!1,className:c=""})=>{const{user:h}=T(),[s,A]=d.useState(null),[I,m]=d.useState(!0),[g,F]=d.useState(null);d.useEffect(()=>{if(!h){m(!1);return}(async()=>{try{m(!0);const t=new Date,E=new Date(t.getFullYear(),t.getMonth(),1).toISOString(),Q=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString();let f=0,p=0;const y={};let N="Never";const k=localStorage.getItem("grok_usage");if(k)try{const n=JSON.parse(k);f=n.totalTokens||0,p=n.requestCount||0,Object.assign(y,n.usageByFeature||{}),N=n.lastUsed||"Never"}catch(n){console.warn("Failed to parse stored usage data",n)}A({totalTokens:f,usageByFeature:y,requestCount:p,lastUsed:N,monthlyQuota:1e5})}catch(t){console.error("Error fetching Grok usage:",t),F("Failed to load usage data. Please try again later.")}finally{m(!1)}})()},[h]);const r=()=>!s||s.monthlyQuota===0?0:Math.min(100,s.totalTokens/s.monthlyQuota*100),b=()=>{const a=r();return a>90?"bg-red-600":a>75?"bg-amber-500":"bg-carbon-600"};return h?I?e.jsxs(l,{className:c,children:[e.jsxs(o,{children:[e.jsx(i,{children:"Grok AI Usage"}),e.jsx(j,{children:"Loading usage data..."})]}),e.jsx(x,{children:e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx("div",{className:"animate-pulse bg-carbon-100 dark:bg-carbon-700 rounded-md w-full h-6"})})})]}):g?e.jsxs(l,{className:c,children:[e.jsx(o,{children:e.jsx(i,{children:"Grok AI Usage"})}),e.jsx(x,{children:e.jsxs(v,{variant:"destructive",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx(U,{children:"Error"}),e.jsx(w,{children:g})]})})]}):S?e.jsxs(l,{className:c,children:[e.jsx(o,{className:"pb-2",children:e.jsxs(i,{className:"text-sm flex items-center",children:[e.jsx(u,{className:"h-4 w-4 mr-2 text-carbon-600"}),"Grok AI Tokens"]})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{value:r(),className:"h-2",indicatorClassName:b()}),e.jsxs("div",{className:"flex justify-between text-xs text-carbon-600 dark:text-carbon-300",children:[e.jsxs("span",{children:[s==null?void 0:s.totalTokens.toLocaleString()," used"]}),e.jsxs("span",{children:[r().toFixed(1),"%"]})]})]})})]}):e.jsxs(l,{className:c,children:[e.jsxs(o,{children:[e.jsxs(i,{className:"flex items-center",children:[e.jsx(u,{className:"h-5 w-5 mr-2 text-carbon-600"}),"Grok AI Usage"]}),e.jsx(j,{children:"Your current Grok AI usage for this billing period"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Token Usage"}),e.jsxs("span",{className:"text-sm text-carbon-600 dark:text-carbon-300",children:[s==null?void 0:s.totalTokens.toLocaleString()," / ",s==null?void 0:s.monthlyQuota.toLocaleString()]})]}),e.jsx(C,{value:r(),className:"h-2",indicatorClassName:b()}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("span",{className:"text-xs text-carbon-600 dark:text-carbon-300",children:[r().toFixed(1),"% used"]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Usage by Feature"}),e.jsx("div",{className:"space-y-1.5",children:Object.entries((s==null?void 0:s.usageByFeature)||{}).map(([a,t])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs capitalize",children:a.replace("_"," ")}),e.jsxs("span",{className:"text-xs text-carbon-600 dark:text-carbon-300",children:[t.toLocaleString()," tokens"]})]},a))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{className:"bg-carbon-50 dark:bg-carbon-800 p-3 rounded-md",children:[e.jsx("div",{className:"text-xs text-carbon-500 dark:text-carbon-400",children:"Total Requests"}),e.jsx("div",{className:"text-lg font-semibold",children:(s==null?void 0:s.requestCount)||0})]}),e.jsxs("div",{className:"bg-carbon-50 dark:bg-carbon-800 p-3 rounded-md",children:[e.jsx("div",{className:"text-xs text-carbon-500 dark:text-carbon-400",children:"Last Used"}),e.jsx("div",{className:"text-sm font-semibold",children:(s==null?void 0:s.lastUsed)!=="Never"?new Date((s==null?void 0:s.lastUsed)||"").toLocaleDateString():"Never"})]})]}),r()>80&&e.jsxs(v,{children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(U,{children:"High Usage Alert"}),e.jsxs(w,{children:["You've used ",r().toFixed(0),"% of your monthly quota. Consider upgrading your plan for additional capacity."]})]})]})})]}):e.jsx(l,{className:c,children:e.jsxs(o,{children:[e.jsxs(i,{className:"flex items-center",children:[e.jsx(u,{className:"h-5 w-5 mr-2 text-carbon-600"}),"Grok AI Usage"]}),e.jsx(j,{children:"Sign in to view your Grok AI usage statistics"})]})})};export{D as G,B as K};
//# sourceMappingURL=GrokUsageDisplay-DqN_3_1n.js.map
