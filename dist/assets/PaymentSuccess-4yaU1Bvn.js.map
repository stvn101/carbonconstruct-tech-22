{"version":3,"file":"PaymentSuccess-4yaU1Bvn.js","sources":["../../src/components/payment/PaymentSuccess.tsx"],"sourcesContent":["\r\nimport { useEffect } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { useAuth } from \"@/contexts/auth\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { CheckCircle2 } from \"lucide-react\";\r\n\r\ninterface PaymentSuccessProps {\r\n  onClose?: () => void;\r\n}\r\n\r\nconst PaymentSuccess = ({ onClose }: PaymentSuccessProps) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user } = useAuth();\r\n  \r\n  useEffect(() => {\r\n    const verifyPayment = async () => {\r\n      if (!user) return;\r\n      \r\n      try {\r\n        await supabase.functions.invoke('verify-payment');\r\n      } catch (error) {\r\n        console.error(\"Error verifying payment:\", error);\r\n      }\r\n    };\r\n    \r\n    // Check if we're coming from a successful payment\r\n    const searchParams = new URLSearchParams(location.search);\r\n    if (searchParams.get('payment') === 'success') {\r\n      verifyPayment();\r\n      toast.success(\"Payment successful! Thank you for your purchase.\");\r\n    }\r\n  }, [user, location.search]);\r\n  \r\n  const handleClose = () => {\r\n    if (onClose) {\r\n      onClose();\r\n    } else {\r\n      navigate(\"/dashboard\");\r\n    }\r\n  };\r\n  \r\n  const handleViewHistory = () => {\r\n    navigate(\"/dashboard?tab=payments\");\r\n  };\r\n  \r\n  return (\r\n    <Card className=\"max-w-md mx-auto\">\r\n      <CardHeader className=\"text-center\">\r\n        <CheckCircle2 className=\"h-16 w-16 text-green-500 mx-auto mb-4\" />\r\n        <CardTitle className=\"text-2xl\">Payment Successful</CardTitle>\r\n        <CardDescription>\r\n          Thank you for your purchase. Your payment has been processed successfully.\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <p className=\"text-center text-muted-foreground\">\r\n          Your subscription will be activated shortly. You can now access premium features of CarbonConstruct.\r\n        </p>\r\n      </CardContent>\r\n      <CardFooter className=\"flex flex-col sm:flex-row gap-2 justify-center\">\r\n        <Button onClick={handleClose}>\r\n          Continue to Dashboard\r\n        </Button>\r\n        <Button variant=\"outline\" onClick={handleViewHistory}>\r\n          View Payment History\r\n        </Button>\r\n      </CardFooter>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default PaymentSuccess;\r\n"],"names":["PaymentSuccess","onClose","navigate","useNavigate","location","useLocation","user","useAuth","useEffect","verifyPayment","supabase","error","toast","handleClose","handleViewHistory","jsxs","Card","CardHeader","jsx","CheckCircle2","CardTitle","CardDescription","CardContent","CardFooter","Button"],"mappings":"2IAcA,MAAMA,EAAiB,CAAC,CAAE,QAAAC,KAAmC,CAC3D,MAAMC,EAAWC,EAAA,EACXC,EAAWC,EAAA,EACX,CAAE,KAAAC,CAAA,EAASC,EAAA,EAEjBC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAgB,SAAY,CAChC,GAAKH,EAEL,GAAI,CACF,MAAMI,EAAS,UAAU,OAAO,gBAAgB,CAClD,OAASC,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,EAGqB,IAAI,gBAAgBP,EAAS,MAAM,EACvC,IAAI,SAAS,IAAM,YAClCK,EAAA,EACAG,EAAM,QAAQ,kDAAkD,EAEpE,EAAG,CAACN,EAAMF,EAAS,MAAM,CAAC,EAE1B,MAAMS,EAAc,IAAM,CACpBZ,EACFA,EAAA,EAEAC,EAAS,YAAY,CAEzB,EAEMY,EAAoB,IAAM,CAC9BZ,EAAS,yBAAyB,CACpC,EAEA,OACEa,EAAAA,KAACC,EAAA,CAAK,UAAU,mBACd,SAAA,CAAAD,EAAAA,KAACE,EAAA,CAAW,UAAU,cACpB,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAa,UAAU,uCAAA,CAAwC,EAChED,EAAAA,IAACE,EAAA,CAAU,UAAU,WAAW,SAAA,qBAAkB,EAClDF,EAAAA,IAACG,GAAgB,SAAA,4EAAA,CAEjB,CAAA,EACF,QACCC,EAAA,CACC,SAAAJ,EAAAA,IAAC,KAAE,UAAU,oCAAoC,gHAEjD,CAAA,CACF,EACAH,EAAAA,KAACQ,EAAA,CAAW,UAAU,iDACpB,SAAA,CAAAL,EAAAA,IAACM,EAAA,CAAO,QAASX,EAAa,SAAA,wBAE9B,QACCW,EAAA,CAAO,QAAQ,UAAU,QAASV,EAAmB,SAAA,sBAAA,CAEtD,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}