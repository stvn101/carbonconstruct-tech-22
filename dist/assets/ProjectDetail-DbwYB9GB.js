import{j as e,q as y,a as v,g as w,as as E,r as c,N as l,F as d,H as D,m as F,bw as I,i as n,bx as j}from"./index-CHtXOOwB.js";const S=({initialData:t,onSubmit:r,onDelete:a,isEditing:m})=>e.jsx("div",{className:"p-8 text-center",children:e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-amber-800 mb-2",children:"Project Form Under Construction"}),e.jsx("p",{className:"text-amber-700 mb-4",children:"The project form is being rebuilt with the new calculator system."}),t&&e.jsxs("div",{className:"text-left bg-white rounded p-4 mt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Current Project Data:"}),e.jsx("pre",{className:"text-sm text-gray-600 overflow-auto",children:JSON.stringify(t,null,2)})]})]})}),U=()=>{const{projectId:t}=y(),r=v(),{user:a}=w(),{updateProject:m,deleteProject:g}=E(),[x,u]=c.useState(null),[b,h]=c.useState(!0),[o,p]=c.useState(null);c.useEffect(()=>{if(!t){console.error("Project ID is missing."),r("/projects");return}(async()=>{h(!0);try{const s=await I(t);s?u(s):(p(new Error("Project not found")),n.error("Project not found."),r("/projects"))}catch(s){p(s instanceof Error?s:new Error("Failed to load project")),j("Failed to load project. Please try again.","project-load-error"),r("/projects")}finally{h(!1)}})()},[t,r]);const N=async i=>{if(!(a!=null&&a.id)||!t){console.error("User ID or Project ID is missing.");return}try{const s={...i,user_id:a.id,id:t},f=await m(s);f?(n.success("Project updated successfully!"),u(f)):n.error("Failed to update project.")}catch{j("Failed to update project. Please try again.","project-update-error")}},P=async()=>{if(!t){console.error("Project ID is missing.");return}try{await g(t),n.success("Project deleted successfully!"),r("/projects")}catch{j("Failed to delete project. Please try again.","project-delete-error")}};return b?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(l,{}),e.jsx("div",{className:"flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-carbon-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading project details..."})]})}),e.jsx(d,{})]}):o||!x?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(l,{}),e.jsx("div",{className:"flex-grow flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-red-600",children:["Error: ",(o==null?void 0:o.message)||"Project not found"]})})}),e.jsx(d,{})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsxs(D,{children:[e.jsx("title",{children:"Project Details | CarbonConstruct"}),e.jsx("meta",{name:"description",content:"View and edit project details."})]}),e.jsx(l,{}),e.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Edit Project"}),e.jsx("p",{className:"text-muted-foreground",children:"Update your project details and calculations."})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:e.jsx(S,{initialData:x,onSubmit:N,onDelete:P,isEditing:!0})})]})})}),e.jsx(d,{})]})};export{U as default};
//# sourceMappingURL=ProjectDetail-DbwYB9GB.js.map
