var Z=Object.defineProperty;var ee=(l,a,t)=>a in l?Z(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;var P=(l,a,t)=>ee(l,typeof a!="symbol"?a+"":a,t);import{s as w,r as h,j as e,b as S,c as z,d as G,e as $,a4 as M,I as R,B,b3 as ae,br as se,ak as H,b4 as te,b5 as re,b6 as ne,S as ie,af as W,ag as U,ah as V,ai as Q,aj as _,O as X,G as Y,a5 as K,aa as le,aC as k}from"./index-CHtXOOwB.js";import{S as T,a as oe,L as ce,E as de}from"./EnhancedCalculatorResults-DTab-DpY.js";import{S as J}from"./star-DhDyIT4N.js";import"./shield-C3KNxYec.js";import"./CarbonCalculator-C0wPmJ0J.js";import"./separator-BpvyT6Sm.js";import"./target-BPcT1qj9.js";import"./recycle-BV78qFBO.js";import"./settings-JWSwRKg3.js";import"./lightbulb-BLdPPbrd.js";import"./PieChart-B3E5AdY8.js";import"./scroll-area-CvAawM1u.js";import"./usePersonalization-DKPi6Nos.js";import"./switch-Cz-4Jc-7.js";class me{constructor(){P(this,"cache",new Map);P(this,"cacheExpiry",5*60*1e3)}async searchMaterials(a,t=50){try{const{data:{user:n}}=await w.auth.getUser();if(!n)return console.warn("Authentication required for material search"),[];let r=w.from("unified_materials").select("*");a.category&&(r=r.eq("category",a.category)),a.region&&(r=r.eq("region",a.region)),a.carbonIntensity&&(r=r.eq("carbon_intensity_category",a.carbonIntensity)),a.recyclability&&(r=r.eq("recyclability",a.recyclability)),a.greenStarCompliant!==void 0&&(r=r.eq("green_star_compliant",a.greenStarCompliant)),a.searchTerm&&(r=r.or(`name.ilike.%${a.searchTerm}%,description.ilike.%${a.searchTerm}%`)),a.tags&&a.tags.length>0&&(r=r.overlaps("tags",a.tags)),r=r.order("data_quality_rating",{ascending:!1,nullsFirst:!1}),r=r.limit(t);const{data:m,error:o}=await r;return o?(console.error("Error searching materials:",o),[]):m||[]}catch(n){return console.error("Material search failed:",n),[]}}async lookupMaterial(a,t=1){const n=`lookup_${a.toLowerCase()}`,r=this.cache.get(n);if(r&&Date.now()-r.confidence<this.cacheExpiry)return r;try{const{data:m,error:o}=await w.rpc("get_best_material_data",{material_name:a});if(o)return console.error("Material lookup error:",o),this.createFallbackResult(a,t);if(!m||m.length===0)return console.warn(`No material found for: ${a}`),this.createFallbackResult(a,t);const d=m[0],g=d.carbon_footprint_kgco2e_kg||t,p=await this.findAlternatives(a,d.id),E={material:d,carbonFactor:g,confidence:this.calculateConfidence(d),alternatives:p};return this.cache.set(n,E),E}catch(m){return console.error("Material database lookup failed:",m),this.createFallbackResult(a,t)}}async findAlternatives(a,t){try{const{data:{user:n}}=await w.auth.getUser();if(!n)return console.warn("Authentication required for finding alternatives"),[];let r=w.from("unified_materials").select("*").or(`alternative_to.eq.${a},material_type.eq.${a}`).order("sustainability_score",{ascending:!1,nullsFirst:!1}).limit(5);t&&(r=r.neq("id",t));const{data:m,error:o}=await r;return o?(console.error("Error finding alternatives:",o),[]):m||[]}catch(n){return console.error("Alternative lookup failed:",n),[]}}async getMaterialsByCategory(a){try{const{data:{user:t}}=await w.auth.getUser();if(!t)return console.warn("Authentication required for materials by category"),[];const{data:n,error:r}=await w.from("unified_materials").select("*").eq("category",a).order("name").limit(100);return r?(console.error("Error getting materials by category:",r),[]):n||[]}catch(t){return console.error("Category lookup failed:",t),[]}}async getPopularMaterials(a=20){try{const{data:{user:t}}=await w.auth.getUser();if(!t)return console.warn("Authentication required for popular materials"),[];const{data:n,error:r}=await w.from("unified_materials").select("*").order("data_quality_rating",{ascending:!1,nullsFirst:!1}).order("sustainability_score",{ascending:!1,nullsFirst:!1}).limit(a);return r?(console.error("Error getting popular materials:",r),[]):n||[]}catch(t){return console.error("Popular materials lookup failed:",t),[]}}createFallbackResult(a,t){return{material:{id:`fallback-${Date.now()}`,name:a,carbon_footprint_kgco2e_kg:t,unit:"kg",source:"fallback",verification_status:"unverified",data_quality_rating:1},carbonFactor:t,confidence:10,alternatives:[]}}calculateConfidence(a){let t=50;return a.verification_status==="verified"?t+=30:a.verification_status==="peer_reviewed"&&(t+=20),a.data_quality_rating&&(t+=a.data_quality_rating*2),a.epd_registration_number&&(t+=15),Math.min(t,95)}clearCache(){this.cache.clear()}}const I=new me;function ue(l,a=300){const[t,n]=h.useState(l),r=h.useRef(null);return h.useEffect(()=>{if(r.current&&(clearTimeout(r.current),r.current=null),a===0){n(l);return}return r.current=window.setTimeout(()=>{n(l),r.current=null},a),()=>{r.current&&(clearTimeout(r.current),r.current=null)}},[l,a]),t}const he=({selectedMaterials:l,onMaterialChange:a,category:t,placeholder:n="Search and select materials..."})=>{const[r,m]=h.useState(!1),[o,d]=h.useState(""),[g,p]=h.useState([]),[E,b]=h.useState([]),[N,F]=h.useState({}),[A,L]=h.useState(!1),i=ue(o,300);h.useEffect(()=>{c()},[t]),h.useEffect(()=>{i.trim()?x():p([])},[i,N]);const c=async()=>{try{const s=t?await I.getMaterialsByCategory(t):await I.getPopularMaterials(20);b(s)}catch(s){console.error("Failed to load popular materials:",s)}},x=async()=>{L(!0);try{const s=await I.searchMaterials({...N,searchTerm:i,category:t||N.category});p(s)}catch(s){console.error("Material search failed:",s)}finally{L(!1)}},v=async s=>{try{const u=await I.lookupMaterial(s.name||"",s.carbon_footprint_kgco2e_kg||1),D={id:s.id||`temp-${Date.now()}`,material:u.material,quantity:1,unit:s.unit||"kg",carbonFactor:u.carbonFactor,confidence:u.confidence},O=[...l,D];a(O),m(!1)}catch(u){console.error("Failed to add material:",u)}},j=(s,u)=>{const D=l.map(O=>O.id===s?{...O,quantity:u}:O);a(D)},y=s=>{const u=l.filter(D=>D.id!==s);a(u)},C=s=>s>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600",f=s=>s>=80?e.jsx(Y,{className:"h-4 w-4"}):s>=60?e.jsx(K,{className:"h-4 w-4"}):e.jsx(K,{className:"h-4 w-4"}),q=o.trim()?g:E;return e.jsxs("div",{className:"space-y-4",children:[l.length>0&&e.jsxs(S,{children:[e.jsx(z,{children:e.jsx(G,{className:"text-sm",children:"Selected Materials"})}),e.jsx($,{className:"space-y-3",children:l.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.material.name}),e.jsxs(M,{variant:"outline",className:C(s.confidence),children:[f(s.confidence),s.confidence,"%"]}),s.material.green_star_compliant&&e.jsxs(M,{variant:"default",className:"text-green-600",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"Green Star"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.carbonFactor.toFixed(2)," kg CO₂-e/",s.unit]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{type:"number",min:"0",step:"0.1",value:s.quantity,onChange:u=>j(s.id,parseFloat(u.target.value)||0),className:"w-20"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.unit}),e.jsx(B,{variant:"ghost",size:"sm",onClick:()=>y(s.id),className:"text-destructive hover:text-destructive",children:"×"})]})]},s.id))})]}),e.jsxs(ae,{open:r,onOpenChange:m,children:[e.jsx(se,{asChild:!0,children:e.jsxs(B,{variant:"outline",className:"w-full",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),n]})}),e.jsxs(te,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(re,{children:e.jsx(ne,{children:"Select Materials from Database"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ie,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(R,{placeholder:"Search materials...",value:o,onChange:s=>d(s.target.value),className:"pl-10"})]}),e.jsxs(W,{value:N.recyclability||"all",onValueChange:s=>F(u=>({...u,recyclability:s==="all"?void 0:s})),children:[e.jsx(U,{className:"w-40",children:e.jsx(V,{placeholder:"Recyclability"})}),e.jsxs(Q,{children:[e.jsx(_,{value:"all",children:"All"}),e.jsx(_,{value:"High",children:"High"}),e.jsx(_,{value:"Medium",children:"Medium"}),e.jsx(_,{value:"Low",children:"Low"})]})]}),e.jsxs(W,{value:N.carbonIntensity||"all",onValueChange:s=>F(u=>({...u,carbonIntensity:s==="all"?void 0:s})),children:[e.jsx(U,{className:"w-40",children:e.jsx(V,{placeholder:"Carbon Impact"})}),e.jsxs(Q,{children:[e.jsx(_,{value:"all",children:"All"}),e.jsx(_,{value:"low",children:"Low Impact"}),e.jsx(_,{value:"medium",children:"Medium Impact"}),e.jsx(_,{value:"high",children:"High Impact"})]})]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:A?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Searching materials..."})]}):q.length>0?q.map(s=>{var u;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 cursor-pointer",onClick:()=>v(s),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.green_star_compliant&&e.jsxs(M,{variant:"default",className:"text-green-600",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"Green Star"]}),s.recyclability==="High"&&e.jsxs(M,{variant:"outline",className:"text-green-600",children:[e.jsx(X,{className:"h-3 w-3 mr-1"}),"Recyclable"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[(u=s.carbon_footprint_kgco2e_kg)==null?void 0:u.toFixed(2)," kg CO₂-e/",s.unit||"kg",s.description&&` • ${s.description}`]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(M,{variant:"outline",className:"text-xs",children:s.category}),e.jsxs(M,{variant:"outline",className:"text-xs",children:["Quality: ",s.data_quality_rating||1,"/10"]})]})]}),e.jsx(B,{size:"sm",children:e.jsx(H,{className:"h-4 w-4"})})]},s.id)}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:o.trim()?"No materials found":"Start typing to search materials"})})})]})]})]})]})},xe=async l=>{var L;const a=[];let t=0,n=0,r=0,m=0,o=0;for(const i of l.materials){const c=i.quantity*i.carbonFactor;t+=c;const v=(await I.findAlternatives(i.material.material_type||i.material.name||"",i.id)).map(y=>{const C=y.carbon_footprint_kgco2e_kg||i.carbonFactor,f=(i.carbonFactor-C)/i.carbonFactor*100;return{name:y.name||"",carbonFactor:C,carbonReduction:f,costImpact:f>0?"Similar or lower cost":"May increase cost",benefits:[...y.green_star_compliant?["Green Star Compliant"]:[],...y.recyclability==="High"?["Highly Recyclable"]:[],...y.local_availability?["Locally Available"]:[]]}}),j=[];i.material.green_star_compliant&&(j.push("Green Star Compliant"),m++),i.material.recyclability==="High"?(j.push("Highly Recyclable"),o+=100):i.material.recyclability==="Medium"?(j.push("Moderately Recyclable"),o+=60):o+=20,i.material.local_availability&&j.push("Locally Available"),(L=i.material.certification_standards)!=null&&L.length&&j.push(`Certified: ${i.material.certification_standards.join(", ")}`),a.push({id:i.id,name:i.material.name||"",quantity:i.quantity,unit:i.unit,carbonFactor:i.carbonFactor,emissions:c,confidence:i.confidence,alternatives:v,sustainabilityFeatures:j}),n+=i.material.sustainabilityScore||50,r+=i.confidence}let d=0;for(const i of l.transport){const c=Number(i.distance)||0,x=Number(i.weight)||0,v=i.factor||pe(i.type);d+=c*x*v/1e3}let g=0;for(const i of l.energy){const c=Number(i.amount)||0,x=i.factor||fe(i.type);g+=c*x}const p=t+d+g,E=ge(a,{totalEmissions:p,materialEmissions:t,transportEmissions:d,energyEmissions:g}),b=l.materials.length>0?n/l.materials.length:0,N=l.materials.length>0?r/l.materials.length:0,F=m/Math.max(l.materials.length,1)>=.8,A=l.materials.length>0?o/l.materials.length:0;return{totalEmissions:p,materialEmissions:t,transportEmissions:d,energyEmissions:g,breakdown:{materials:t/p*100||0,transport:d/p*100||0,energy:g/p*100||0},materialDetails:a,recommendations:E,sustainability:{score:b,greenStarCompliant:F,recyclabilityScore:A,confidence:N}}};function ge(l,a){const t=[],n=l.filter(o=>o.emissions>a.materialEmissions*.2).sort((o,d)=>d.emissions-o.emissions);if(n.length>0){const o=n[0];if(t.push(`Consider alternatives for ${o.name} (${(o.emissions/1e3).toFixed(1)}t CO₂-e)`),o.alternatives.length>0){const d=o.alternatives.filter(g=>g.carbonReduction>0).sort((g,p)=>p.carbonReduction-g.carbonReduction)[0];d&&t.push(`Switch to ${d.name} for ${d.carbonReduction.toFixed(1)}% carbon reduction`)}}const r=l.filter(o=>o.confidence<60);return r.length>0&&t.push(`Verify carbon data for ${r.length} material(s) with low confidence ratings`),a.transportEmissions>a.totalEmissions*.15&&t.push("Consider local sourcing to reduce transport emissions"),a.energyEmissions>a.totalEmissions*.3&&t.push("Implement renewable energy sources to reduce operational emissions"),l.filter(o=>!o.sustainabilityFeatures.includes("Green Star Compliant")).length>l.length*.5&&t.push("Increase use of Green Star compliant materials for better sustainability rating"),t}function pe(l){return{truck:.1,train:.03,ship:.01,plane:1.5,van:.25}[l]||.1}function fe(l){return{electricity:.5,naturalGas:.2,renewableEnergy:.05,diesel:.27,coal:.34}[l]||.5}const Ae=({onCalculationUpdate:l})=>{const[a,t]=h.useState({designLife:50,energy:0,water:0,transportDistance:0,transportWeight:0}),[n,r]=h.useState(null),[m,o]=h.useState(null),[d,g]=h.useState([]),[p,E]=h.useState("all"),[b,N]=h.useState(!0),[F,A]=h.useState(!1),L=async()=>{A(!0);try{if(b&&d.length>0){const{designLife:c,energy:x,water:v,transportDistance:j,transportWeight:y}=a,C={materials:d,transport:j>0?[{type:"truck",distance:j,weight:y||1,id:"lca-transport"}]:[],energy:x>0?[{type:"electricity",amount:x*c,id:"lca-energy"}]:[]},f=await xe(C);o(f);const q={};f.materialDetails.forEach(u=>{q[u.name.toLowerCase().replace(/\s+/g,"")]=u.emissions});const s={totalLCA:f.totalEmissions,embodiedCarbon:f.materialEmissions,operationalCarbon:f.energyEmissions,endOfLifeCarbon:f.materialEmissions*.05,materialBreakdown:q,materialEmissions:f.materialEmissions,transportEmissions:f.transportEmissions,energyEmissions:f.energyEmissions};r(s),l(s)}else{const{designLife:c,energy:x,water:v}=a,y=(x*.82+v*.3)*c,C={totalLCA:y,embodiedCarbon:0,operationalCarbon:y,endOfLifeCarbon:0,materialBreakdown:{},materialEmissions:0,transportEmissions:0,energyEmissions:y};r(C),l(C),o(null)}}catch(c){console.error("LCA calculation failed:",c)}finally{A(!1)}},i=(c,x)=>{t(v=>({...v,[c]:parseFloat(x)||0}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(z,{children:e.jsxs(G,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Life Cycle Assessment"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:b?"default":"outline",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),b?"Database Mode":"Simple Mode"]}),e.jsx(B,{variant:"outline",size:"sm",onClick:()=>N(!b),children:b?"Switch to Simple":"Use Database"})]})]})}),e.jsxs($,{className:"space-y-6",children:[b?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium mb-3 block",children:"Materials from Database"}),e.jsx(he,{selectedMaterials:d,onMaterialChange:g,placeholder:"Search and select materials from database..."})]}),m&&e.jsx(S,{className:"bg-green-50 dark:bg-green-950/20",children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Sustainability Score"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[m.sustainability.score.toFixed(0),"/100"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-blue-600",children:"Data Confidence"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[m.sustainability.confidence.toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-purple-600",children:"Green Star"}),e.jsx("div",{className:"text-lg font-bold text-purple-700",children:m.sustainability.greenStarCompliant?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-5 w-5 inline mr-1"}),"Compliant"]}):"Not Compliant"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-orange-600",children:"Recyclability"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-700",children:[m.sustainability.recyclabilityScore.toFixed(0),"%"]})]})]})})})]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{className:"text-sm font-medium",children:"Operational Parameters"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"designLife",children:"Design Life (years)"}),e.jsx(R,{id:"designLife",type:"number",min:"10",max:"100",value:a.designLife,onChange:c=>i("designLife",c.target.value),placeholder:"e.g., 50"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"energy",children:"Annual Energy Use (kWh)"}),e.jsx(R,{id:"energy",type:"number",min:"0",value:a.energy,onChange:c=>i("energy",c.target.value),placeholder:"e.g., 50000"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"water",children:"Annual Water Use (kL)"}),e.jsx(R,{id:"water",type:"number",min:"0",value:a.water,onChange:c=>i("water",c.target.value),placeholder:"e.g., 500"})]})]})]}),b&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{className:"text-sm font-medium",children:"Transport Parameters"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"transportDistance",children:"Transport Distance (km)"}),e.jsx(R,{id:"transportDistance",type:"number",min:"0",value:a.transportDistance,onChange:c=>i("transportDistance",c.target.value),placeholder:"e.g., 100"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"transportWeight",children:"Transport Weight (tonnes)"}),e.jsx(R,{id:"transportWeight",type:"number",min:"0",step:"0.1",value:a.transportWeight,onChange:c=>i("transportWeight",c.target.value),placeholder:"e.g., 50"})]})]})]})]}),e.jsx(B,{onClick:L,className:"w-full",disabled:F||b&&d.length===0,children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Calculating..."]}):"Calculate Life Cycle Assessment"}),b&&d.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Please select materials from the database to perform enhanced calculations"})]})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(z,{children:e.jsxs(G,{className:"flex items-center justify-between",children:["LCA Results",e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{scope:"combined",size:"sm"}),e.jsx(oe,{carbonIntensity:n.totalLCA/1e3,size:"sm"})]})]})}),e.jsx($,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs(S,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Embodied Carbon"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(n.embodiedCarbon/1e3).toFixed(1)," t CO₂-e"]}),e.jsx(T,{scope:"scope3",size:"sm",showTooltip:!1})]}),e.jsxs(S,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Operational Carbon"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(n.operationalCarbon/1e3).toFixed(1)," t CO₂-e"]}),e.jsx(T,{scope:"scope2",size:"sm",showTooltip:!1})]}),e.jsxs(S,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"End of Life"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[(n.endOfLifeCarbon/1e3).toFixed(1)," t CO₂-e"]}),e.jsx(T,{scope:"scope3",size:"sm",showTooltip:!1})]}),e.jsxs(S,{className:"p-4 bg-green-50 dark:bg-green-950/20",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total LCA"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:[(n.totalLCA/1e3).toFixed(1)," t CO₂-e"]}),e.jsx(T,{scope:"combined",size:"sm",showTooltip:!1})]})]})})]}),e.jsx(ce,{activePhase:p,onPhaseChange:E,emissionsByPhase:{embodied:n.embodiedCarbon,transport:n.transportEmissions||0,endOfLife:n.endOfLifeCarbon}}),e.jsx(de,{result:{totalEmissions:n.totalLCA,materialEmissions:n.materialEmissions||0,transportEmissions:n.transportEmissions||0,energyEmissions:n.energyEmissions||0,breakdown:{materials:n.materialEmissions||0,transport:n.transportEmissions||0,energy:n.energyEmissions||0},breakdownByMaterial:n.materialBreakdown,breakdownByTransport:{delivery:n.transportEmissions||0},breakdownByEnergy:{operational:n.energyEmissions||0}},materials:d,onMaterialSelect:c=>{console.log("Selected LCA material for optimization:",c)}}),Object.keys(n.materialBreakdown).length>0&&e.jsxs(S,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Material Breakdown"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(n.materialBreakdown).map(([c,x])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-600 capitalize",children:c}),e.jsxs("div",{className:`text-xl font-bold ${x>=0?"text-red-600":"text-green-600"}`,children:[(x/1e3).toFixed(1)," t CO₂-e"]}),x<0&&e.jsx("div",{className:"text-xs text-green-600",children:"Carbon Sequestration"})]},c))})]}),e.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"LCA Insights"}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Embodied Carbon:"})," Upfront emissions from materials and construction"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Operational Carbon:"})," Emissions over the building's operational life"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"End of Life:"})," Estimated emissions from demolition and disposal"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Timber:"})," Shows negative emissions due to carbon sequestration"]}),e.jsx("p",{children:"• Consider material substitutions to reduce embodied carbon footprint"})]})]})]})]})};export{Ae as LCACalculator};
//# sourceMappingURL=LCACalculator-Cr8YI4kR.js.map
