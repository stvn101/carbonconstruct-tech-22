import{j as e,g as A,a as F,r as i,I as N,B as x,L as f}from"./index-CHtXOOwB.js";import{u as S,t as w}from"./types-CyST8ZDJ.js";import{F as k,a as M,b as z,c as C,d as E,e as L}from"./form-Cf-Dr_Hz.js";import{A as Z,E as I,P as G,r as P}from"./PasswordField-Dd4IycW0.js";import{S as B}from"./separator-BpvyT6Sm.js";const R=t=>{let s=0;return t.length>=8&&(s+=.5),t.length>=12&&(s+=.5),t.length>=16&&(s+=.5),/[A-Z]/.test(t)&&(s+=.5),/[a-z]/.test(t)&&(s+=.5),/[0-9]/.test(t)&&(s+=.5),/[^A-Za-z0-9]/.test(t)&&(s+=.5),/[A-Z].*[A-Z]/.test(t)&&(s+=.25),/[^A-Za-z0-9].*[^A-Za-z0-9]/.test(t)&&(s+=.25),t.length>=20&&(s+=.25),/(.)\1{2,}/.test(t)&&(s-=.5),/123|abc|qwerty|password/i.test(t)&&(s-=1),s=Math.max(0,Math.min(4,s)),{score:s,label:["Very Weak","Weak","Fair","Strong","Very Strong"][Math.floor(s)]}},U=({password:t})=>{const{score:s,label:o}=R(t);if(!t)return null;const d=a=>{switch(Math.floor(a)){case 0:return"bg-destructive";case 1:return"bg-orange-500";case 2:return"bg-warning";case 3:return"bg-blue-500";case 4:return"bg-green-500";default:return"bg-gray-300"}},u=Array.from({length:5},(a,n)=>{const c=n<s*1.25;return e.jsx("div",{className:`h-1.5 flex-1 rounded-full mx-0.5 transition-all duration-300 ${c?d(s):"bg-gray-200 dark:bg-gray-700"}`},n)});return e.jsxs("div",{className:"my-2",children:[e.jsx("div",{className:"flex mb-1",children:u}),e.jsxs("p",{className:`text-xs ${V(s)}`,children:["Password strength: ",e.jsx("span",{className:"font-semibold",children:o})]}),s<=2&&e.jsxs("ul",{className:"text-xs mt-1 text-gray-600 dark:text-gray-400 list-disc list-inside",children:[s<2&&e.jsx("li",{children:"Use at least 10 characters"}),!/[A-Z]/.test(t)&&e.jsx("li",{children:"Add uppercase letters"}),!/[a-z]/.test(t)&&e.jsx("li",{children:"Add lowercase letters"}),!/[0-9]/.test(t)&&e.jsx("li",{children:"Add numbers"}),!/[^A-Za-z0-9]/.test(t)&&e.jsx("li",{children:"Add special characters"}),/(.)\1\1/.test(t)&&e.jsx("li",{children:"Avoid repeated characters"})]})]})},V=t=>{switch(Math.floor(t)){case 0:return"text-destructive";case 1:return"text-orange-500 dark:text-orange-400";case 2:return"text-warning";case 3:return"text-blue-500 dark:text-blue-400";case 4:return"text-green-500 dark:text-green-400";default:return"text-gray-500 dark:text-gray-400"}},O=({returnTo:t="/dashboard"})=>{const{register:s,signInWithGoogle:o}=A(),d=F(),[u,a]=i.useState(null),[n,c]=i.useState(!1),[g,h]=i.useState(!1),[b,j]=i.useState(""),l=S({resolver:w(P),defaultValues:{full_name:"",email:"",password:""}});i.useEffect(()=>{const r=l.watch((m,{name:p})=>{p==="password"&&j(m.password||"")});return()=>r.unsubscribe()},[l.watch]);const y=async r=>{try{c(!0),a(null),await s(r.full_name,r.email,r.password),d(t,{state:{fromAuth:!0}})}catch(m){a(m.message||"Registration failed")}finally{c(!1)}},v=async()=>{try{a(null),h(!0),sessionStorage.setItem("authReturnUrl",t),await o()}catch(r){a(`Google login failed: ${r.message}`),h(!1)}};return e.jsx("div",{className:"w-full",children:e.jsx(k,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(y),className:"space-y-4",children:[e.jsx(Z,{error:u}),e.jsx(M,{control:l.control,name:"full_name",render:({field:r})=>e.jsxs(z,{children:[e.jsx(C,{children:"Name"}),e.jsx(E,{children:e.jsx(N,{placeholder:"Full Name",...r})}),e.jsx(L,{})]})}),e.jsx(I,{form:l}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(G,{form:l}),e.jsx(U,{password:b})]}),e.jsx(x,{type:"submit",className:"w-full bg-carbon-600 hover:bg-carbon-700 border border-black dark:border-white/10",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"})," Signing Up"]}):"Sign Up"}),e.jsxs("div",{className:"relative my-6",children:[e.jsx(B,{}),e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 px-2 text-muted-foreground text-sm",children:"Or continue with"})]}),e.jsxs(x,{type:"button",variant:"outline",onClick:v,disabled:g,className:"w-full border-gray-300 dark:border-gray-600",children:[g?e.jsx(f,{className:"h-4 w-4 animate-spin mr-2"}):e.jsxs("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})]})})})};export{O as default};
//# sourceMappingURL=RegisterForm-BUEAd-IR.js.map
