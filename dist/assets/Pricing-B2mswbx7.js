import{u as k,j as e,m as p,C as S,X as E,a as P,B as F,L as T,b as B,c as q,d as $,e as L,f as D,r as x,g as M,h as U,N as y,F as j,i as u,s as b}from"./index-CHtXOOwB.js";import{S as W}from"./switch-Cz-4Jc-7.js";import{P as Y}from"./PaymentSuccess-4yaU1Bvn.js";const H=({annual:t,onChange:r})=>{const{theme:a}=k();return e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-12",children:[e.jsx("span",{className:`text-sm font-medium ${t?"text-foreground":"text-foreground/60"}`,children:"Annual"}),e.jsx(W,{checked:!t,onCheckedChange:()=>r(!t),"aria-label":"Toggle billing cycle",className:"data-[state=checked]:bg-carbon-600 data-[state=unchecked]:bg-carbon-400 dark:data-[state=checked]:bg-carbon-500 dark:data-[state=unchecked]:bg-carbon-700"}),e.jsx("span",{className:`text-sm font-medium ${t?"text-foreground/60":"text-foreground"}`,children:"Monthly"})]})},R=({annual:t,onBillingChange:r})=>e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center max-w-3xl mx-auto mb-16",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6 gradient-heading",children:"Transparent Pricing"}),e.jsx("p",{className:"text-lg md:text-xl text-foreground/80 mb-10",children:"Choose the plan that's right for your Australian construction business. All plans include our core carbon calculation engine."}),e.jsx(H,{annual:t,onChange:r})]}),_=({features:t,notIncluded:r})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-medium mb-3",children:"Includes:"}),e.jsx("ul",{className:"space-y-2",children:t.map(a=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(S,{className:"h-5 w-5 text-carbon-500 mr-2 shrink-0"}),e.jsx("span",{className:"text-sm",children:a})]},a))}),r.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-medium mb-3 mt-6",children:"Not included:"}),e.jsx("ul",{className:"space-y-2",children:r.map(a=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(E,{className:"h-5 w-5 text-foreground/30 mr-2 shrink-0"}),e.jsx("span",{className:"text-sm text-foreground/60",children:a})]},a))})]})]}),G=({cta:t,planId:r,processing:a,hadTrial:l,isPopular:d,onAction:n})=>{const s=P(),i=()=>{r==="enterprise"?s("/contact",{state:{subject:"Enterprise Plan Inquiry"}}):n(r)};return e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-full",variant:d?"default":"outline",onClick:i,disabled:!!a&&r!=="enterprise",children:a===r&&r!=="enterprise"?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):t}),d&&!l&&r!=="enterprise"&&e.jsx("p",{className:"w-full text-xs text-center mt-2 text-green-600",children:"Includes 3-day free trial"})]})},I=({plans:t,processing:r,hadTrial:a,onPlanAction:l})=>{const d=(s,i)=>i==="enterprise"?"Price via negotiation":`$${(s/100).toFixed(2)}`,n=(s,i)=>i==="enterprise"?"":s>=2e5?"/year":"/month";return e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:t.map((s,i)=>e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},children:e.jsxs(B,{className:`h-full flex flex-col ${s.popular?"border-carbon-500 shadow-lg shadow-carbon-100/20":""}`,children:[s.popular&&e.jsx("div",{className:"bg-carbon-500 text-white text-center py-1 text-sm font-medium",children:"Most Popular"}),e.jsxs(q,{children:[e.jsx($,{className:"text-2xl font-bold",children:s.name}),e.jsx("div",{className:"mt-4",children:s.id==="enterprise"?e.jsx("span",{className:"text-2xl font-bold text-carbon-600",children:"Price via negotiation"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-4xl font-bold",children:d(s.price,s.id)}),e.jsx("span",{className:"text-foreground/60 ml-2",children:n(s.price,s.id)})]})}),e.jsx("p",{className:"text-foreground/80 mt-3 text-sm",children:s.description})]}),e.jsx(L,{className:"flex-grow",children:e.jsx(_,{features:s.features,notIncluded:s.notIncluded})}),e.jsx(D,{children:e.jsx(G,{cta:s.cta,planId:s.id,processing:r,hadTrial:a,isPopular:s.popular,onAction:l})})]})},s.id))})},h={starter:19900,professional:54900},N=(t,r)=>r==="enterprise"?0:t*12,O=t=>[{id:"starter",name:"Starter",price:t?N(h.starter,"starter"):h.starter,description:"Best for small construction firms just beginning their sustainability journey in Australia.",features:["Carbon footprint calculation","Australian materials library","Single user access","Basic PDF reports","Email support response within 48h"],notIncluded:["Team collaboration","API access","Custom reporting","Advanced analytics","Priority support"],cta:"Get Started",popular:!1},{id:"professional",name:"Professional",price:t?N(h.professional,"professional"):h.professional,description:"Perfect for growing Australian construction companies ready to measure and reduce their carbon impact.",features:["Everything in Starter","Up to 5 team members","Extended materials library","Project comparison tools","Custom reporting","Priority support (24h)","Monthly sustainability insights"],notIncluded:["Enterprise integrations","White labeling","Dedicated account manager"],cta:"Start Free Trial",popular:!0},{id:"enterprise",name:"Enterprise",price:0,description:"Complete solution for large Australian construction firms with complex sustainability needs.",features:["Everything in Professional","Unlimited team members","Full API access","Custom integrations","White labeling options","Dedicated account manager","24/7 priority support","Australian compliance assistance","Advanced analytics dashboard","Custom training sessions"],notIncluded:[],cta:"Contact Sales",popular:!1}],K=()=>{const[t,r]=x.useState(!0),[a,l]=x.useState(null),{user:d,profile:n}=M(),s=P(),i=U(),[w,v]=x.useState(!1),C=O(t);x.useEffect(()=>{new URLSearchParams(i.search).get("payment")==="success"&&v(!0)},[i.search]);const A=async o=>{if(!d){s("/auth",{state:{returnTo:"/pricing"}});return}if((n==null?void 0:n.subscription_tier)==="premium"&&o!=="enterprise"){u.info("You already have a premium subscription.");return}l(o);try{if(o==="enterprise"){s("/contact",{state:{subject:"Enterprise Plan Inquiry"}});return}if(o==="professional"){const{data:m,error:g}=await b.functions.invoke("create-payment-session",{body:{planName:o,action:"trial"}});if(g)throw new Error(g.message);if(m.success&&!m.url){u.success("Your 3-day free trial has been activated!"),s("/dashboard");return}m.error&&m.error.includes("already used your free trial")&&u.info("You've already used your trial. Processing payment...")}const{data:c,error:f}=await b.functions.invoke("create-payment-session",{body:{planName:o,purchaseType:t?"annual":"monthly",action:"subscribe"}});if(f)throw new Error(f.message);c.success&&c.url?window.location.href=c.url:c.success&&(u.success("Payment processed successfully!"),s("/dashboard"))}catch(c){console.error("Payment error:",c),u.error(c.message||"There was an issue processing your request. Please try again.")}finally{l(null)}};return w?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(y,{}),e.jsx("main",{className:"flex-1 pt-24 px-4",children:e.jsx(Y,{onClose:()=>s("/dashboard",{replace:!0})})}),e.jsx(j,{})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(y,{}),e.jsx("main",{className:"flex-1 pt-24",children:e.jsxs("section",{className:"py-16 md:py-24 container mx-auto px-4",children:[e.jsx(R,{annual:t,onBillingChange:r}),e.jsx(I,{plans:C,processing:a,hadTrial:!!(n!=null&&n.had_trial),onPlanAction:A}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mt-16 text-center max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Need a custom solution?"}),e.jsx("p",{className:"text-foreground/80 mb-6",children:"We offer tailored packages for Australian enterprises with specific requirements. Our team will work with you to create a solution that meets your unique needs and complies with Australian standards."})]})]})}),e.jsx(j,{})]})};export{K as default};
//# sourceMappingURL=Pricing-B2mswbx7.js.map
