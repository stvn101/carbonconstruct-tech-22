import{r as m,bh as xe,j as e,ay as ge,bG as he,bj as M,az as I,bi as k,bu as pe,bv as X,bl as be,bk as ve,l as je,b as R,c as W,d as $,Q as we,e as Y,aC as ye,B as Se}from"./index-CHtXOOwB.js";import{C as Ee,a as Ne,S as Re,E as Ce}from"./EnhancedCalculatorResults-DTab-DpY.js";import"./shield-C3KNxYec.js";import"./CarbonCalculator-C0wPmJ0J.js";import"./separator-BpvyT6Sm.js";import"./target-BPcT1qj9.js";import"./recycle-BV78qFBO.js";import"./star-DhDyIT4N.js";import"./settings-JWSwRKg3.js";import"./lightbulb-BLdPPbrd.js";import"./PieChart-B3E5AdY8.js";import"./scroll-area-CvAawM1u.js";import"./usePersonalization-DKPi6Nos.js";import"./switch-Cz-4Jc-7.js";var q=["PageUp","PageDown"],Q=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],J={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},A="Slider",[z,Pe,Me]=he(A),[Z,ot]=ge(A,[Me]),[ke,T]=Z(A),ee=m.forwardRef((s,r)=>{const{name:i,min:n=0,max:l=100,step:d=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:u=0,defaultValue:p=[n],value:b,onValueChange:t=()=>{},onValueCommit:c=()=>{},inverted:g=!1,form:v,...h}=s,x=m.useRef(new Set),f=m.useRef(0),w=o==="horizontal"?Ae:Be,[j=[],B]=xe({prop:b,defaultProp:p,onChange:y=>{var C;(C=[...x.current][f.current])==null||C.focus(),t(y)}}),V=m.useRef(j);function K(y){const E=Ve(j,y);D(y,E)}function ue(y){D(y,f.current)}function fe(){const y=V.current[f.current];j[f.current]!==y&&c(j)}function D(y,E,{commit:C}={commit:!1}){const G=Oe(d),H=Fe(Math.round((y-n)/d)*d+n,G),_=X(H,[n,l]);B((P=[])=>{const N=Ie(P,_,E);if(ze(N,u*d)){f.current=N.indexOf(_);const U=String(N)!==String(P);return U&&C&&c(N),U?N:P}else return P})}return e.jsx(ke,{scope:s.__scopeSlider,name:i,disabled:a,min:n,max:l,valueIndexToChangeRef:f,thumbs:x.current,values:j,orientation:o,form:v,children:e.jsx(z.Provider,{scope:s.__scopeSlider,children:e.jsx(z.Slot,{scope:s.__scopeSlider,children:e.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...h,ref:r,onPointerDown:M(h.onPointerDown,()=>{a||(V.current=j)}),min:n,max:l,inverted:g,onSlideStart:a?void 0:K,onSlideMove:a?void 0:ue,onSlideEnd:a?void 0:fe,onHomeKeyDown:()=>!a&&D(n,0,{commit:!0}),onEndKeyDown:()=>!a&&D(l,j.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:E})=>{if(!a){const H=q.includes(y.key)||y.shiftKey&&Q.includes(y.key)?10:1,_=f.current,P=j[_],N=d*H*E;D(P+N,_,{commit:!0})}}})})})})});ee.displayName=A;var[te,se]=Z(A,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ae=m.forwardRef((s,r)=>{const{min:i,max:n,dir:l,inverted:d,onSlideStart:o,onSlideMove:a,onSlideEnd:u,onStepKeyDown:p,...b}=s,[t,c]=m.useState(null),g=k(r,w=>c(w)),v=m.useRef(void 0),h=pe(l),x=h==="ltr",f=x&&!d||!x&&d;function S(w){const j=v.current||t.getBoundingClientRect(),B=[0,j.width],K=L(B,f?[i,n]:[n,i]);return v.current=j,K(w-j.left)}return e.jsx(te,{scope:s.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width",children:e.jsx(ne,{dir:h,"data-orientation":"horizontal",...b,ref:g,style:{...b.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const j=S(w.clientX);o==null||o(j)},onSlideMove:w=>{const j=S(w.clientX);a==null||a(j)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:w=>{const B=J[f?"from-left":"from-right"].includes(w.key);p==null||p({event:w,direction:B?-1:1})}})})}),Be=m.forwardRef((s,r)=>{const{min:i,max:n,inverted:l,onSlideStart:d,onSlideMove:o,onSlideEnd:a,onStepKeyDown:u,...p}=s,b=m.useRef(null),t=k(r,b),c=m.useRef(void 0),g=!l;function v(h){const x=c.current||b.current.getBoundingClientRect(),f=[0,x.height],w=L(f,g?[n,i]:[i,n]);return c.current=x,w(h-x.top)}return e.jsx(te,{scope:s.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:e.jsx(ne,{"data-orientation":"vertical",...p,ref:t,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:h=>{const x=v(h.clientY);d==null||d(x)},onSlideMove:h=>{const x=v(h.clientY);o==null||o(x)},onSlideEnd:()=>{c.current=void 0,a==null||a()},onStepKeyDown:h=>{const f=J[g?"from-bottom":"from-top"].includes(h.key);u==null||u({event:h,direction:f?-1:1})}})})}),ne=m.forwardRef((s,r)=>{const{__scopeSlider:i,onSlideStart:n,onSlideMove:l,onSlideEnd:d,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:u,...p}=s,b=T(A,i);return e.jsx(I.span,{...p,ref:r,onKeyDown:M(s.onKeyDown,t=>{t.key==="Home"?(o(t),t.preventDefault()):t.key==="End"?(a(t),t.preventDefault()):q.concat(Q).includes(t.key)&&(u(t),t.preventDefault())}),onPointerDown:M(s.onPointerDown,t=>{const c=t.target;c.setPointerCapture(t.pointerId),t.preventDefault(),b.thumbs.has(c)?c.focus():n(t)}),onPointerMove:M(s.onPointerMove,t=>{t.target.hasPointerCapture(t.pointerId)&&l(t)}),onPointerUp:M(s.onPointerUp,t=>{const c=t.target;c.hasPointerCapture(t.pointerId)&&(c.releasePointerCapture(t.pointerId),d(t))})})}),re="SliderTrack",ie=m.forwardRef((s,r)=>{const{__scopeSlider:i,...n}=s,l=T(re,i);return e.jsx(I.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...n,ref:r})});ie.displayName=re;var O="SliderRange",oe=m.forwardRef((s,r)=>{const{__scopeSlider:i,...n}=s,l=T(O,i),d=se(O,i),o=m.useRef(null),a=k(r,o),u=l.values.length,p=l.values.map(c=>ce(c,l.min,l.max)),b=u>1?Math.min(...p):0,t=100-Math.max(...p);return e.jsx(I.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...n,ref:a,style:{...s.style,[d.startEdge]:b+"%",[d.endEdge]:t+"%"}})});oe.displayName=O;var F="SliderThumb",ae=m.forwardRef((s,r)=>{const i=Pe(s.__scopeSlider),[n,l]=m.useState(null),d=k(r,a=>l(a)),o=m.useMemo(()=>n?i().findIndex(a=>a.ref.current===n):-1,[i,n]);return e.jsx(De,{...s,ref:d,index:o})}),De=m.forwardRef((s,r)=>{const{__scopeSlider:i,index:n,name:l,...d}=s,o=T(F,i),a=se(F,i),[u,p]=m.useState(null),b=k(r,S=>p(S)),t=u?o.form||!!u.closest("form"):!0,c=be(u),g=o.values[n],v=g===void 0?0:ce(g,o.min,o.max),h=Te(n,o.values.length),x=c==null?void 0:c[a.size],f=x?Ke(x,v,a.direction):0;return m.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${v}% + ${f}px)`},children:[e.jsx(z.ItemSlot,{scope:s.__scopeSlider,children:e.jsx(I.span,{role:"slider","aria-label":s["aria-label"]||h,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...d,ref:b,style:g===void 0?{display:"none"}:s.style,onFocus:M(s.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),t&&e.jsx(le,{name:l??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},n)]})});ae.displayName=F;var _e="RadioBubbleInput",le=m.forwardRef(({__scopeSlider:s,value:r,...i},n)=>{const l=m.useRef(null),d=k(l,n),o=ve(r);return m.useEffect(()=>{const a=l.current;if(!a)return;const u=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==r&&b){const t=new Event("input",{bubbles:!0});b.call(a,r),a.dispatchEvent(t)}},[o,r]),e.jsx(I.input,{style:{display:"none"},...i,ref:d,defaultValue:r})});le.displayName=_e;function Ie(s=[],r,i){const n=[...s];return n[i]=r,n.sort((l,d)=>l-d)}function ce(s,r,i){const d=100/(i-r)*(s-r);return X(d,[0,100])}function Te(s,r){return r>2?`Value ${s+1} of ${r}`:r===2?["Minimum","Maximum"][s]:void 0}function Ve(s,r){if(s.length===1)return 0;const i=s.map(l=>Math.abs(l-r)),n=Math.min(...i);return i.indexOf(n)}function Ke(s,r,i){const n=s/2,d=L([0,50],[0,n]);return(n-d(r)*i)*i}function He(s){return s.slice(0,-1).map((r,i)=>s[i+1]-r)}function ze(s,r){if(r>0){const i=He(s);return Math.min(...i)>=r}return!0}function L(s,r){return i=>{if(s[0]===s[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(s[1]-s[0]);return r[0]+n*(i-s[0])}}function Oe(s){return(String(s).split(".")[1]||"").length}function Fe(s,r){const i=Math.pow(10,r);return Math.round(s*i)/i}var de=ee,Le=ie,Ge=oe,Ue=ae;const me=m.forwardRef(({className:s,...r},i)=>e.jsxs(de,{ref:i,className:je("relative flex w-full touch-none select-none items-center",s),...r,children:[e.jsx(Le,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Ge,{className:"absolute h-full bg-primary"})}),e.jsx(Ue,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));me.displayName=de.displayName;const at=({onCalculationUpdate:s})=>{const[r,i]=m.useState([{id:"management",name:"Management",weight:.12,description:"Project management and commissioning",score:50},{id:"health",name:"Health & Wellbeing",weight:.15,description:"Indoor environment and occupant comfort",score:50},{id:"energy",name:"Energy",weight:.19,description:"Energy efficiency and carbon emissions",score:50},{id:"transport",name:"Transport",weight:.08,description:"Transport accessibility and impact",score:50},{id:"water",name:"Water",weight:.06,description:"Water consumption and efficiency",score:50},{id:"materials",name:"Materials",weight:.125,description:"Material sustainability and lifecycle",score:50},{id:"waste",name:"Waste",weight:.075,description:"Waste management and reduction",score:50},{id:"land",name:"Land Use & Ecology",weight:.1,description:"Biodiversity and land impact",score:50},{id:"pollution",name:"Pollution",weight:.1,description:"Air and water pollution prevention",score:50},{id:"innovation",name:"Innovation",weight:.1,description:"Innovation and exemplary performance",score:50}]),[n,l]=m.useState(null),[d,o]=m.useState([]),a=()=>{const t=r.reduce((f,S)=>f+S.score*S.weight,0);let c="Unclassified";t>=85?c="Outstanding":t>=70?c="Excellent":t>=55?c="Very Good":t>=45?c="Good":t>=30&&(c="Pass");const g=t*.8,v=Math.max(0,3-Math.floor(t/30)),h={};r.forEach(f=>{h[f.name]=f.score});const x={totalScore:t,rating:c,carbonReduction:g,improvementAreas:v,categoryScores:h,weightedScore:t,materialEmissions:t*12.5,transportEmissions:t*8,energyEmissions:t*19};l(x),s(x)},u=(t,c)=>{i(g=>g.map(v=>v.id===t?{...v,score:c[0]}:v))},p=t=>{switch(t){case"Outstanding":return"text-purple-700 dark:text-purple-400";case"Excellent":return"text-green-700 dark:text-green-400";case"Very Good":return"text-blue-700 dark:text-blue-400";case"Good":return"text-yellow-700 dark:text-yellow-400";case"Pass":return"text-orange-700 dark:text-orange-400";default:return"text-muted-foreground"}},b=t=>{switch(t){case"Outstanding":return"bg-purple-100 text-purple-800 dark:bg-purple-950/20 dark:text-purple-300";case"Excellent":return"bg-green-100 text-green-800 dark:bg-green-950/20 dark:text-green-300";case"Very Good":return"bg-blue-100 text-blue-800 dark:bg-blue-950/20 dark:text-blue-300";case"Good":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-950/20 dark:text-yellow-300";case"Pass":return"bg-orange-100 text-orange-800 dark:bg-orange-950/20 dark:text-orange-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-950/20 dark:text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(W,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5"}),"BREEAM International Assessment"]})}),e.jsxs(Y,{className:"space-y-6",children:[r.map(t=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(ye,{className:"text-base font-semibold",children:[t.name," (",(t.weight*100).toFixed(1),"% weighting)"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),e.jsx("div",{className:"text-right ml-4",children:e.jsxs("div",{className:"text-lg font-bold text-primary",children:[t.score,"%"]})})]}),e.jsx(me,{value:[t.score],onValueChange:c=>u(t.id,c),max:100,min:0,step:5,className:"w-full"})]},t.id)),e.jsx(Se,{onClick:a,className:"w-full",children:"Calculate BREEAM Rating"})]})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(W,{children:e.jsxs($,{className:"flex items-center justify-between",children:["BREEAM Assessment Results",e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{standard:"greenstar",status:n.weightedScore>=70?"compliant":n.weightedScore>=55?"warning":"breach"}),e.jsx(Ne,{carbonIntensity:n.carbonReduction,size:"sm"})]})]})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs(R,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Overall Score"}),e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[n.weightedScore.toFixed(1),"%"]}),e.jsx(Re,{scope:"combined",size:"sm",showTooltip:!1})]}),e.jsxs(R,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"BREEAM Rating"}),e.jsx("div",{className:`text-2xl font-bold ${p(n.rating)}`,children:n.rating}),e.jsx("div",{className:`inline-block px-2 py-1 rounded-full text-xs mt-2 ${b(n.rating)}`,children:n.rating})]}),e.jsxs(R,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Carbon Reduction"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[n.carbonReduction.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-green-600",children:"Estimated impact"})]}),e.jsxs(R,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Improvement Areas"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:n.improvementAreas}),e.jsx("div",{className:"text-xs text-orange-600",children:"Categories to focus on"})]})]})})]}),e.jsx(Ce,{result:{totalEmissions:n.carbonReduction*1e3,materialEmissions:n.materialEmissions||0,transportEmissions:n.transportEmissions||0,energyEmissions:n.energyEmissions||0,breakdown:{materials:n.materialEmissions||0,transport:n.transportEmissions||0,energy:n.energyEmissions||0},breakdownByMaterial:{},breakdownByTransport:{},breakdownByEnergy:{efficiency:n.energyEmissions||0}},materials:d,onMaterialSelect:t=>{console.log("Selected BREEAM material for optimization:",t)}}),e.jsxs(R,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Category Performance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:t.name}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:[t.score,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${t.score}%`}})}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Weight: ",(t.weight*100).toFixed(1),"%"]})]},t.id))})]}),e.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"BREEAM Rating Scales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Rating Thresholds:"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Outstanding:"}),e.jsx("span",{className:"font-medium",children:"≥85%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Excellent:"}),e.jsx("span",{className:"font-medium",children:"70-84%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Very Good:"}),e.jsx("span",{className:"font-medium",children:"55-69%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Good:"}),e.jsx("span",{className:"font-medium",children:"45-54%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pass:"}),e.jsx("span",{className:"font-medium",children:"30-44%"})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Key Focus Areas:"}),e.jsxs("ul",{className:"text-muted-foreground space-y-1 text-xs",children:[e.jsx("li",{children:"• Energy (19% weighting) - highest impact category"}),e.jsx("li",{children:"• Health & Wellbeing (15%) - occupant comfort"}),e.jsx("li",{children:"• Materials (12.5%) - sustainable sourcing"}),e.jsx("li",{children:"• Management (12%) - project delivery quality"})]})]})]})]})]})]})};export{at as BREEAMCalculator};
//# sourceMappingURL=BREEAMCalculator-DXsUp7Z8.js.map
